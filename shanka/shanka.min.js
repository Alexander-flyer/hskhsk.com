/*
    Shanka HSK Flashcards

    @license
    
    You are free to copy, distribute, and modify this code, under a similar license
    to this one. You must give the original author (me) credit in any derived work.
    You may not use any part of this code for commercial purposes without obtaining
    my permission.
    
    Alan Davies 2014 alan@hskhsk.com
    
    See http://hskhsk.com/shanka for more information.

*/
function n(){g.wait_cursor_on||(g.wait_cursor_on=!0,setTimeout(A,100))}function A(){g.wait_cursor_on&&(document.getElementById("waitcursor").style.display="inline",document.body.style.cursor="wait")}function t(){g.wait_cursor_on=!1,document.getElementById("waitcursor").style.display="none",document.body.style.cursor="default"}function E(e){for(var t in e)return null==t?!1:!1;return!0}function s(e,t){var a=e.indexOf(t);return-1!=a}function x(){return/iP(hone|od|ad)/.test(navigator.platform)}function j(){return/Trident/.test(navigator.userAgent)}function B(t,a){for(var e=0,i=t.length;i>e;e++)if(!s(a,t[e]))return!1;return!0}function I(e,t){return e.length==t.length&&B(e,t)}function w(t){for(var a="",e=0,i=t.length;i>e;e++)e>0&&(a+=e==t.length-1?" "+STR.question_and_separator+" ":", "),a+=t[e];return a}function f(t,a,r,o){for(var e=0,l=t.length;l>e;e++){var d=t[e],i=r.indexOf(d);if(-1!=i){var n=o[i];s(a,n)||a.push(n)}}}function o(e){console.log(e),delete localStorage.state,g.errors_enabled&&(confirm(STR.app_generic_error+":\n\n"+e+"\n\n"+STR.app_cancel_silences_error)||(g.errors_enabled=!1))}function i(a,e){var t=STR.app_exception_error+" ("+a+"):\n\n";e.message&&(t+=e.message+"\n"),e.stack&&(t+=e.stack+"\n"),console.log(t),delete localStorage.state,e.code===DOMException.QUOTA_EXCEEDED_ERR?alert(x()?STR.local_storage_cannot_save_ios:STR.local_storage_cannot_save_other):errors_enabled&&(confirm(t+STR.app_cancel_silences_error)||(g.errors_enabled=!1))}function N(){var e="";return navigator&&navigator.userAgent&&(e=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&(e=e[1]),e&&e.length||!navigator||(navigator.language?e=navigator.language:navigator.browserLanguage?e=navigator.browserLanguage:navigator.systemLanguage?e=navigator.systemLanguage:navigator.userLanguage&&(e=navigator.userLanguage),e=e.substr(0,2)),console.log("current language is",e),e}function H(){var e=null;if(window.location.hash&&window.location.hash.length>1){console.log("constructing state from hash: "+window.location.hash);var t=window.location.hash.slice(1).split(",");t.length>0&&(e={section:t[0]});for(var a=1;a<t.length;a++){var i=t[a].split("=");2==i.length&&(e[i[0]]=i[1])}console.log("constructed state: "+JSON.stringify(e))}return e}/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.6.11
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function a(e){"use strict";var i,t=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return a.prototype.onClick.apply(t,arguments)},this.onMouse=function(){return a.prototype.onMouse.apply(t,arguments)},this.onTouchStart=function(){return a.prototype.onTouchStart.apply(t,arguments)},this.onTouchMove=function(){return a.prototype.onTouchMove.apply(t,arguments)},this.onTouchEnd=function(){return a.prototype.onTouchEnd.apply(t,arguments)},this.onTouchCancel=function(){return a.prototype.onTouchCancel.apply(t,arguments)},a.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,a,i){var n=Node.prototype.removeEventListener;"click"===t?n.call(e,t,a.hijacked||a,i):n.call(e,t,a,i)},e.addEventListener=function(a,t,i){var n=Node.prototype.addEventListener;"click"===a?n.call(e,a,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),i):n.call(e,a,t,i)}),"function"==typeof e.onclick&&(i=e.onclick,e.addEventListener("click",function(e){i(e)},!1),e.onclick=null))}function D(){this.getCurrentLanguage=function(){return localStorage.language},this.setLanguage=function(e){e in supportedLanguages&&(localStorage.language=e,this.primary_language=supportedLanguages[e],shanka.init(),shanka.showmain())};var e=H();if(e&&"section"in e){var a=e.section;if("lang"==a.substr(0,4)){var t=a.substr(5);t in supportedLanguages&&(localStorage.language=t)}}if(localStorage.language){var t=localStorage.language;this.primary_language=supportedLanguages[t]}else this.primary_language=supportedLanguages.en,localStorage.language="en";this.fallback_language=supportedLanguages.en,this.get_str=function(e){return this.primary_language&&this.primary_language.hasOwnProperty(e)?this.primary_language[e]:this.fallback_language.hasOwnProperty(e)?(console.log("get_str id not in primary language: "+e),this.fallback_language[e]):(console.log("get_str id not found: "+e),"")},this.declare_str=function(e){Object.defineProperty(this,e,{get:function(){return this.get_str(e)}})};for(var i in this.fallback_language)this.declare_str(i);this.get_language_name=function(t){var e="unknown";switch(t){case"en":e=this.lang_english_language;break;case"nl":e=this.lang_dutch_language;break;case"es":e=this.lang_spanish_language;break;case"de":e=this.lang_german_language;break;case"fr":e=this.lang_french_language;break;case"it":e=this.lang_italian_language}return e}}function _(){this.lessonid=0,this.name="",this.enabled=!0,this.reviewmode=!1,this.allquestions=!1,this.allcategories=!1,this.questionids=[],this.categoryids=[]}function r(){this.cardid=0,this.enabled=!0,this.queued=!1,this.simplified="",this.traditional="",this.pinyin="",this.kn_rate=0,this.last_time=0,this.next_time=0,this.test_count=0,this._definition=null,this._notes=null,this._data=null,this.categoryids=[]}function p(){this.categoryid=0,this.name=STR.category_new_name,this.cardids=[]}function h(){this.questionid=0,this.autogenname=!0,this.name="",this.autogentext=!0,this.questiontext="",this.input=[],this.stem=[],this.answer=[],this.display=[]}function l(){this.algorithmid=0,this.current=!1,this.enabled=!0,this.name="",this.type="",this.data={}}function y(){this.progressid=0,this.date=0,this.totaltimestudied=0,this.totalcardsknown=0,this.totalitemsstudied=0}var g={};g.wait_cursor_on=!1,n(),g.errors_enabled=!0;/* Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>
* @license
* This work is free. You can redistribute it and/or modify it
* under the terms of the WTFPL, Version 2
* For more information see LICENSE.txt or http://www.wtfpl.net/
*
* For more information, the home page:
* http://pieroxy.net/blog/pages/lz-string/testing.html
*
* LZ-based compression algorithm, version 1.3.3 */
var d={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(null==e)return"";var n,a,i,l,c,r,s,o="",t=0;for(e=d.compress(e);t<2*e.length;)t%2==0?(n=e.charCodeAt(t/2)>>8,a=255&e.charCodeAt(t/2),i=t/2+1<e.length?e.charCodeAt(t/2+1)>>8:0/0):(n=255&e.charCodeAt((t-1)/2),(t+1)/2<e.length?(a=e.charCodeAt((t+1)/2)>>8,i=255&e.charCodeAt((t+1)/2)):a=i=0/0),t+=3,l=n>>2,c=(3&n)<<4|a>>4,r=(15&a)<<2|i>>6,s=63&i,isNaN(a)?r=s=64:isNaN(i)&&(s=64),o=o+d._keyStr.charAt(l)+d._keyStr.charAt(c)+d._keyStr.charAt(r)+d._keyStr.charAt(s);return o},decompressFromBase64:function(e){if(null==e)return"";var t,r,o,l,g,u,i,n,s="",h=0,a=0,c=d._f;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<e.length;)g=d._keyStr.indexOf(e.charAt(a++)),u=d._keyStr.indexOf(e.charAt(a++)),i=d._keyStr.indexOf(e.charAt(a++)),n=d._keyStr.indexOf(e.charAt(a++)),r=g<<2|u>>4,o=(15&u)<<4|i>>2,l=(3&i)<<6|n,h%2==0?(t=r<<8,64!=i&&(s+=c(t|o)),64!=n&&(t=l<<8)):(s+=c(t|r),64!=i&&(t=o<<8),64!=n&&(s+=c(t|l))),h+=3;return d.decompress(s)},compressToUTF16:function(n){if(null==n)return"";var s,e,t,a="",r=0,i=d._f;for(n=d.compress(n),s=0;s<n.length;s++)switch(e=n.charCodeAt(s),r++){case 0:a+=i((e>>1)+32),t=(1&e)<<14;break;case 1:a+=i(t+(e>>2)+32),t=(3&e)<<13;break;case 2:a+=i(t+(e>>3)+32),t=(7&e)<<12;break;case 3:a+=i(t+(e>>4)+32),t=(15&e)<<11;break;case 4:a+=i(t+(e>>5)+32),t=(31&e)<<10;break;case 5:a+=i(t+(e>>6)+32),t=(63&e)<<9;break;case 6:a+=i(t+(e>>7)+32),t=(127&e)<<8;break;case 7:a+=i(t+(e>>8)+32),t=(255&e)<<7;break;case 8:a+=i(t+(e>>9)+32),t=(511&e)<<6;break;case 9:a+=i(t+(e>>10)+32),t=(1023&e)<<5;break;case 10:a+=i(t+(e>>11)+32),t=(2047&e)<<4;break;case 11:a+=i(t+(e>>12)+32),t=(4095&e)<<3;break;case 12:a+=i(t+(e>>13)+32),t=(8191&e)<<2;break;case 13:a+=i(t+(e>>14)+32),t=(16383&e)<<1;break;case 14:a+=i(t+(e>>15)+32,(32767&e)+32),r=0}return a+i(t+32)},decompressFromUTF16:function(n){if(null==n)return"";for(var t,e,a="",r=0,s=0,i=d._f;s<n.length;){switch(e=n.charCodeAt(s)-32,r++){case 0:t=e<<1;break;case 1:a+=i(t|e>>14),t=(16383&e)<<2;break;case 2:a+=i(t|e>>13),t=(8191&e)<<3;break;case 3:a+=i(t|e>>12),t=(4095&e)<<4;break;case 4:a+=i(t|e>>11),t=(2047&e)<<5;break;case 5:a+=i(t|e>>10),t=(1023&e)<<6;break;case 6:a+=i(t|e>>9),t=(511&e)<<7;break;case 7:a+=i(t|e>>8),t=(255&e)<<8;break;case 8:a+=i(t|e>>7),t=(127&e)<<9;break;case 9:a+=i(t|e>>6),t=(63&e)<<10;break;case 10:a+=i(t|e>>5),t=(31&e)<<11;break;case 11:a+=i(t|e>>4),t=(15&e)<<12;break;case 12:a+=i(t|e>>3),t=(7&e)<<13;break;case 13:a+=i(t|e>>2),t=(3&e)<<14;break;case 14:a+=i(t|e>>1),t=(1&e)<<15;break;case 15:a+=i(t|e),r=0}s++}return d.decompress(a)},compress:function(m){if(null==m)return"";var a,i,_,u={},h={},c="",g="",n="",o=2,p=3,s=2,r="",e=0,t=0,l=d._f;for(_=0;_<m.length;_+=1)if(c=m.charAt(_),Object.prototype.hasOwnProperty.call(u,c)||(u[c]=p++,h[c]=!0),g=n+c,Object.prototype.hasOwnProperty.call(u,g))n=g;else{if(Object.prototype.hasOwnProperty.call(h,n)){if(n.charCodeAt(0)<256){for(a=0;s>a;a++)e<<=1,15==t?(t=0,r+=l(e),e=0):t++;for(i=n.charCodeAt(0),a=0;8>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1}else{for(i=1,a=0;s>a;a++)e=e<<1|i,15==t?(t=0,r+=l(e),e=0):t++,i=0;for(i=n.charCodeAt(0),a=0;16>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1}o--,0==o&&(o=Math.pow(2,s),s++),delete h[n]}else for(i=u[n],a=0;s>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1;o--,0==o&&(o=Math.pow(2,s),s++),u[g]=p++,n=c+""}if(""!==n){if(Object.prototype.hasOwnProperty.call(h,n)){if(n.charCodeAt(0)<256){for(a=0;s>a;a++)e<<=1,15==t?(t=0,r+=l(e),e=0):t++;for(i=n.charCodeAt(0),a=0;8>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1}else{for(i=1,a=0;s>a;a++)e=e<<1|i,15==t?(t=0,r+=l(e),e=0):t++,i=0;for(i=n.charCodeAt(0),a=0;16>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1}o--,0==o&&(o=Math.pow(2,s),s++),delete h[n]}else for(i=u[n],a=0;s>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1;o--,0==o&&(o=Math.pow(2,s),s++)}for(i=2,a=0;s>a;a++)e=e<<1|1&i,15==t?(t=0,r+=l(e),e=0):t++,i>>=1;for(;;){if(e<<=1,15==t){r+=l(e);break}t++}return r},decompress:function(m){if(null==m)return"";if(""==m)return null;var y,h,c,a,n,i,t,s,r=[],o=4,l=4,g=3,u="",p="",_=d._f,e={string:m,val:m.charCodeAt(0),position:32768,index:1};for(h=0;3>h;h+=1)r[h]=h;for(a=0,i=Math.pow(2,2),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;switch(y=a){case 0:for(a=0,i=Math.pow(2,8),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;s=_(a);break;case 1:for(a=0,i=Math.pow(2,16),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;s=_(a);break;case 2:return""}for(r[3]=s,c=p=s;;){if(e.index>e.string.length)return"";for(a=0,i=Math.pow(2,g),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;switch(s=a){case 0:for(a=0,i=Math.pow(2,8),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;r[l++]=_(a),s=l-1,o--;break;case 1:for(a=0,i=Math.pow(2,16),t=1;t!=i;)n=e.val&e.position,e.position>>=1,0==e.position&&(e.position=32768,e.val=e.string.charCodeAt(e.index++)),a|=(n>0?1:0)*t,t<<=1;r[l++]=_(a),s=l-1,o--;break;case 2:return p}if(0==o&&(o=Math.pow(2,g),g++),r[s])u=r[s];else{if(s!==l)return null;u=c+c.charAt(0)}p+=u,r[l++]=c+u.charAt(0),o--,c=u,0==o&&(o=Math.pow(2,g),g++)}}};"undefined"!=typeof module&&null!=module&&(module.exports=d),a.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,a.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),a.prototype.deviceIsIOS4=a.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a.prototype.deviceIsIOSWithBadTarget=a.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),a.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},a.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},a.prototype.sendClick=function(a,i){"use strict";var t,e;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),e=i.changedTouches[0],t=document.createEvent("MouseEvents"),t.initMouseEvent(this.determineEventType(a),!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),t.forwardedTouchEvent=!0,a.dispatchEvent(t)},a.prototype.determineEventType=function(e){"use strict";return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},a.prototype.updateScrollParent=function(a){"use strict";var t,e;if(t=a.fastClickScrollParent,!t||!t.contains(a)){e=a;do{if(e.scrollHeight>e.offsetHeight){t=e,a.fastClickScrollParent=e;break}e=e.parentElement}while(e)}t&&(t.fastClickLastScrollTop=t.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},a.prototype.onTouchStart=function(e){"use strict";var a,t,i;if(e.targetTouches.length>1)return!0;if(a=this.getTargetElementFromEventTarget(e.target),t=e.targetTouches[0],this.deviceIsIOS){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!this.deviceIsIOS4){if(t.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=t.identifier,this.updateScrollParent(a)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=a,this.touchStartX=t.pageX,this.touchStartY=t.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},a.prototype.touchHasMoved=function(a){"use strict";var e=a.changedTouches[0],t=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t?!0:!1},a.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(t){"use strict";var s,r,a,i,n,e=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,r=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(n=t.changedTouches[0],e=document.elementFromPoint(n.pageX-window.pageXOffset,n.pageY-window.pageYOffset)||e,e.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=e.tagName.toLowerCase(),"label"===a){if(s=this.findControl(e)){if(this.focus(e),this.deviceIsAndroid)return!1;e=s}}else if(this.needsFocus(e))return t.timeStamp-r>100||this.deviceIsIOS&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(e),this.deviceIsIOS4&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(i=e.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(e)||(t.preventDefault(),this.sendClick(e,t)),!1)},a.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(e){"use strict";return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},a.prototype.onClick=function(e){"use strict";var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},a.prototype.destroy=function(){"use strict";var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(i){"use strict";var e,t;if(void 0===window.ontouchstart)return!0;if(t=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a.prototype.deviceIsAndroid)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(t>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===i.style.msTouchAction?!0:!1},a.attach=function(e){"use strict";return new a(e)},"undefined"!=typeof define&&define.amd?define(function(){"use strict";return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a,/*
 * AppScroll.js
 *
 * @license
 * Copyright 2013, Jacob Kelley - http://jakiestfu.com/
 * Released under the MIT Licence
 * http://opensource.org/licenses/MIT
 *
 * Github:  https://github.com/jakiestfu/AppScroll
 * Version: 1.0.0
 */
function(t){"use strict";var e=function(n){var e={toolbar:null,scroller:null},i=function(e){"ontouchstart"in window&&"function"==typeof e&&e.call()},a={listen:function(){e.scroller&&(e.scroller.addEventListener("touchend",a._touchEnd),e.scroller.addEventListener("scroll",a._endScroll)),e.toolbar&&e.toolbar.addEventListener("touchmove",a._touchMove),a._touchEnd(),a._endScroll()},noListen:function(){e.scroller&&(e.scroller.removeEventListener("touchend",a._touchEnd),e.scroller.removeEventListener("scroll",a._endScroll)),e.toolbar&&e.toolbar.removeEventListener("touchmove",a._touchMove)},_touchMove:function(e){e.preventDefault()},_touchEnd:function(){e.listenForScroll=!0},_endScroll:function(){if(e.scroller&&e.listenForScroll){var a=parseInt(t.getComputedStyle(e.scroller).height,10);e.scroller.scrollTop+a===a?(e.scroller.scrollTop=1,e.listenForScroll=!1):e.scroller.scrollTop+a===e.scroller.scrollHeight&&(e.scroller.scrollTop-=1)}else e.listenForScroll=!1}},s=function(t){i(function(){e=t,a.listen()})};this.on=function(){i(function(){a.noListen(),a.listen()})},this.off=function(){i(a.noListen)},s(n)};"undefined"!=typeof module&&module.exports&&(module.exports=e),"undefined"==typeof ender&&(this.AppScroll=e),"function"==typeof define&&define.amd&&define("AppScroll",[],function(){return e})}.call(this,window);/**
 * jscolor, JavaScript Color Picker
 *
 * @version 1.4.2
 * @license GNU Lesser General Public License, http://www.gnu.org/copyleft/lesser.html
 * @author  Jan Odvarko, http://odvarko.cz
 * @created 2008-06-15
 * @updated 2013-11-25
 * @link    http://jscolor.com
 */
var e={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){e.addEvent(window,"load",e.init)},init:function(){e.binding&&e.bind(),e.preloading&&e.preload()},getDir:function(){return"res/"},detectDir:function(){for(var n=location.href,a=document.getElementsByTagName("base"),t=0;t<a.length;t+=1)a[t].href&&(n=a[t].href);for(var a=document.getElementsByTagName("script"),t=0;t<a.length;t+=1)if(a[t].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(a[t].src)){var s=new e.URI(a[t].src),i=s.toAbsolute(n);return i.path=i.path.replace(/[^\/]+$/,""),i.query=null,i.fragment=null,""+i}return!1},bind:function(){for(var s=RegExp("(^|\\s)("+e.bindClass+")\\s*(\\{[^}]*\\})?","i"),a=document.getElementsByTagName("input"),t=0;t<a.length;t+=1){var i;if(!a[t].color&&a[t].className&&(i=a[t].className.match(s))){var n={};if(i[3])try{n=Function("return ("+i[3]+")")()}catch(e){}a[t].color=new e.color(a[t],n)}}},preload:function(){for(var t in e.imgRequire)e.imgRequire.hasOwnProperty(t)&&e.loadImage(t)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(t){e.imgRequire[t]=!0},loadImage:function(t){e.imgLoaded[t]||(e.imgLoaded[t]=new Image,e.imgLoaded[t].src=e.getDir()+t)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)},fireEvent:function(e,t){if(e)if(document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent(t,!0,!0),e.dispatchEvent(a)}else if(document.createEventObject){var a=document.createEventObject();e.fireEvent("on"+t,a)}else e["on"+t]&&e["on"+t]()},getElementPos:function(n){var e=n,t=n,a=0,i=0;if(e.offsetParent)do a+=e.offsetLeft,i+=e.offsetTop;while(e=e.offsetParent);for(;(t=t.parentNode)&&"BODY"!==t.nodeName.toUpperCase();)a-=t.scrollLeft,i-=t.scrollTop;return[a,i]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,a=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,a=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,a=e.layerY),{x:t,y:a}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(a){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var a=e.match(/^\/?[^\/]*/)[0];e=e.substr(a.length),t+=a}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(n){var n=new e.URI(n),a=this,i=new e.URI;return null===n.scheme?!1:(null!==a.scheme&&a.scheme.toLowerCase()===n.scheme.toLowerCase()&&(a.scheme=null),null!==a.scheme?(i.scheme=a.scheme,i.authority=a.authority,i.path=t(a.path),i.query=a.query):(null!==a.authority?(i.authority=a.authority,i.path=t(a.path),i.query=a.query):(""===a.path?(i.path=n.path,i.query=null!==a.query?a.query:n.query):("/"===a.path.substr(0,1)?i.path=t(a.path):(i.path=null!==n.authority&&""===n.path?"/"+a.path:n.path.replace(/[^\/]+$/,"")+a.path,i.path=t(i.path)),i.query=a.query),i.authority=n.authority),i.scheme=n.scheme),i.fragment=a.fragment,i)},a&&this.parse(a)},color:function(n,_){function x(e,t,i){var s=Math.min(Math.min(e,t),i),n=Math.max(Math.max(e,t),i),a=n-s;if(0===a)return[null,0,n];var r=e===s?3+(i-t)/a:t===s?5+(e-i)/a:1+(t-e)/a;return[6===r?0:r,a/n,n]}function v(i,s,e){if(null===i)return[e,e,e];var n=Math.floor(i),r=n%2?i-n:1-(i-n),t=e*(1-s),a=e*(1-s*r);switch(n){case 6:case 0:return[e,a,t];case 1:return[a,e,t];case 2:return[t,e,a];case 3:return[t,a,e];case 4:return[a,t,e];case 5:return[e,t,a]}}function L(){t.pickerisGoddamActive=!1,delete e.picker.owner,document.getElementsByTagName("body")[0].removeChild(e.picker.boxB),t.onclosedcallback&&t.onclosedcallback()}function B(f,b){function v(){var e=t.pickerInsetColor.split(/\s+/),i=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];a.btn.style.borderColor=i}if(!e.picker){e.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(t.pickerCloseText)};for(var h=0,_=4;h<e.images.sld[1];h+=_){var c=document.createElement("div");c.style.height=_+"px",c.style.fontSize="1px",c.style.lineHeight="0",e.picker.sld.appendChild(c)}e.picker.sldB.appendChild(e.picker.sld),e.picker.box.appendChild(e.picker.sldB),e.picker.box.appendChild(e.picker.sldM),e.picker.padB.appendChild(e.picker.pad),e.picker.box.appendChild(e.picker.padB),e.picker.box.appendChild(e.picker.padM),e.picker.btnS.appendChild(e.picker.btnT),e.picker.btn.appendChild(e.picker.btnS),e.picker.box.appendChild(e.picker.btn),e.picker.boxB.appendChild(e.picker.box)}var a=e.picker;if(a.box.onmouseup=a.box.onmouseout=function(){n.focus()},a.box.onmousedown=function(){d=!0},a.box.onmousemove=function(e){(o||r)&&(o&&y(e),r&&g(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),u())},"ontouchstart"in window){var m=function(e){var t={offsetX:e.touches[0].pageX-s.X,offsetY:e.touches[0].pageY-s.Y};(o||r)&&(o&&y(t),r&&g(t),u()),e.stopPropagation(),e.preventDefault()};a.box.removeEventListener("touchmove",m,!1),a.box.addEventListener("touchmove",m,!1)}a.padM.onmouseup=a.padM.onmouseout=function(){o&&(o=!1,e.fireEvent(i,"change"))},a.padM.onmousedown=function(e){switch(l){case 0:0===t.hsv[2]&&t.fromHSV(null,null,1);break;case 1:0===t.hsv[1]&&t.fromHSV(null,1,null)}r=!1,o=!0,y(e),u()},"ontouchstart"in window&&a.padM.addEventListener("touchstart",function(e){s={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-s.X,offsetY:e.touches[0].pageY-s.Y})}),a.sldM.onmouseup=a.sldM.onmouseout=function(){r&&(r=!1,e.fireEvent(i,"change"))},a.sldM.onmousedown=function(e){o=!1,r=!0,g(e),u()},"ontouchstart"in window&&a.sldM.addEventListener("touchstart",function(e){s={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-s.X,offsetY:e.touches[0].pageY-s.Y})});var p=w(t);a.box.style.width=p[0]+"px",a.box.style.height=p[1]+"px",a.boxB.style.position="absolute",a.boxB.style.clear="both",a.boxB.style.left=f+"px",a.boxB.style.top=b+"px",a.boxB.style.zIndex=t.pickerZIndex,a.boxB.style.border=t.pickerBorder+"px solid",a.boxB.style.borderColor=t.pickerBorderColor,a.boxB.style.background=t.pickerFaceColor,a.pad.style.width=e.images.pad[0]+"px",a.pad.style.height=e.images.pad[1]+"px",a.padB.style.position="absolute",a.padB.style.left=t.pickerFace+"px",a.padB.style.top=t.pickerFace+"px",a.padB.style.border=t.pickerInset+"px solid",a.padB.style.borderColor=t.pickerInsetColor,a.padM.style.position="absolute",a.padM.style.left="0",a.padM.style.top="0",a.padM.style.width=t.pickerFace+2*t.pickerInset+e.images.pad[0]+e.images.arrow[0]+"px",a.padM.style.height=a.box.style.height,a.padM.style.cursor="crosshair",a.sld.style.overflow="hidden",a.sld.style.width=e.images.sld[0]+"px",a.sld.style.height=e.images.sld[1]+"px",a.sldB.style.display=t.slider?"block":"none",a.sldB.style.position="absolute",a.sldB.style.right=t.pickerFace+"px",a.sldB.style.top=t.pickerFace+"px",a.sldB.style.border=t.pickerInset+"px solid",a.sldB.style.borderColor=t.pickerInsetColor,a.sldM.style.display=t.slider?"block":"none",a.sldM.style.position="absolute",a.sldM.style.right="0",a.sldM.style.top="0",a.sldM.style.width=e.images.sld[0]+e.images.arrow[0]+t.pickerFace+2*t.pickerInset+"px",a.sldM.style.height=a.box.style.height;try{a.sldM.style.cursor="pointer"}catch(e){a.sldM.style.cursor="hand"}a.btn.style.display=t.pickerClosable?"block":"none",a.btn.style.position="absolute",a.btn.style.left=t.pickerFace+"px",a.btn.style.bottom=t.pickerFace+"px",a.btn.style.padding="0 15px",a.btn.style.height="18px",a.btn.style.border=t.pickerInset+"px solid",v(),a.btn.style.color=t.pickerButtonColor,a.btn.style.font="12px sans-serif",a.btn.style.textAlign="center";try{a.btn.style.cursor="pointer"}catch(e){a.btn.style.cursor="hand"}switch(a.btn.onmousedown=function(){t.hidePicker()},a.btn.ontouchend=function(){t.hidePicker()},a.btnS.style.lineHeight=a.btn.style.height,l){case 0:var I="hs.png";break;case 1:var I="hv.png"}a.padM.style.backgroundImage="url('"+e.getDir()+"cross.gif')",a.padM.style.backgroundRepeat="no-repeat",a.sldM.style.backgroundImage="url('"+e.getDir()+"arrow.gif')",a.sldM.style.backgroundRepeat="no-repeat",a.pad.style.backgroundImage="url('"+e.getDir()+I+"')",a.pad.style.backgroundRepeat="no-repeat",a.pad.style.backgroundPosition="0 0",E(),k(),e.picker.owner=t,document.getElementsByTagName("body")[0].appendChild(a.boxB)}function w(t){var a=[2*t.pickerInset+2*t.pickerFace+e.images.pad[0]+(t.slider?2*t.pickerInset+2*e.images.arrow[0]+e.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+e.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+e.images.pad[1]];return a}function E(){switch(l){case 0:var o=1;break;case 1:var o=2}var d=Math.round(t.hsv[0]/6*(e.images.pad[0]-1)),c=Math.round((1-t.hsv[o])*(e.images.pad[1]-1));e.picker.padM.style.backgroundPosition=t.pickerFace+t.pickerInset+d-Math.floor(e.images.cross[0]/2)+"px "+(t.pickerFace+t.pickerInset+c-Math.floor(e.images.cross[1]/2))+"px";var n=e.picker.sld.childNodes;switch(l){case 0:for(var i=v(t.hsv[0],t.hsv[1],1),a=0;a<n.length;a+=1)n[a].style.backgroundColor="rgb("+i[0]*(1-a/n.length)*100+"%,"+i[1]*(1-a/n.length)*100+"%,"+i[2]*(1-a/n.length)*100+"%)";break;case 1:var i,r,s=[t.hsv[2],0,0],a=Math.floor(t.hsv[0]),u=a%2?t.hsv[0]-a:1-(t.hsv[0]-a);switch(a){case 6:case 0:i=[0,1,2];break;case 1:i=[1,0,2];break;case 2:i=[2,0,1];break;case 3:i=[2,1,0];break;case 4:i=[1,2,0];break;case 5:i=[0,2,1]}for(var a=0;a<n.length;a+=1)r=1-1/(n.length-1)*a,s[1]=s[0]*(1-r*u),s[2]=s[0]*(1-r),n[a].style.backgroundColor="rgb("+100*s[i[0]]+"%,"+100*s[i[1]]+"%,"+100*s[i[2]]+"%)"}}function k(){switch(l){case 0:var a=2;break;case 1:var a=1}var i=Math.round((1-t.hsv[a])*(e.images.sld[1]-1));e.picker.sldM.style.backgroundPosition="0 "+(t.pickerFace+t.pickerInset+i-Math.floor(e.images.arrow[1]/2))+"px"}function h(){return e.picker&&e.picker.owner===t}function T(){i===n&&t.importColor(),t.pickerOnfocus&&t.hidePicker()}function q(){i!==n&&t.importColor()}function y(s){var a=e.getRelMousePos(s),i=a.x-t.pickerFace-t.pickerInset,n=a.y-t.pickerFace-t.pickerInset;switch(l){case 0:t.fromHSV(i*(6/(e.images.pad[0]-1)),1-n/(e.images.pad[1]-1),null,p);break;case 1:t.fromHSV(i*(6/(e.images.pad[0]-1)),null,1-n/(e.images.pad[1]-1),p)}}function g(i){var n=e.getRelMousePos(i),a=n.y-t.pickerFace-t.pickerInset;switch(l){case 0:t.fromHSV(null,null,1-a/(e.images.sld[1]-1),f);break;case 1:t.fromHSV(null,1-a/(e.images.sld[1]-1),null,f)}}function u(){if(t.onImmediateChange){var e;e="string"==typeof t.onImmediateChange?Function(t.onImmediateChange):t.onImmediateChange,e.call(t)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=n,this.styleElement=n,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerisGoddamActive=!1,this.currentlyFingImporting=!1,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,this.onclosedcallback=null;for(var m in _)_.hasOwnProperty(m)&&(this[m]=_[m]);this.hidePicker=function(){h()&&L()},this.showPicker=function(){if(!h()){var a,t,o,s=e.getElementPos(n),r=e.getElementSize(n),d=e.getViewPos(),c=e.getViewSize(),l=w(this);switch(this.pickerPosition.toLowerCase()){case"left":a=1,t=0,o=-1;break;case"right":a=1,t=0,o=1;break;case"top":a=0,t=1,o=-1;break;default:a=0,t=1,o=1}var i=(r[t]+l[t])/2;if(this.pickerSmartPosition)var u=[-d[a]+s[a]+l[a]>c[a]&&-d[a]+s[a]+r[a]/2>c[a]/2&&s[a]+r[a]-l[a]>=0?s[a]+r[a]-l[a]:s[a],-d[t]+s[t]+r[t]+l[t]-i+i*o>c[t]?-d[t]+s[t]+r[t]/2>c[t]/2&&s[t]+r[t]-i-i*o>=0?s[t]+r[t]-i-i*o:s[t]+r[t]-i+i*o:s[t]+r[t]-i+i*o>=0?s[t]+r[t]-i+i*o:s[t]+r[t]-i-i*o];else var u=[s[a],s[t]+r[t]-i+i*o];this.pickerisGoddamActive=!0,B(u[a],u[t])}},this.importColor=function(){this.currentlyFingImporting=!0,i?this.adjust?!this.required&&/^\s*$/.test(i.value)?(i.value="",a.style.backgroundImage=a.jscStyle.backgroundImage,a.style.backgroundColor=a.jscStyle.backgroundColor,a.style.color=a.jscStyle.color,this.exportColor(c|b)):this.fromString(i.value)||this.exportColor():this.fromString(i.value,c)||(a.style.backgroundImage=a.jscStyle.backgroundImage,a.style.backgroundColor=a.jscStyle.backgroundColor,a.style.color=a.jscStyle.color,this.exportColor(c|b)):this.exportColor(),this.currentlyFingImporting=!1},this.exportColor=function(t){if(this.pickerisGoddamActive||this.currentlyFingImporting){if(!(t&c)&&i){var e=""+this;this.caps&&(e=e.toUpperCase()),this.hash&&(e="#"+e),i.value=e}t&b||!a||(a.style.backgroundImage="none",a.style.backgroundColor="#"+this,a.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),t&f||!h()||E(),t&p||!h()||k()}},this.fromHSV=function(e,t,a,i){null!==e&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),null!==t&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),null!==a&&(a=Math.max(0,this.minV,Math.min(1,this.maxV,a))),this.rgb=v(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===a?this.hsv[2]:this.hsv[2]=a),this.exportColor(i)},this.fromRGB=function(t,a,i,s){null!==t&&(t=Math.max(0,Math.min(1,t))),null!==a&&(a=Math.max(0,Math.min(1,a))),null!==i&&(i=Math.max(0,Math.min(1,i)));var e=x(null===t?this.rgb[0]:t,null===a?this.rgb[1]:a,null===i?this.rgb[2]:i);null!==e[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,e[0]))),0!==e[2]&&(this.hsv[1]=null===e[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,e[1]))),this.hsv[2]=null===e[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,e[2]));var n=v(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=n[0],this.rgb[1]=n[1],this.rgb[2]=n[2],this.exportColor(s)},this.fromString=function(a,t){var e=a.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return e?(6===e[1].length?this.fromRGB(parseInt(e[1].substr(0,2),16)/255,parseInt(e[1].substr(2,2),16)/255,parseInt(e[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(e[1].charAt(0)+e[1].charAt(0),16)/255,parseInt(e[1].charAt(1)+e[1].charAt(1),16)/255,parseInt(e[1].charAt(2)+e[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var t=this,l="hvs"===this.pickerMode.toLowerCase()?1:0,d=!1,i=e.fetchElement(this.valueElement),a=e.fetchElement(this.styleElement),o=!1,r=!1,s={},c=1,b=2,f=4,p=8;if(e.addEvent(n,"focus",function(){t.pickerOnfocus&&t.showPicker()}),e.addEvent(n,"blur",function(){d?d=!1:window.setTimeout(function(){d||T(),d=!1},0)}),i){var I=function(){t.fromString(i.value,c),u()};e.addEvent(i,"keyup",I),e.addEvent(i,"input",I),e.addEvent(i,"blur",q),i.setAttribute("autocomplete","off")}switch(a&&(a.jscStyle={backgroundImage:a.style.backgroundImage,backgroundColor:a.style.backgroundColor,color:a.style.color}),l){case 0:e.requireImage("hs.png");break;case 1:e.requireImage("hv.png")}e.requireImage("cross.gif"),e.requireImage("arrow.gif"),this.importColor()}};e.install();var P=function(){this.this_language="English",this.this_switch_language="Switch Language to English",this.lang_interface_language="Switch Language",this.lang_english_language="English",this.lang_dutch_language="Dutch",this.lang_spanish_language="Spanish",this.lang_german_language="German",this.lang_french_language="French",this.lang_italian_language="Italian",this.app_cancel_silences_error="('Cancel' silences future errors)",this.app_exception_error="Exception",this.app_generic_error="Error",this.app_initialising_message="<br /><i>Your web browser supports HTML5.<br /><br />Loading...</i><br /><br /><br /><br />",this.app_new_version_download_confirm="A new version of Shanka has been downloaded. Reload the app now?",this.app_no_html5_message="<h3>Your web browser doesn't support HTML5. Please use a modern web browser (Safari or Chrome) to run this app.</h3><br /><br /><br />",this.app_nojavascript_error="Your web browser does not have JavaScript enabled. Please enable JavaScript or use a different browser.",this.app_offline_status="OFFLINE",this.app_please_wait_a_moment="Please wait a moment...",this.app_support_see_message="For support see <a href='http://hskhsk.com/shanka'>hskhsk.com/shanka</a>",this.app_was_reloaded_message="App was reloaded!",this.gen_add_text="Add",this.gen_all_text="All",this.gen_cancel_text="Cancel",this.gen_delete_text="Delete",this.gen_duplicate_text="Duplicate",this.gen_edit_all_text="Edit All",this.gen_remove_text="Remove",this.gen_save_text="Save",this.main_beginners_quickstart_label="Beginners' Quick Start",this.main_browser_no_html5_error="Your web browser doesn't support HTML5. Please use a modern web browser (Safari or Chrome) to run this app.",this.main_choose_option_begin_label="Choose an option below to begin studying Chinese!",this.main_menu_help_label="Menu <b>&#8801;</b> and Help <b>?</b> are in the top corners.",this.main_setup_wizard_label="Setup Wizard",this.page_about_title="About",this.page_add_algorithm_title="Add Algorithm",this.page_add_category_title="Add Category",this.page_add_flashcard_title="Add Flashcard",this.page_add_lesson_title="Add Lesson",this.page_add_question_title="Add Question",this.page_algo_shanka_title="Shanka Algorithm",this.page_algorithms_title="Algorithms",this.page_card_info_title="Card Info",this.page_cards_title="Flashcards",this.page_categories_title="Categories",this.page_category_title="Category",this.page_edit_algorithm_title="Edit Algorithm",this.page_edit_algorithms_title="Edit Algorithms",this.page_edit_categories_title="Edit Categories",this.page_edit_category_name_title="Edit Category",this.page_edit_flashcard_title="Edit Flashcard",this.page_edit_lesson_title="Edit Lesson",this.page_edit_lessons_title="Edit Lessons",this.page_edit_question_title="Edit Question",this.page_edit_questions_title="Edit Questions",this.page_export_title="Export",this.page_help_contents_title="Help Contents",this.page_help_prefix_title="Help",this.page_history_title="History",this.page_import_title="Import",this.page_initialising_title="Initialising",this.page_lessons_title="Lessons",this.page_main_app_title="Shanka 闪卡",this.page_main_title="Main",this.page_maintenance_title="Maintenance",this.page_pleco_import_title="Pleco Import",this.page_practice_title="Practice",this.page_progress_title="Progress",this.page_question_title="Question",this.page_questions_title="Questions",this.page_queue_title="Queue",this.page_settings_title="Settings",this.page_skritter_import_title="Skritter Import",this.page_sticky_import_title="StickyStudy Import",this.page_study_title="Study",this.page_wizard1_title="Wizard 1/4",this.page_wizard2_title="Wizard 2/4",this.page_wizard3_title="Wizard 3/4",this.page_wizard4_title="Wizard 4/4",this.page_wizard_title="Wizard",this.study_edit_text="Edit",this.study_field_question_name_calligraphy="Calligraphy",this.study_field_question_name_cursive="Cursive",this.study_field_question_name_definition="Definition",this.study_field_question_name_notes="Notes",this.study_field_question_name_pinyin="Pinyin",this.study_field_question_name_simplified="Simplified",this.study_field_question_name_traditional="Traditional",this.study_field_question_text_calligraphy="Calligraphy",this.study_field_question_text_cursive="Cursive",this.study_field_question_text_definition="Definition",this.study_field_question_text_input_draw="Draw",this.study_field_question_text_input_type="Type",this.study_field_question_text_notes="Notes",this.study_field_question_text_pinyin="Pinyin",this.study_field_question_text_simplified="Hanzi",this.study_field_question_text_traditional="Hanzi",this.study_invalid_card_id_error="Invalid card id: ",this.study_invalid_question_id_error="Invalid question id: ",this.study_no_cards_questions_use_wizard_error="There are no cards or questions to study, please use the Quick Start, Wizard, or Import!",this.study_practice_short_text="Prac.",this.study_practice_text="Practice",this.study_search_no_results="No Results",this.study_search_result_label="Results",this.study_sentence_label="Sentence",this.study_show_answer_label="Show Answer",this.study_study_text="Study",this.wizard_added_lesson_message="Added lesson.",this.wizard_added_question_message="Added question.",this.wizard_algorithm_name_advanced="Advanced",this.wizard_algorithm_name_beginner="Beginner",this.wizard_algorithm_name_intermediate="Intermediate",this.wizard_algorithm_name_random="Random",this.wizard_algorithm_name_randomreview="Random Review",this.wizard_algorithm_name_review="Review",this.wizard_both_characters_label="Both",this.wizard_calligraphy_label="Calligraphy",this.wizard_created_algorithm_message="Created algorithm.",this.wizard_created_flashcards_format="Created {0} flashcards.",this.wizard_created_lesson_name="Wizard Created",this.wizard_cursive_label="Cursive",this.wizard_definition_label="Definition",this.wizard_done_label="Done!",this.wizard_found_lesson_message="Found lesson.",this.wizard_found_question_message="Found question.",this.wizard_merged_flashcards_format="Merged {0} flashcards.",this.wizard_next_label="Next",this.wizard_pinyin_label="Pinyin",this.wizard_reading_label="Reading Hanzi",this.wizard_select_one_vocab_error="Please select at least one vocabulary list!",this.wizard_select_something_learn_error="Please select something to learn!",this.wizard_sentences_label="Sentences",this.wizard_simplified_characters_label="Simplified",this.wizard_traditional_characters_label="Traditional",this.wizard_what_is_level_label="What is your level for this vocabulary?",this.wizard_what_want_learn_label="What do you want to learn?",this.wizard_which_characters_label="Which characters do you want to learn?",this.wizard_which_vocab_label="Which vocabulary list(s) do you want to study?",this.wizard_writing_label="Writing Hanzi",this.card_add_text="Add Card",this.card_delete_selected_confirm="Delete selected flashcards?",this.card_deleted_format="Deleted {0} flashcards.",this.card_duplicate_selected_confirm="Duplicate selected flashcards?",this.card_duplicated_format="Duplicated {0} flashcards.",this.card_enabled_label="Enabled",this.card_historical_bronze_label="Bronze",this.card_historical_forms_label="Historical Forms",this.card_historical_greatseal_label="Great Seal",this.card_historical_oracle_label="Oracle",this.card_historical_smallseal_label="Small Seal",this.card_if_queued_must_be_enabled_error="If a flashcard is queued, it must also be enabled!",this.card_must_have_at_least_simp_trad_error="You must have at least one of simplified or traditional characters!",this.card_must_have_definition_error="You must have a definition!",this.card_queued_label="Queued",this.card_related_flashcards_label="Related Flashcards",this.card_remove_selected_confirm="Remove selected flashcards from this category?",this.card_removed_format="Removed {0} flashcards.",this.card_saved_message="Card Saved.",this.card_stroke_order_label="Stroke Order",this.category_all_name="All",this.category_uncategorised_name="Uncategorised",this.category_delete_selected_confirm="Delete selected categories?",this.category_deleted_format="Deleted {0} categories",this.category_duplicate_sel_confirm="Duplicate selected categories?",this.category_duplicated_format="Duplicated {0} categories",this.category_edit_name="Edit Name",this.category_must_enter_name_error="You must enter a category name!",this.category_name_exists_error="That category name already exists!",this.category_name_label="Category Name",this.category_new_name="New Category",this.category_saved_format="Category '{0}' saved",this.settings_auto_advance_label="Auto Advance",this.settings_auto_queue_label="Auto Queue New Flashcards",this.settings_background_colour_label="Background Colour",this.settings_background_guides_label="Background Guides",this.settings_border_colour_label="Border Colour",this.settings_brush_colour_label="Brush Colour",this.settings_brush_width_label="Brush Width",this.settings_each_enabled_rating_must_have_val_error="Each of the enabled rating buttons must have a value",this.settings_enable_tone_colours_label="Enable Tone Colours",this.settings_general_label="General Settings",this.settings_grid_colour_label="Grid Colour",this.settings_guide_star_label="米 Star",this.settings_guide_grid_label="井 Grid",this.settings_guide_cross_label="十 Cross",this.settings_guide_bar_label="丨 Bar",this.settings_guide_none_label="No Guides",this.settings_hanzi_input_label="Hanzi Drawing Input",this.settings_must_enable_two_buttons_error="You must enable at least two of the rating buttons",this.settings_preferred_script_label="Preferred Script",this.settings_rating_enabled_label="Enabled",this.settings_ratings_label="Ratings",this.settings_response_1_default="No Idea",this.settings_response_2_default="Wrong",this.settings_response_3_default="So-So",this.settings_response_4_default="Right",this.settings_response_5_default="Easy",this.settings_saved_message="Settings saved.",this.settings_simp_trad_label="Simplified [Traditional]",this.settings_simplified_label="Simplified Only",this.settings_tone_1_label="Tone 1",this.settings_tone_2_label="Tone 2",this.settings_tone_3_label="Tone 3",this.settings_tone_4_label="Tone 4",this.settings_tone_5_label="Tone 5",this.settings_tone_colours_label="Pinyin Tone Colours",this.settings_tone_marks_label="Pinyin Tone Marks",this.settings_trad_simp_label="Traditional [Simplified]",this.settings_traditional_label="Traditional Only",this.maintenance_app_cache_label="App Cache",this.maintenance_erase_label="Erase",this.maintenance_erase_local_label="Erase local data",this.maintenance_installed_label="Installed",this.maintenance_rebuild_label="Rebuild",this.maintenance_rebuild_local_label="Rebuild local storage",this.maintenance_refresh_label="Refresh",this.maintenance_reload_label="Reload",this.maintenance_reload_local_label="Reload local data",this.maintenance_stand_alone_label="Standalone",this.maintenance_storage_used_format="Using {0} characters of local storage",this.maintenance_system_language_label="System Language",this.maintenance_update_label="Update",this.import_algorithms_label="Algorithms",this.import_default_category_label="Default Category",this.import_downloading_file_message="Downloading import file, please wait...",this.import_flashcards_label="Flashcards",this.import_generic_error="Import error",this.import_lessons_label="Lessons",this.import_parsing_data_message="Parsing import data...",this.import_paste_text_label="Paste text or a link (http://...) here",this.import_pleco_text_file_label="Pleco Text File",this.import_pleco_xml_file_label="Pleco XML File",this.import_progress_label="Progress",this.import_section_other="Other",this.import_section_quick="Quick",this.import_section_shanka="Shanka",this.import_settings_label="Settings",this.import_skritter_simp_label="Skritter (Simplified)",this.import_skritter_trad_label="Skritter (Traditional)",this.import_stickystudy_label="StickyStudy",this.import_timed_out_error="Import timed out!",this.export_beginning_message="Beginning Export...",this.export_categories_label="Categories to Export",this.export_do_export_label="Export",this.export_download_filename="ShankaExport.txt",this.export_download_filetext="Download File",this.export_export_format_label="Export Format",this.export_other_label="Other",this.export_success_message="Exported all data!",this.question_answer_label="Answer",this.question_auto_generate_label="Auto-generate",this.question_calligraphy_label="Calligraphy",this.question_components_label="Question Components",this.question_cursive_label="Cursive",this.question_definition_label="Definition",this.question_delete_selected_confirm="Delete selected questions?",this.question_deleted_format="Deleted {0} questions",this.question_display_label="Display",this.question_duplicate_sel_confirm="Duplicate selected questions?",this.question_duplicated_format="Duplicated {0} questions",this.question_hanzi_touch_label="Hanzi Touchpad",this.question_inputs_label="Inputs",this.question_name_label="Question Name",this.question_name_text_error="Your question must have a name and some question text!",this.question_new_name="New Question",this.question_notes_label="Notes",this.question_pinyin_label="Pinyin",this.question_saved_format="Question '{0}' saved",this.question_simplified_label="Simplified Hanzi",this.question_stem_answer_error="Your question must have at least one stem and one answer!",this.question_stem_label="Stem",this.question_text_edit_label="Text Edit Field",this.question_text_label="Question Text",this.question_traditional_label="Traditional Hanzi",this.question_whats_the_format="What's the {0}?",this.question_and_separator="and",this.lesson_delete_selected_confirm="Delete selected lessons?",this.lesson_deleted_format="Deleted {0} lessons",this.lesson_duplicate_selected_confirm="Duplicate selected lessons?",this.lesson_duplicated_format="Duplicated {0} lessons",this.lesson_must_include_1_cat_error="You must include at least one category!",this.lesson_must_include_1_quest_error="You must include at least one question!",this.lesson_name_already_exist_error="That lesson name already exists!",this.lesson_name_cant_be_empty_error="Lesson name cannot be empty!",this.lesson_name_label="Lesson Name",this.lesson_new_name="New Lesson",this.lesson_review_mode_name="(Review)",this.lesson_reviewing_label="Reviewing",this.lesson_saved_format="Lesson '{0}' saved",this.algorithm_adjustment_speed_positive_error="Adjustment Speed must be positive!",this.algorithm_any_element_probability_0_1_error="Any Element Probability must be between 0 and 1!",this.algorithm_cannot_delete_last_error="Cannot delete the last algorithm",this.algorithm_daily_correct_target_positive_int_error="Daily Correct Target must be a positive integer!",this.algorithm_daily_minutes_target_positive_int_error="Daily Minutes Target must be a positive integer!",this.algorithm_daily_new_target_positive_int_error="Daily New Target must be a positive integer!",this.algorithm_default_knowledge_rate_0_1_error="Default Knowledge Rate must be between 0 and 1!",this.algorithm_delete_selected_confirm="Delete selected algorithms?",this.algorithm_duplicate_selected_confirm="Duplicate selected algorithms?",this.algorithm_first_element_probability_0_1_error="First Element Probability must be between 0 and 1!",this.algorithm_minimum_interval_postive_0_error="Minimum Interval must be positive or zero!",this.algorithm_minimum_unknown_card_positive_int_error="Minimum Unknown Cards must be a positive integer!",this.algorithm_name_cant_be_empty_error="Algorithm name cannot be empty!",this.algorithm_threshold_knowledge_rate_0_1_error="Threshold Knowledge Rate must be between 0 and 1!",this.algorithm_adjustment_speed="Adjustment Speed",this.algorithm_any_element_probability="Any Element Probability",this.algorithm_choose_label="Choose an Algorithm",this.algorithm_current_label="Current",this.algorithm_daily_correct_target="Daily Correct Target",this.algorithm_daily_minutes_target="Daily Minutes Target",this.algorithm_daily_new_target="Daily New Target",this.algorithm_default_knowledge_rate="Default Knowledge Rate",this.algorithm_deleted_format="Deleted {0} algorithms",this.algorithm_duplicated_format="Duplicated {0} algorithms",this.algorithm_first_element_prob="First Element Probability",this.algorithm_history_today="today",this.algorithm_history_yesterday="yesterday",this.algorithm_knowledge_rate_display="Knowledge Rate",this.algorithm_knowledge_rate_trouble="having trouble",this.algorithm_knowledge_rate_learned="learned",this.algorithm_knowledge_rate_learning="learning",this.algorithm_minimum_interval="Minimum Interval",this.algorithm_minimum_unknown_cards="Minimum Unknown Cards",this.algorithm_name_label="Name",this.algorithm_new_name="New Algorithm",this.algorithm_parameters="Parameters",this.algorithm_saved_format="Algorithm '{0}' saved",this.algorithm_study_settings="Study Settings",this.algorithm_threshold_kn_rate="Threshold Knowledge Rate",this.local_storage_cannot_save_ios="Unable to save to local storage. Either your local storage quote has been exceeded, or you are in Private Browsing mode.",this.local_storage_cannot_save_other="Unable to save to local storage, your local storage quota has been exceeded.",this.local_storage_erase_confirm="Erase local storage data?",this.local_storage_erased_message="Local storage data was nuked!",this.local_storage_rebuild_confirm="Rebuild local storage?",this.local_storage_rebuilt_ok_message="Local storage was rebuilt- no errors were found!",this.local_storage_errors_detected_resolved_error="Local storage data errors were detected and resolved.\n\nYou may have missing or disconnected lessons, questions, categories, or cards.\n\nMore detailed information is available in the JavaScript console.",this.help_contents_label="Help Contents",this.help_main_page="<h3>Before you Begin</h3><p>You should first add the main page (welcome page) of this app to the homescreen of your device.</p><p>This will let you use the app when you are offline, and will also give put the app full-screen giving you more room to study.</p><p>On iOS this means clicking the icon in the middle of the bottom of the screen, that looks like a box with an arrow pointing up, and selecting 'Add to Home Screen'.</p><p>Similar functionality is available on all modern web browsers on Windows, Android, Mac OS, Windows Mobile, and Blackberry.</p>",this.help_lessons="<h3>Selected Lessons</h3><p>When you study, only questions and categories from lessons that are checked will be used.</p>",this.help_card_info="<h3>Categories</h3><p>Lists the categories, if any, that the current card is assigned to.</p><h3>Related Flashcards</h3><p>Shows all flashchards that share characters in common with the current flashcard.</p><h3>Stroke Order</h3><p>Some (but not all) characters have stroke order diagrams provided by the Wikimedia Foundation.</p><h3>Historical Forms</h3><p>The Wikimedia Foundation has collected together representative historical forms for many characters. These can help to understand the shape of some pictographs.</p>",this.help_practice="<h3>Just Relax!</h3><p>The practice page allows you sit back and practice whichever characters you like.</p><p>Enter the characters that you want to study in the text box.</p><p>All other character drawing functionality from the Study page is available.</p><h3>Search</h3><p>You can search through the hanzi and pinyin of all Flashcards by clicking the magnifying glass icon. The search will look for the characters in the text box, and will display a results list or go to the card if there is only one result.</p>",this.help_study="<p>This is the page of the app where you will spend most of your time, testing yourself on flashcards.</p><h3>Stem</h3><p>The Stem of the question is the information that you are given.</p><h3>Answer</h3><p>The Answer is the information that you supply. Type or draw the answer as appropriate, and then click 'show answer' to see if you were correct.</p><h3>Hanzi Input</h3><p>If a hanzi input control is displayed for the current question, you can draw as many characters as you want of the answer, and repeat each multiple times for practice if you prefer. Clicking the 下 button moves you to the next mini grid, or adds a new one if you are currently viewing the last mini grid. You can also click on the grids to select them. Other controls allow you to choose the colour of the pen, show/hide an overlaay of the current character, undo/redo your drawing, and clear the current grid.</p><h3>Display</h3><p>Some extra information such as notes that you are not graded on can also be displayed alongside the answer.</p><h3>Grading</h3><p>Grade yourself on each part of the answer, to determine when you will next be tested on the current flashcard. You can grade multiple items at once by swiping or dragging between them.</p>",this.help_categories="<p>Categories are sometimes called word lists in other systems. They help you to organise your flashcards, and to tell the app which flashcards you want to study.</p><p>A card can exist in multiple categories, or none at all in which case it is 'uncategorised'.</p>",this.help_progress="<p>The progress page shows you how many words were counted as known, how long you studied, and how many flashcards you studied, on each day that you used the app.</p>",this.help_history="<p>The history page shows all of the flashcards that you have studied, in the order that you studied them. Each flashcard will only appear in the list once.</p>",this.help_import="<p>With this page you can import data from the built in word lists, or from another flashcard system.</p>",this.help_export='export help<p>Exporting allows you to backup your data, You can also move it to Shanka running on another device, or to another flashcard system.</p><h3>Export Result</h3><p>Copy the text in the textedit and paste into another app. Alternatively, click the "Download file" button.</p>',this.help_settings="<p>The settings screen allows you to tweak many of the internals of the app.</p><h3>General Settings</h3><p>If auto advance is switched on, the next flashcard will be shown as soon as you have graded a flashcard when studying.</p><h3>Hanzi drawing input</h3><p>These settings control the look of the hanzi drawing control in study and practice modes.</p><h3>Background Guides</h3><p>The shape of the hanzi drawing background guides grid can be configured here.</p><h3>Pinyin Tone Colours</h3><p>If enabled, this will control the colours displayed for each syllable of toned pinyin.</p><h3>Preferred Script</h3><p>You can decide whether you prefer to see Simplified Hanzi, Traditional, or a combination of the two.</p><h3>Ratings</h3><p>Choose the names that you want to see for the ratings in the study page, and disable any that you don't want to use by unselecting them.</p>",this.help_queue="<p>The queue shows you all of the words that you are currently studying, and lets you know how well you know them all. The words are in the approximate order that they will be studied, although the order is randomised so that it doesn't become predictable.</p>",this.help_algorithms="<h3>Shanka Algorithm</h3><p>This algorithm controls the order that flashcards are displayed to you, and how many new flashcards are added when you have learned earlier ones.</p><h3>Study Settings</h3><p><li><b>Minimum Unknown Cards</b> - When the number of unknown cards falls below this level, new cards will be added to the queue.</p><p><li><b>Daily Correct Target</b> - Target minimum number of questions to answer correct each day.</p><p><li><b>Daily New Target</b> - Target minimum number of new flashcards to add each day.</p><p><li><b>Daily Minutes Target</b> - Target minimum time to spend studying each day, in minutes.</p><h3>Parameters</h3><p><li><b>Default Knowledge Rate</b> - Knowledge rate <i><b>kn_rate</b></i> is how well you know each piece of information in a flashcard. Zero is not at all, one is perfect knowledge.</p><p><li><b>Threshold Knowledge Rate</b> - The knowledge rate at which the information on a card will be counted as being 'known'.</p><p><li><b>Adjustment Speed</b> - How quickly the knowledge rate for each piece of information on a flashcard will move towards zero/one when you answer questions wrong/right. If this adjustment speed is <i><b>a</b></i>, then when a question is answered incorrectly, <i><b>kn_rate<sub>new</sub> = kn_rate<sub>old</sub> / a</b></i>. When a question is answered correctly, <i><b>kn_rate<sub>new</sub> = 1 + (kn_rate<sub>old</sub> - 1) / a</b></i>. If the five answer choices are numbered 1-5, then answer 3 will not change the knowledge rate, answers 2 and 4 are wrong and right, and answers 1 and 5 count as two wrong or right answers respectively.</p><p><li><b>Any Element Probability</b> - The probability that the next flashcard will be randomly drawn from anywhere in the queue, instead of the front of the queue. This setting allows even very old cards to be occasionally sprinkled into the studying. If you don't want this to happen, set the value to zero.</p><p><li><b>First Element Probability</b> - If this probability is <i><b>p</b></i>, and the first flashcard in the queue is number <i><b>0</b></i>, then flashcard ",this.help_questions="<h3>Question Name</h3> <p>Just used to identify the question in the question lists.</p> <h3>Question Text</h3> <p>The question that appears at the top of the card above the question stem, e.g. \"What is the pinyin for this character?\"</p> <p>Leave the auto-generate checkbox clicked if you want to have the app create this text based on the selected inputs, stem and answer.</p> <h3>Inputs</h3> <p>These inputs are displayed alongside the question stem. If you type Chinese into the edit box, you can use either your device's pinyin IME or handwriting input.</p> <h3>Stem</h3> <p>The 'front' of the card, for this question.</p> <h3>Answer</h3> <p>The part of the 'back' of the card that you are graded on.</p> <h3>Display</h3> <p>Other information on the 'back' of the card, that is displayed alongside the answer.</p>",this.help_maintenance="<h3>Reload</h3><p>Reloading will restart the app, using the information in the local storage.  This might help sometimes if you run into problems, or if you accidently run multiple instances of the app.</p><h3>Standalone</h3><p>This data is used to help diagnose problems with the app. It should be true if you are running the app in 'homescreen' or 'standalone' mode, and false if you are within a web browser.</p><h3>System Language</h3><p>This is the language code reported by your system.</p><h3>App Cache</h3><p>This web app always stores data about cards etc. in local storage. The app cache is seperate from this, and downloads the actual application pages so that you can access them while offline. If the app cache status is UNCACHED then you may not be able to access the app while offline. To ensure offline use you should look for an app cache status of CACHED.</p><h3>Update Web App</h3><p>To install the latest version of this app, click 'Update Web App' if you notice that the latest version is different from the current installed version. You shouldn't need to use this functionality if you download an update when prompted on startup</p><h3>Local Storage</h3><p>See <a href='http://dev-test.nemikor.com/web-storage/support-test/'>this page</a> to calculate your local storage limit, which is usually at least 2.5M chars depending on your browser. Note: 1k=2<sup>10</sup>=1024 characters, 1M=2<sup>20</sup> characters. Usually 1 character = 2 bytes, so 2.5M characters = 5MB of storage space.</p><h3>Erase Local Data</h3><p>If you are having problems you could try clearing your local storage data. If you want to keep your current history, you should first export a backup of your data.</p>",this.help_wizard="<p>Use this wizard to simplify the creation of lessons.</p><p>You can use the wizard more than once to create multiple lessons, and then choose which to study from the lessons screen.</p>",this.help_about="<h3>License</h3><p>You are free to copy, distribute, and modify this code, under a similar license to this one. You must give the original author (me) credit in any dervied work. You may not use any part of this code for any commercial purpose without obtaining my permission.</p><p>Alan Davies 2014 <a href='mailto:alan@hskhsk.com'>alan@hskhsk.com</a></p><p>See <a href='http://hskhsk.com/shanka'>hskhsk.com/shanka</a> for more information.</p><h3>Credits</h3><li>Customised version of the UI library <a href='http://maker.github.io/ratchet/'>Ratchet</a> provides the app's look and feel<br /><li>Sidebar code is <a href='https://github.com/jakiestfu/Snap.js/'>Snap.js</a> by jakiestfu<br /><li>Initial app structure inspired by <a href='http://html5db.desalasworks.com/'>sqldb example</a> by Steven de Salas <br /><li><a href='http://pieroxy.net/blog/pages/lz-string/index.html'>lz-string</a> compression routines by Pieroxy<br /><li>JavaScript code compression is  Mihai Bazon's <a href='http://lisperator.net/uglifyjs/'>UglifyJS2</a> <br /><li>The way to write a Hanzi Canvas was inspired by Greg Murray's <a href='http://gregmurray.org/ipad/touchpaint/'>TouchPaint</a> <br /><li>Colour Picker is Jan Odvárko's <a href='http://jscolor.com/'>jscolor</a> <br /><li>Shanka algorithm inspired by Adam Nagy of Cybertron BT's now-defunct <a href='https://web.archive.org/web/20100424220218/http://memodrops.com/algorithm.html'>Memodrops</a>.<br /><li>iPhone taps are more responsive thanks to <a href='https://github.com/ftlabs/fastclick'>FastClick</a><br /><li>Standalone web app scrolling problems are fixed by <a href='https://github.com/jakiestfu/AppScroll.js/'>AppScroll</a><br /><li><a href='http://commons.wikimedia.org/wiki/Commons:Stroke_Order_Project'>Stroke order animations</a> and <a href='http://commons.wikimedia.org/wiki/Commons:Ancient_Chinese_characters_project'>Ancient Chinese Characters</a> are provided by the <a href='http://commons.wikimedia.org/'>Wikimedia Foundation</a><br /><li>Code was edited using <a href='http://notepad-plus-plus.org/'>Notepad++</a><br /><li>Website hosted using <a href='http://aws.amazon.com/'>Amazon Web Services</a><br /><li>Uploading and manipulating files on Amazon S3 is made a lot easier with NetSDK Software's <a href='http://s3browser.com/'>S3 Browser</a><br /><li>Many problems were solved with the help of the comments and solutions on <a href='http://stackoverflow.com/'>Stack Overflow</a><br /><h3>Thanks</h3><li>Many thanks to the Chinese Forums, Pleco, and Skritter user communities, and the many beta testers who have found bugs and suggested improvements.<br /><li>Thank you also to the translators who are working on internationalising this app!",this.main_cards_learned_label="learned",this.main_cards_total_label="total",this.progress_studied_label="studied",this.progress_total_label="Total",this.progress_daily_label="Daily",this.progress_today_label="Today",this.progress_seconds="seconds",this.progress_minutes="minutes",this.progress_hours="hours",this.progress_days="days",this.progress_weeks="weeks",this.progress_years="years",this.progress_list_format="Studied {0} and learned {1} cards in {2}",this.language_unknown_error="Unknown language code:",this.import_hsk1_label="HSK 1 Words",this.import_hsk2_label="HSK 2 Words",this.import_hsk3_label="HSK 3 Words",this.import_hsk4_label="HSK 4 Words",this.import_hsk5_label="HSK 5 Words",this.import_hsk6_label="HSK 6 Words",this.import_hsk1_sentences_label="HSK 1 Sentences",this.import_hsk2_sentences_label="HSK 2 Sentences",this.import_hsk3_sentences_label="HSK 3 Sentences",this.import_chineasy_label="Chineasy",this.import_hsk1_category="HSK 1",this.import_hsk2_category="HSK 2",this.import_hsk3_category="HSK 3",this.import_hsk4_category="HSK 4",this.import_hsk5_category="HSK 5",this.import_hsk6_category="HSK 6",this.import_hsk1_sentences_category="HSK 1 句子",this.import_hsk2_sentences_category="HSK 2 句子",this.import_hsk3_sentences_category="HSK 3 句子",this.import_chineasy_category="Chineasy",this.import_hsk1_location="lists/HSK 2012 L1.txt",this.import_hsk2_location="lists/HSK 2012 L2.txt",this.import_hsk3_location="lists/HSK 2012 L3.txt",this.import_hsk4_location="lists/HSK 2012 L4.txt",this.import_hsk5_location="lists/HSK 2012 L5.txt",this.import_hsk6_location="lists/HSK 2012 L6.txt",this.import_hsk1_sentences_location="lists/HSK 2012 Examples L1.txt",this.import_hsk2_sentences_location="lists/HSK 2012 Examples L2.txt",this.import_hsk3_sentences_location="lists/HSK 2012 Examples L3.txt",this.import_chineasy_location="lists/Chineasy.txt"
},C=function(){this.this_language="Nederlands",this.this_switch_language="Wijzig taal naar Nederlands",this.lang_interface_language="Taal wijzigen",this.lang_english_language="Engels",this.lang_dutch_language="Nederlands",this.lang_spanish_language="Spaans",this.lang_german_language="Duitse",this.lang_french_language="Frans",this.lang_italian_language="Italiaans",this.app_cancel_silences_error="('Cancel' silences future errors)",this.app_exception_error="Uitzondering",this.app_generic_error="Fout",this.app_initialising_message="<br /><i>Uw browser ondersteund HTML5.<br /><br />Loading...</i><br /><br /><br /><br />",this.app_new_version_download_confirm="Een nieuwe versie van Shanka werd gedownload.Wilt u de app nu heropstarten?",this.app_no_html5_message="<h3>Uw browser ondersteund HTML5 niet.Gelieve een moderne browser (Safari of Chrome) te gebruiken om deze app te gebruiken.</h3><br /><br /><br />",this.app_nojavascript_error="JavaScript is uitgeschakeld. Gelieve JavaScript in te schakelen of een andere browser te gebruiken.",this.app_offline_status="OFFLINE",this.app_please_wait_a_moment="Een ogenblik geduld, a.u.b.",this.app_support_see_message="Voor ondersteuning zie <a href='http://hskhsk.com/shanka'>hskhsk.com/shanka</a>",this.app_was_reloaded_message="De app werd heropgestart",this.gen_add_text="Toevoegen",this.gen_all_text="Alle",this.gen_cancel_text="Annuleren",this.gen_delete_text="Verwijderen",this.gen_duplicate_text="Duplicate",this.gen_edit_all_text="Bewerken",this.gen_remove_text="Verwijderen",this.gen_save_text="Opslaan",this.main_beginners_quickstart_label="Beginners' Quick Start",this.main_browser_no_html5_error="Uw browser ondersteund HTML5 niet.Gelieve een moderne browser (Safari of Chrome) te gebruiken om deze app te gebruiken.",this.main_choose_option_begin_label="Kies één van onderstaande opties om te beginnen met leren.",this.main_menu_help_label="Menu <b>&#8801;</b> en Help <b>?</b> bevinden zich in de hoeken bovenaan.",this.main_setup_wizard_label="Installatiewizard",this.page_about_title="About",this.page_add_algorithm_title="Algoritme toevoegen",this.page_add_category_title="Categorie toevoegen",this.page_add_flashcard_title="Flashcard toevoegen",this.page_add_lesson_title="Les toevoegen",this.page_add_question_title="Vraag toevoegen",this.page_algo_shanka_title="Shanka Algoritme",this.page_algorithms_title="Algoritme",this.page_card_info_title="Card Info",this.page_cards_title="Flashcards",this.page_categories_title="Categorieën",this.page_category_title="Categorie",this.page_edit_algorithm_title="Algoritme aanpassen",this.page_edit_algorithms_title="Algoritme aanpassen",this.page_edit_categories_title="Categorieën aanpassen",this.page_edit_category_name_title="Categorie aanpassen",this.page_edit_flashcard_title="Flashcard aanpassen",this.page_edit_lesson_title="Les aanpassen",this.page_edit_lessons_title="Lessen aanpassen",this.page_edit_question_title="Vraag aanpasse",this.page_edit_questions_title="Vragen aanpassen",this.page_export_title="Exporteren",this.page_help_contents_title="Help Contents",this.page_help_prefix_title="Help",this.page_history_title="Geschiedenis",this.page_import_title="Importeren",this.page_initialising_title="Initialiseren",this.page_lessons_title="Lessen",this.page_main_app_title="Shanka 闪卡",this.page_main_title="Hoofdmenu",this.page_maintenance_title="Onderhoud",this.page_pleco_import_title="Pleco Import",this.page_practice_title="Oefenen",this.page_progress_title="Voortgang",this.page_question_title="Vraag",this.page_questions_title="Vragen",this.page_queue_title="Wachtrij",this.page_settings_title="Instellingen",this.page_skritter_import_title="Skritter Import",this.page_sticky_import_title="StickyStudy Import",this.page_study_title="Studeren",this.page_wizard1_title="Wizard 1/4",this.page_wizard2_title="Wizard 2/4",this.page_wizard3_title="Wizard 3/4",this.page_wizard4_title="Wizard 4/4",this.page_wizard_title="Wizard",this.study_edit_text="Wijzigen",this.study_field_question_name_calligraphy="Kalligrafie",this.study_field_question_name_cursive="Cursief",this.study_field_question_name_definition="Definitie",this.study_field_question_name_notes="Notities",this.study_field_question_name_pinyin="Pinyin",this.study_field_question_name_simplified="Vereenvoudigd",this.study_field_question_name_traditional="Traditioneel",this.study_field_question_text_calligraphy="Kalligrafie",this.study_field_question_text_cursive="Cursief",this.study_field_question_text_definition="Definitie",this.study_field_question_text_input_draw="Tekenen",this.study_field_question_text_input_type="Type",this.study_field_question_text_notes="Notities",this.study_field_question_text_pinyin="Pinyin",this.study_field_question_text_simplified="Hanzi",this.study_field_question_text_traditional="Hanzi",this.study_invalid_card_id_error="Ongeldige kaart-ID: ",this.study_invalid_question_id_error="Ongeldige vraag-ID: ",this.study_no_cards_questions_use_wizard_error="Er zijn geen kaarten of vragen om te studeren. Gelieve gebruik te maken van Quick Start, de wizard of importeren",this.study_practice_short_text="Oefen",this.study_practice_text="Oefenen",this.study_search_no_results="Geen resultaten",this.study_search_result_label="Resultaten",this.study_sentence_label="Zin",this.study_show_answer_label="Toon antwoord",this.study_study_text="Studeer",this.wizard_added_lesson_message="Toegevoegde les.",this.wizard_added_question_message="Toegevoegde vraag.",this.wizard_algorithm_name_advanced="Geavanceerd",this.wizard_algorithm_name_beginner="Beginners",this.wizard_algorithm_name_intermediate="Intermediate",this.wizard_algorithm_name_random="Willekeurig",this.wizard_algorithm_name_randomreview="Willekeurige beoordeling",this.wizard_algorithm_name_review="Review",this.wizard_both_characters_label="Beide",this.wizard_calligraphy_label="Kalligrafie",this.wizard_created_algorithm_message="Gemaakt algoritme.",this.wizard_created_flashcards_format="{0} flashcards gemaakt.",this.wizard_created_lesson_name="Wizard gemaakt",this.wizard_cursive_label="Cursief",this.wizard_definition_label="Definitie",this.wizard_done_label="Klaar!",this.wizard_found_lesson_message="Les gevonden.",this.wizard_found_question_message="Vraag gevonden.",this.wizard_merged_flashcards_format="{0} flashcards samengevoegd.",this.wizard_next_label="Volgende",this.wizard_pinyin_label="Pinyin",this.wizard_reading_label="Reading Hanzi",this.wizard_select_one_vocab_error="Gelieve minimum één woordenschatlijst te selecteren!",this.wizard_select_something_learn_error="Gelieve iets om te leren te selecteren!",this.wizard_sentences_label="Zinnen",this.wizard_simplified_characters_label="Vereenvoudigd",this.wizard_traditional_characters_label="Traditioneel",this.wizard_what_is_level_label="Wat is uw niveau voor deze woordenschat?",this.wizard_what_want_learn_label="Wat wilt u leren?",this.wizard_which_characters_label="Welke karakters wilt u leren?",this.wizard_which_vocab_label="Welke woordenschatlijst(en) wilt u studeren?",this.wizard_writing_label="Writing Hanzi",this.card_add_text="Flashcard toevoegen",this.card_delete_selected_confirm="Wilt u de geselecteerde flashcards verwijderen?",this.card_deleted_format="{0} flashcards verwijdert.",this.card_duplicate_selected_confirm="Wilt u de geselecteerde flashcards verdubbelen?",this.card_duplicated_format="{0} flashcards verdubbelt.",this.card_enabled_label="Ingeschakeld",this.card_historical_bronze_label="Brons",this.card_historical_forms_label="Historische vormen",this.card_historical_greatseal_label="Groot Zegel",this.card_historical_oracle_label="Orakel",this.card_historical_smallseal_label="Klein zegel",this.card_if_queued_must_be_enabled_error="Als een flashcard in de wachtrij staat, moet het ook zijn ingeschakeld!",this.card_must_have_at_least_simp_trad_error="U moet minimum één vereenvoudigd of traditioneel karakter hebben!",this.card_must_have_definition_error="U moet een definite hebben!",this.card_queued_label="In de wachtrij gezet",this.card_related_flashcards_label="Gerelateerde flashcards",this.card_remove_selected_confirm="Wilt u de geselecteerde flashcards uit deze categorie verwijderen?",this.card_removed_format="{0} flashcards verwijdert.",this.card_saved_message="Flashcard opgeslagen.",this.card_stroke_order_label="Trekjesvolgorde",this.category_all_name="Alle",this.category_uncategorised_name="Ongecategoriseerd",this.category_delete_selected_confirm="Wilt u de geselecteerde categorieën verwijderen?",this.category_deleted_format="{0} categories verwijdert",this.category_duplicate_sel_confirm="Wilt u de geselecteerde categorieën verdubbelen?",this.category_duplicated_format="{0} categories verdubbelt",this.category_edit_name="Naam bewerken",this.category_must_enter_name_error="U dient een naam voor deze categorie in te voeren!",this.category_name_exists_error="Deze categorie naam bestaat al!",this.category_name_label="Categorie naam",this.category_new_name="Nieuwe categorie",this.category_saved_format="Categorie '{0}' opgeslagen",this.settings_auto_advance_label="Automatisch vooruit",this.settings_auto_queue_label="Automatisch in de wachtrij plaatsen van nieuwe flashcards",this.settings_background_colour_label="Achtergrondkleur",this.settings_background_guides_label="Background Gidsen",this.settings_border_colour_label="Randkleur",this.settings_brush_colour_label="Borstelkleur",this.settings_brush_width_label="Borstelbreedte",this.settings_each_enabled_rating_must_have_val_error="Elk van de ingeschakelde cijfertoetsen moet een waarde hebben.",this.settings_enable_tone_colours_label="Enable Tone Colours",this.settings_general_label="Algemene instellingen",this.settings_grid_colour_label="Roosterkleur",this.settings_guide_star_label="米 Ster",this.settings_guide_grid_label="井 Rooster",this.settings_guide_cross_label="十 Kruis",this.settings_guide_bar_label="丨 Balk",this.settings_guide_none_label="Geen gidsen",this.settings_hanzi_input_label="Hanzi Teken Input",this.settings_must_enable_two_buttons_error="U moet ten minste twee cijfertoesten inschakelen",this.settings_preferred_script_label="Voorkeurs script",this.settings_rating_enabled_label="Ingeschakeld",this.settings_ratings_label="Ratings",this.settings_response_1_default="Geen idee",this.settings_response_2_default="Fout",this.settings_response_3_default="Zo zo",this.settings_response_4_default="Juist",this.settings_response_5_default="Gemakkelijk",this.settings_saved_message="Instellingen opgeslagen.",this.settings_simp_trad_label="Vereenvoudigd [Traditioneel]",this.settings_simplified_label="Enkel vereenvoudigd",this.settings_tone_1_label="Toon 1",this.settings_tone_2_label="Toon 2",this.settings_tone_3_label="Toon 3",this.settings_tone_4_label="Toon 4",this.settings_tone_5_label="Toon 5",this.settings_tone_colours_label="Pinyin toonkleuren",this.settings_tone_marks_label="Pinyin toontekens",this.settings_trad_simp_label="Traditioneel [Vereenvoudigd]",this.settings_traditional_label="Enkel traditioneel",this.maintenance_app_cache_label="App Cache",this.maintenance_erase_label="Erase",this.maintenance_erase_local_label="Erase local data",this.maintenance_installed_label="Installed",this.maintenance_rebuild_label="Rebuild",this.maintenance_rebuild_local_label="Rebuild local storage",this.maintenance_refresh_label="Refresh",this.maintenance_reload_label="Reload",this.maintenance_reload_local_label="Reload local data",this.maintenance_stand_alone_label="Standalone",this.maintenance_storage_used_format="Using {0} characters of local storage",this.maintenance_system_language_label="System Language",this.maintenance_update_label="Update",this.import_algorithms_label="Algoritmes",this.import_chineasy_label="Chineasy",this.import_default_category_label="Default Categorie",this.import_downloading_file_message="Bezig met downloaden van het importbestand, even geduld...",this.import_flashcards_label="Flashcards",this.import_generic_error="Import error",this.import_hsk1_label="HSK 1 Woordenschat",this.import_hsk2_label="HSK 2 Woordenschat",this.import_hsk3_label="HSK 3 Woordenschat",this.import_hsk4_label="HSK 4 Woordenschat",this.import_hsk5_label="HSK 5 Woordenschat",this.import_hsk6_label="HSK 6 Woordenschat",this.import_lessons_label="Lessen",this.import_parsing_data_message="Parseren van de importdata...",this.import_paste_text_label="Plak tekst of een link (http://...) hier",this.import_pleco_text_file_label="Pleco Text File",this.import_pleco_xml_file_label="Pleco XML File",this.import_progress_label="Voortgang",this.import_section_other="Andere",this.import_section_quick="Vlug",this.import_section_shanka="Shanka",this.import_settings_label="Instellingen",this.import_skritter_simp_label="Skritter (Vereenvoudigd)",this.import_skritter_trad_label="Skritter (Traditioneel)",this.import_stickystudy_label="StickyStudy",this.import_timed_out_error="Importeren time-out!",this.export_beginning_message="Gaat exporteren...",this.export_categories_label="Categorieën tot Export",this.export_do_export_label="Exporteren",this.export_download_filename="ShankaExport.txt",this.export_download_filetext="Bestand downloaden",this.export_export_format_label="Export Format",this.export_other_label="Andere",this.export_success_message="Alle data werd geëxporteerd",this.question_answer_label="Antwoord",this.question_auto_generate_label="Auto-genereren",this.question_calligraphy_label="Kalligrafie",this.question_components_label="Vraagcomponenten",this.question_cursive_label="Cursief",this.question_definition_label="Definitie",this.question_delete_selected_confirm="Wilt u de geselecteerde vragen verwijderen?",this.question_deleted_format="{0} vragen verwijderd",this.question_display_label="Display",this.question_duplicate_sel_confirm="Wilt u de geselecteerde vragen verdubbelen?",this.question_duplicated_format="{0} vragen verdubbelt",this.question_hanzi_touch_label="Hanzi Touchpad",this.question_inputs_label="Inputs",this.question_name_label="Vraag naam",this.question_name_text_error="Uw vraag moet een naam en wat tekst hebben!",this.question_new_name="Nieuwe vraag",this.question_notes_label="Notities",this.question_pinyin_label="Pinyin",this.question_saved_format="Vraag '{0}' opgeslagen",this.question_simplified_label="Vereenvoudigde Hanzi",this.question_stem_answer_error="Uw vraag moet ten minste een stam en een antwoord hebben!",this.question_stem_label="Stam",this.question_text_edit_label="Tekst bewerken",this.question_text_label="Vraagtekst",this.question_traditional_label="Traditionele Hanzi",this.question_whats_the_format="What is de {0}?",this.question_and_separator="en",this.lesson_delete_selected_confirm="Wilt u de geselecteerde lessen verwijderen?",this.lesson_deleted_format="{0} lessen verwijdert",this.lesson_duplicate_selected_confirm="Wilt u de geselecteerde lessen verdubbelen?",this.lesson_duplicated_format="{0} lessen verdubbelt",this.lesson_must_include_1_cat_error="U moet ten minste één categorie invoegen!",this.lesson_must_include_1_quest_error="You must include at least one question!",this.lesson_name_already_exist_error="Die les naam bestaat al!",this.lesson_name_cant_be_empty_error="De les naam kan niet leeg zijn.!",this.lesson_name_label="Les naam",this.lesson_new_name="Nieuwe les",this.lesson_review_mode_name="(Review)",this.lesson_reviewing_label="Herziening",this.lesson_saved_format="Les '{0}' opgeslagen",this.algorithm_adjustment_speed_positive_error="Aanpassing snelheid moet positief zijn!",this.algorithm_any_element_probability_0_1_error="Any Element Probability must be between 0 and 1!",this.algorithm_cannot_delete_last_error="Kan het laatste algoritme niet verwijderen",this.algorithm_daily_correct_target_positive_int_error="Daily Correct Target moet een positief geheel getal zijn!",this.algorithm_daily_minutes_target_positive_int_error="Daily Minutes Target moet een positief geheel getal zijn!",this.algorithm_daily_new_target_positive_int_error="Daily New Target moet een positief geheel getal zijn!",this.algorithm_default_knowledge_rate_0_1_error="Default Knowledge Rate moet tussen 0 and 1 zijn!",this.algorithm_delete_selected_confirm="Wilt u de geselecteerde algoritmes verwijderen?",this.algorithm_duplicate_selected_confirm="Wilt u de geselecteerde algoritmes verdubbelen?",this.algorithm_first_element_probability_0_1_error="First Element Probability moet tussen 0 and 1 zijn!",this.algorithm_minimum_interval_postive_0_error="Minimum Interval moet positief of gelijk zijn aan nul!",this.algorithm_minimum_unknown_card_positive_int_error="Minimum Unknown Cards moeten een positief geheel getal zijn!",this.algorithm_name_cant_be_empty_error="Algoritme naam kan niet leeg zijn!",this.algorithm_threshold_knowledge_rate_0_1_error="Threshold Knowledge Rate moet tussen 0 and 1 zijn!",this.algorithm_adjustment_speed="Aanpassing snelheid",this.algorithm_any_element_probability="Any Element Probability",this.algorithm_choose_label="Kies een algoritme",this.algorithm_current_label="Huidige",this.algorithm_daily_correct_target="Dagelijks doel correct",this.algorithm_daily_minutes_target="Dagelijks doel minuten",this.algorithm_daily_new_target="Dagelijks doel nieuw",this.algorithm_default_knowledge_rate="Default Knowledge Rate",this.algorithm_deleted_format="{0} algoritmes verwijdert",this.algorithm_duplicated_format="{0} algoritmes verdubbelt",this.algorithm_first_element_prob="First Element Probability",this.algorithm_history_today="Vandaag",this.algorithm_history_yesterday="Gisteren",this.algorithm_knowledge_rate_display="Kennis graad",this.algorithm_knowledge_rate_trouble="Problemen",this.algorithm_knowledge_rate_learned="Geleerd",this.algorithm_knowledge_rate_learning="Leren",this.algorithm_minimum_interval="Minimale interval",this.algorithm_minimum_unknown_cards="Minimale ongekende flashcards",this.algorithm_name_label="Naal",this.algorithm_new_name="Nieuw Algoritme",this.algorithm_parameters="Parameters",this.algorithm_saved_format="Algoritme '{0}' opgeslagen",this.algorithm_study_settings="Studie instellingen",this.algorithm_threshold_kn_rate="Threshold Knowledge Rate",this.local_storage_cannot_save_ios="Kan niet worden opgeslagen in de lokale opslag. Uw schijfruimte kan overschreden zijn of u bevindt zich in een privé-sessie.",this.local_storage_cannot_save_other="Kan niet worden opgeslagen in de lokale opslage, uw schijfruimte is overschreden.",this.local_storage_erase_confirm="Wilt u de lokale opslage van gegevens verwijderen?",this.local_storage_erased_message="Local storage data was nuked!",this.local_storage_rebuild_confirm="Herbouw lokale opslag?",this.local_storage_rebuilt_ok_message="De lokale opslag werd herbouwd - geen fouten gevonden!",this.local_storage_errors_detected_resolved_error="Fouten in de lokale opslag werden gevonden en opgelost.\n\nU hebt waarschijnlijk ontbrekende of verbroken lessen, vragen, categorieën of kaarten.\n\nMeer gedetailleerde informatie is beschikbaar in de JavaScript-console.",this.help_contents_label="Help",this.help_main_page="<h3>Voordat u begint...</h3><p>Voegt u eerst onze hoofdpagina (welkomstpagina) toe aan het startscherm van uw toestel.</p><p>Dit laat u toe de app te gebruiken zelfs als u offline bent. De app zal eveneens op een volledig scherm te zien zijn, zodat u meer ruimte krijgt om te studeren.</p><p>Voor iOS-systemen gaat dit als volgt: u klikt op het pictogram in het midden van de onderkant van uw scherm, dit lijkt op een doos met pijl naar boven, daarna kiest u voor 'Add to Home Screen'.</p><p>Vergelijkbare functionaliteit is beschikbaar op alle moderne webbrowsers op Windows, Android, Mac OS, Windows Mobile en Blackberry.</p>",this.help_lessons="<h3>Geselecteerde lessen</h3><p>Als u studeert zullen enkel vragen en categorieën van de lessen die u aanvinkte worden gebruikt.</p>",this.help_card_info="<h3>Categorieën</h3><p>Toont de categorieën, indien van toepassing, waartoe de huidige kaart is aangewezen.</p><h3>Gerelateerde flashcards</h3><p>Toont alle flashcards die tekens gemeen hebben met de huidige flashcard.</p><h3>Trekjesvolgorde</h3><p>Sommige (maar niet alle) karakters hebben hebben een trekjesvolgorde, voorzien door the Wikimedia Foundation.</p><h3>Historische vormen</h3><p>The Wikimedia Foundation verzamelde tal van representatieve historische vormen voor Chinese karakters. Deze kunnen bijdragen aan het begrijpen van enkele pictogrammen.</p>",this.help_practice="<h3>Just Relax!</h3><p>Op deze oefenpagina kunt u achterover leunen en op een rustige wijze karakters leren, dewelke u maar wilt!.</p><p>Voer de karakters die u wilt leren in het tekstvak in.</p><p>Alle andere functies van de Studie-pagina is beschikbaar.</p><h3>Search</h3><p>U kunt zoeken via de hanzi en pinyin van alle flashcards door op het vergrootglas te klikken.Het zoekprogramma zoekt voor de karakters in het tekstvak en zal een lijst met resultaten weergeven. Als er slechts één resultaat is, zal het rechtstreeks naar die flashcard doorgaan.</p>",this.help_study="<p>Dit is de pagina waar u de meeste tijd zal doorbrengen, met het testen d.m.v. flashcards.</p><h3>Stem</h3><p>De stam van de vraag is de informatie die u krijgt.</p><h3>Answer</h3><p>Het antwoord is de informatie die u levert. Type of teken het antwoord, en klik nadien op 'Toon het antwoord' om te zien of u juist bent.</p><h3>Hanzi Input</h3><p>Als een hanzi input wordt weergegeven kan u zoveel tekens trekken als u maar wilt. Daarbovenop kunt u dit ook telkens herhalen.Door op de 下 toets te klikken ga je naar het volgende rooster, mocht u zich reeds op het laatste rooster bevinden, dan voegt deze knop een nieuw toe. U kan ookop de roosters klikken om ze te seleteren. Andere controls laten u het kleur van uw pen kiezen, tonen/verbergen een 'overlay' van het karakter of laten u uw tekening hermaken., U kunt het huidige rooster eveneens weer vrijmaken.</p><h3>Display</h3><p>Wat extra informatie, zoals notities waarop u niet wordt beoordeeld, kan ook naast het antwoord verschijnen.</p><h3>Beroordeling</h3><p>Beoordeel jezelf op elk deel van het antwoord, om te bepalen wanneer u de volgende keer zal worden getest op de huidige flashcard.U kunt dit meerdere keren tegelijk doen.</p>",this.help_categories="<p>Categories are sometimes called word lists in other systems. They help you to organise your flashcards, and to tell the app which flashcards you want to study.</p><p>A card can exist in multiple categories, or none at all in which case it is 'uncategorised'.</p>",this.help_progress="<p>De voortgangspagina toont hoeveel woorden u kent, hoe lang u studeerde, en hoeveel flashcards u hebt ingestudeerd, elke dag dat u de app gebruikt.</p>",this.help_history="<p>De geschiedenis pagina toont u alle flashcards die u instudeerde, in de volgorde dat u ze instudeerde. Elke flashcard zal maar een enkele keer in de lijst verschijnen.</p>",this.help_import="<p>Met deze pagina kunt u data importeren uit de ingebouwde woordenlijsten, of van een ander systeem.</p>",this.help_export='Export help<p>Via exporteren maakt u een back-up van uw gegevens. U kan eveneens deze gegevens overplaatsen naar de Shanka app op een ander (flashcard) systeem.</p><h3>Export Result</h3><p>Kopieer de tekst in de Teksteditor en plak deze in een andere app. U kunt ook op de "Download file" knop klikken.</p>',this.help_settings="<p>Met instellingen kunt u de app naar believen tweaken.</p><h3>Algemene instellingen</h3><p>Als auto voortgang is ingeschakeld, zal de volgende flashcard verschijnen zodra u de voorgaande hebt beoordeelt.</p><h3>Hanzi drawing input</h3><p>Deze instellingen bepalen het uiterlijk van de hanzi drawing input in de studeer- en oefenmodus.</p><h3>Achtergrondgidsen</h3><p>De vorm van de hanzi achtergrondgids kan hier worden geconfigureerd.</p><h3>Pinyin Toon Kleuren</h3><p>Indien ingeschakeld, zal dit de weergegeven kleuren voor elke lettergreep weergeven.</p><h3>Voorkeur schrift</h3><p>U kunt zelf beslissen of u liever vereenvoudigde, traditionele hanzi, of een combinatie van de twee wilt zien.</p><h3>Ratings</h3><p>Kies de namen die u wilt zien voor de beoordelingen in de studie-pagina, en alle die u niet wilt gebruiken.</p>",this.help_queue="<p>De wachtrij toont u alle woorden die u momenteel studeert, en laat u weten hoe goed u ze allemaal kent. De woorden zijn geschatte volgorde waarin ze worden bestudeerd. De orde is wel willekeurig, zodat het niet voorspelbaar wordt.</p>",this.help_algorithms="<h3>Shanka Algoritme</h3><p>Dit algoritme bepaalt de volgorde waarin de flashcards aan u worden getoond, en hoeveel nieuwe flashcards er worden toegevoegd..</p><h3>Studie instellingen</h3><p><li><b>Minimum Unknown Cards </b> - Als het aantal onbekende kaarten nder dit niveau valt, dan zullen nieuwe flashcards worden toegevoegd aan de wachtrij.</p><p><li><b>Daily Correct Target</b> - Dit is het minimum aantal kaarten die u per dag juist zou moeten hebben.</p><p><li><b>Daily New Target</b> - Dit is het aantal nieuwe kaarten om dagelijks toe te voegen.</p><p><li><b>Daily Minutes Target</b> - Dit is het studiedoel per dag, weergegeven in minuten.</p><h3>Parameters</h3><p><li><b>Default Knowledge Rate</b> - Kennisgraad <i><b>kn_rate</b></i> is hoe goed je elk stukje informatie in een flashcard kent. Nul is helemaal niet, één is perfect.</p><p><li><b>Threshold Knowledge Rate</b> - De kennisgraad waarbij elk stukje informatie zal worden gezien als gekend.</p><p><li><b>Adjustment Speed</b> - De snelheid waarbij de kennis voor elk stukje informatie zal evolueren naar nul/één als u vragen fout/goed beantwoord. If this adjustment speed is <i><b>a</b></i>, then when a question is answered incorrectly, <i><b>kn_rate<sub>new</sub> = kn_rate<sub>old</sub> / a</b></i>. Als u een vraag juist beantwoord, <i><b>kn_rate<sub>new</sub> = 1 + (kn_rate<sub>old</sub> - 1) / a</b></i>. If the five answer choices are numbered 1-5, then answer 3 will not change the knowledge rate, answers 2 and 4 are wrong and right, and answers 1 and 5 count as two wrong or right answers respectively.</p><p><li><b>Any Element Probability</b> - The probability that the next flashcard will be randomly drawn from anywhere in the queue, instead of the front of the queue. This setting allows even very old cards to be occasionally sprinkled into the studying. If you don't want this to happen, set the value to zero.</p><p><li><b>First Element Probability</b> - If this probability is <i><b>p</b></i>, and the first flashcard in the queue is number <i><b>0</b></i>, then flashcard <i><b>n</b></i> will be chosen as the card to study with probability <i><b>p &times; (1-p)<sup>n</sup></b></i>. As the sum for all flashcards in the queue will be slightly less than 1, the leftover probability is assigned to the first element.</p><p><li><b>Minimum Interval</b> - The minimum number of cards that must be shown before a card is repeated, even if it is always marked as unknown.</p>",this.help_questions="<h3>Vraag naam</h3> <p>Enkel gebruikt om de vraag in de vragenlijst te identificeren.</p> <h3>Vraag tekst</h3> <p>De tekst die bovenaan de kaart verschijnt, e.g. \"Wat is de pinyin transcriptie voor dit karakter?\"</p> <p>Laat de auto-generate checkbox aangevinkt als u wil dat de app deze tekst creërt a.d.h. van de geselecteerde input, stam en antwoorden.</p> <h3>Inputs</h3> <p>Deze inputs worden weergegeven naast de vraag. Als je Chineestypet in de edit box, dan kan je ofwel het pinyin het van je systeem gebruiken ofwel IME ofwel via de handgeschreven input</p> <h3>Stam</h3> <p> De 'voorzijde' van de kaart, voor deze vraag.</p> <h3>Antwoord</h3> <p> Het deel op de 'achterzijde' van de kaart, waarop je wordt beoordeeld.</p> <h3>Display</h3> <p> Andere informatie op de 'achterzijde' van de kaart, zoals weergegven naast het antwoord.</p>",this.help_maintenance="<h3>Reload</h3><p>Reloading zal de app heropstarten, gebruikmakende van de informatie in de lokale opslag.  Dit kan helpen mocht u in de problemen geraken, of als u per abuis verschillende malen de app draait.</p><h3>Standalone</h3><p>Deze date wordt gebruik bij het opsporen van problemen van de app. Het zou moeten 'true' zijn, als u deze app draait in'de homescreen' of 'standalone' modus, en 'false' als u dit doet vanuit een web browser.</p><h3>Systeemtaal</h3><p>Dit is de taal, zoals aangegeven door uw systeem.</p><h3>App Cache</h3><p>Deze web app bewaart informatie over de flashcards etc. in de lokale opslage. De cache is hiervan afgezonderd, endownloads de eigenlijke applicatie pagina's zodat u ze offline kunt gebruiken. Als de app cache statusUNCACHED is, dan zal het waarschijnlijk niet mogelijk zijn om offline toegang te krijgen tot de app. Om offline gebruik te waarborgen, moet je zorgen vooreen app cache status CACHED.</p><h3>Update Web App</h3><p>Om de laatste versie van deze app the installeren, klikt u 'Update Web App' als u merkt dat de laatste versieanders is dan de huidige geïnstalleerde versie. U zou deze functie niet nodig hebben als ude app updated bij het opstarten</p><h3>Lokale opslag</h3><p>Zie <a href='http://dev-test.nemikor.com/web-storage/support-test/'>this page</a> om uw lokale opslagslimiet te berekenen, dit is meestal rond 2,5M afhankelijk van uw browser.Note: 1k=2<sup>10</sup>=1024 characters, 1M=2<sup>20</sup> characters. Meestal is 1 karakter = 2 bytes, dus2.5M karakters = 5MB ruimte.</p><h3>Lokale data verwijderen</h3><p> Bij problemen kan u opteren om de lokale data te verwijderen. Als u uw huidige geschiedenis wilt behouden, dient u eerst een backup van uw data te exporteren.</p>",this.help_wizard="<p>Gebruik deze wizard ter vereenvoudiging van het creëren van lessen.</p><p>U kan deze wizard meer dan eens gebruiken voor het creëren van meerdere lessen, om dan te kiezen welke les u wilt instuderen via het lessenvenster.</p>",this.help_about="<h3>License</h3><p>You are free to copy, distribute, and modify this code, under a similar license to this one. You must give the original author (me) credit in any dervied work. You may not use any part of this code for any commercial purpose without obtaining my permission.</p><p>Alan Davies 2014 <a href='mailto:alan@hskhsk.com'>alan@hskhsk.com</a></p><p>See <a href='http://hskhsk.com/shanka'>hskhsk.com/shanka</a> for more information.</p><h3>Credits</h3><li>Customised version of the UI library <a href='http://maker.github.io/ratchet/'>Ratchet</a> provides the app's look and feel<br /><li>Sidebar code is <a href='https://github.com/jakiestfu/Snap.js/'>Snap.js</a> by jakiestfu<br /><li>Initial app structure inspired by <a href='http://html5db.desalasworks.com/'>sqldb example</a> by Steven de Salas <br /><li><a href='http://pieroxy.net/blog/pages/lz-string/index.html'>lz-string</a> compression routines by Pieroxy<br /><li>Touchpaint control is a heavily modified version of the <a href='http://gregmurray.org/ipad/touchpaint/'>original by Greg Murray</a> <br /><li>Colour Picker is Jan Odvárko's <a href='http://jscolor.com/'>jscolor</a> <br /><li>Shanka algorithm inspired by Adam Nagy of Cybertron BT's now-defunct <a href='https://web.archive.org/web/20100424220218/http://memodrops.com/algorithm.html'>Memodrops</a>.<br /><li>iPhone taps are more responsive thanks to <a href='https://github.com/ftlabs/fastclick'>FastClick</a><br /><li>Standalone web app scrolling problems are fixed by <a href='https://github.com/jakiestfu/AppScroll.js/'>AppScroll</a><br /><li><a href='http://commons.wikimedia.org/wiki/Commons:Stroke_Order_Project'>Stroke order animations</a> and <a href='http://commons.wikimedia.org/wiki/Commons:Ancient_Chinese_characters_project'>Ancient Chinese Characters</a> are provided by the <a href='http://commons.wikimedia.org/'>Wikimedia Foundation</a><br /><li>Code was edited using <a href='http://notepad-plus-plus.org/'>Notepad++</a><br /><li>Website hosted using <a href='http://aws.amazon.com/'>Amazon Web Services</a><br /><li>Uploading and manipulating files on Amazon S3 is made a lot easier with NetSDK Software's <a href='http://s3browser.com/'>S3 Browser</a><br /><li>Many problems were solved with the help of the comments and solutions on <a href='http://stackoverflow.com/'>Stack Overflow</a><br /><h3>Thanks</h3><li>Many thanks to the Chinese Forums, Pleco, and Skritter user communities, and the many beta testers who have found bugs and suggested improvements.<br /><li>Thank you also to the translators who are working on internationalising this app!",this.main_cards_learned_label="geleerd",this.main_cards_total_label="gotaal",this.progress_studied_label="studeerde",this.progress_total_label="Gotaal",this.progress_daily_label="Dagelijkse",this.progress_today_label="Vandaag",this.progress_seconds="seconden",this.progress_minutes="minuten",this.progress_hours="uren",this.progress_days="dagen",this.progress_weeks="weken",this.progress_years="jaar",this.progress_list_format="Studeerde {0} en {1} leerde kaarten in {2}",this.language_unknown_error="Unknown language code:",this.import_hsk1_label="HSK 1 Words",this.import_hsk2_label="HSK 2 Words (Engels)",this.import_hsk3_label="HSK 3 Words (Engels)",this.import_hsk4_label="HSK 4 Words (Engels)",this.import_hsk5_label="HSK 5 Words (Engels)",this.import_hsk6_label="HSK 6 Words (Engels)",this.import_hsk1_sentences_label="HSK 1 Zinnen",this.import_hsk2_sentences_label="HSK 2 Zinnen",this.import_hsk3_sentences_label="HSK 3 Zinnen",this.import_chineasy_label="Chineasy",this.import_hsk1_category="HSK 1",this.import_hsk2_category="HSK 2",this.import_hsk3_category="HSK 3",this.import_hsk4_category="HSK 4",this.import_hsk5_category="HSK 5",this.import_hsk6_category="HSK 6",this.import_hsk1_sentences_category="HSK 1 句子",this.import_hsk2_sentences_category="HSK 2 句子",this.import_hsk3_sentences_category="HSK 3 句子",this.import_chineasy_category="Chineasy",this.import_hsk1_location="lists/HSK 2012 L1 nl.txt",this.import_hsk2_location="lists/HSK 2012 L2.txt",this.import_hsk3_location="lists/HSK 2012 L3.txt",this.import_hsk4_location="lists/HSK 2012 L4.txt",this.import_hsk5_location="lists/HSK 2012 L5.txt",this.import_hsk6_location="lists/HSK 2012 L6.txt",this.import_hsk1_sentences_location="lists/HSK 2012 Examples L1 nl.txt",this.import_hsk2_sentences_location="lists/HSK 2012 Examples L2 nl.txt",this.import_hsk3_sentences_location="lists/HSK 2012 Examples L3 nl.txt",this.import_chineasy_location="lists/Chineasy nl.txt"
},z=function(){this.this_language="Español",this.this_switch_language="Cambia el idioma a español",this.lang_interface_language="Cambiar idioma",this.lang_english_language="Inglés",this.lang_dutch_language="Holandés",this.lang_spanish_language="Español",this.lang_german_language="Alemán",this.lang_french_language="Francés",this.lang_italian_language="Italiano",this.app_cancel_silences_error="('Cancelar' silencia  futuros errores)",this.app_exception_error="Excepción",this.app_generic_error="Error",this.app_initialising_message="<br /><i>Tu buscador soporta HTML5.<br /><br />Cargando...</i><br /><br /><br /><br />",this.app_new_version_download_confirm="Una nueva versión de Shanka ha sido cargada.¿Regargar la applicación ahora?",this.app_no_html5_message="<h3>Tu buscador no soporta HTML5. Por favor use un buscador moderno (Safari o Chrome) para ejecutar esta applicación.</h3><br /><br /><br />",this.app_nojavascript_error="TU buscador no tiene a JavaScript habilitado. Por favor abilite JavaScript o usa un buscador diferente.",this.app_offline_status="FUERA DE LINEA",this.app_please_wait_a_moment="Por favor espere un momento...",this.app_support_see_message="Por soporte vé a...<a href='http://hskhsk.com/shanka'>hskhsk.com/shanka</a>",this.app_was_reloaded_message="¡La applicación ha sido recargada con éxito!",this.gen_add_text="Agregar",this.gen_all_text="Todo",this.gen_cancel_text="Cancelar",this.gen_delete_text="Borrar",this.gen_duplicate_text="Duplicar",this.gen_edit_all_text="Editar Todo",this.gen_remove_text="Remover",this.gen_save_text="Guardar",this.main_beginners_quickstart_label="'Principiantes' Comienzo Rápido",this.main_browser_no_html5_error="Tú buscador no soporta HTML5. Por favor use un buscador moderno (Safari o Chrome) para ejecutar esta applicación.",this.main_choose_option_begin_label="¡Elija una opción para comenzar a aprender chino!",this.main_menu_help_label="Los menús <b>&#8801;</b> y la ayuda <b>?</b> están arriba en las esquinas.",this.main_setup_wizard_label="Actualización del Asistente de Ayuda",this.page_about_title="Sobre",this.page_add_algorithm_title="Adicionar Algorítmos",this.page_add_category_title="Adicionar Categorías",this.page_add_flashcard_title="Adicionar Flashcard",this.page_add_lesson_title="Adicionar Lección",this.page_add_question_title="Agregar Pregunta",this.page_algo_shanka_title="Algorítmo de Shanka",this.page_algorithms_title="Algoritmos",this.page_card_info_title="Información de Flashcards",this.page_cards_title="Flashcards",this.page_categories_title="Categorías",this.page_category_title="Categoría",this.page_edit_algorithm_title="Editar Algoritmo",this.page_edit_algorithms_title="Editar Algoritmo",this.page_edit_categories_title="Editar Categoría",this.page_edit_category_name_title="Editar Categoría",this.page_edit_flashcard_title="Editar Flashcard",this.page_edit_lesson_title="Editar Lección",this.page_edit_lessons_title="Editar Lecciones",this.page_edit_question_title="Editar Preguntas",this.page_edit_questions_title="Editar Preguntas",this.page_export_title="Exportar",this.page_help_contents_title="Contenido de Ayuda",this.page_help_prefix_title="Ayuda",this.page_history_title="Historia",this.page_import_title="Importar",this.page_initialising_title="Inicializando",this.page_lessons_title="Lecciones",this.page_main_app_title="Shanka 闪卡",this.page_main_title="Página Principal",this.page_maintenance_title="Mantenimiento",this.page_pleco_import_title="Importar Pleco ",this.page_practice_title="Práctica",this.page_progress_title="Progreso",this.page_question_title="Pregunta",this.page_questions_title="Preguntas",this.page_queue_title="Enlistadas",this.page_settings_title="Configuraciones",this.page_skritter_import_title="Importe de Skritter",this.page_sticky_import_title="Importe de StickyStudy",this.page_study_title="Estudiar",this.page_wizard1_title="Asistente de ayuda 1/4",this.page_wizard2_title="Asistente de ayuda 2/4",this.page_wizard3_title="Asistente de ayuda 3/4",this.page_wizard4_title="Asistente de ayuda 4/4",this.page_wizard_title="Asistente de ayuda",this.study_edit_text="Editar",this.study_field_question_name_calligraphy="Caligrafía",this.study_field_question_name_cursive="Cursiva",this.study_field_question_name_definition="Definición",this.study_field_question_name_notes="Notas",this.study_field_question_name_pinyin="Pinyin",this.study_field_question_name_simplified="Simplificado",this.study_field_question_name_traditional="Tradicional",this.study_field_question_text_calligraphy="Caligrafía",this.study_field_question_text_cursive="Cursiva",this.study_field_question_text_definition="Definicion",this.study_field_question_text_input_draw="Dibujar",this.study_field_question_text_input_type="Escribir",this.study_field_question_text_notes="Notas",this.study_field_question_text_pinyin="Pinyin",this.study_field_question_text_simplified="Hanzi",this.study_field_question_text_traditional="Hanzi",this.study_invalid_card_id_error="Dirección inválida de carta ",this.study_invalid_question_id_error="ID de pregunta inválido: ",this.study_no_cards_questions_use_wizard_error="No hay preguntas o flashcards para estudiar ¡Por favor use el Comienzo Rápido,el Asistente o Importar!",this.study_practice_short_text="Pract.",this.study_practice_text="Práctica",this.study_search_no_results="Sin resultados",this.study_search_result_label="Resultados",this.study_sentence_label="Oraciones",this.study_show_answer_label="Mostrar Respuesta",this.study_study_text="Estudiar",this.wizard_added_lesson_message="Lección agregada.",this.wizard_added_question_message="Pregunta agregada.",this.wizard_algorithm_name_advanced="Avanzado",this.wizard_algorithm_name_beginner="Principiante",this.wizard_algorithm_name_intermediate="Intermediario",this.wizard_algorithm_name_random="Aleatorio",this.wizard_algorithm_name_randomreview="Revisar aleatoreamente",this.wizard_algorithm_name_review="Revisar",this.wizard_both_characters_label="Ambas",this.wizard_calligraphy_label="Caligrafía",this.wizard_created_algorithm_message="Algoritmo creado",this.wizard_created_flashcards_format="{0} flashcards creadas.",this.wizard_created_lesson_name="Asistente Creado",this.wizard_cursive_label="Cursiva",this.wizard_definition_label="Definición",this.wizard_done_label="¡Hecho!",this.wizard_found_lesson_message="Lección encontrada.",this.wizard_found_question_message="Pregunta encontrada.",this.wizard_merged_flashcards_format="{0} flashcards combinadas.",this.wizard_next_label="Próximo",this.wizard_pinyin_label="Pinyin",this.wizard_reading_label="Lectura Hanzi",this.wizard_select_one_vocab_error="¡Por favor elige al menos una lista de vocabulario!",this.wizard_select_something_learn_error="¡Por favor elige algo para aprender!",this.wizard_sentences_label="Oraciones",this.wizard_simplified_characters_label="Simplificado",this.wizard_traditional_characters_label="Tradicional",this.wizard_what_is_level_label="¿Cuál es tu nivel para este vocabulario?",this.wizard_what_want_learn_label="¿Qué quisieras aprender?",this.wizard_which_characters_label="¿Qué carácteres quisieras aprender?",this.wizard_which_vocab_label="¿Cuál lista o listas de vocabulario quisieras aprender?",this.wizard_writing_label="Escritura Hanzi",this.card_add_text="Agregar Carta",this.card_delete_selected_confirm="¿Deseas borrar cartas selecionadas?",this.card_deleted_format="{0} flashcards borradas.",this.card_duplicate_selected_confirm="¿Deseas duplicar cartas selecionadas?",this.card_duplicated_format="{0} flashcards duplicadas.",this.card_enabled_label="Habilitado",this.card_historical_bronze_label="Bronce",this.card_historical_forms_label="Formas Históricas",this.card_historical_greatseal_label="Gran Seal",this.card_historical_oracle_label="Oráculo",this.card_historical_smallseal_label="Pequeño Seal",this.card_if_queued_must_be_enabled_error="Si una carta está enlistada ¡también tiene que estar habilitada!",this.card_must_have_at_least_simp_trad_error="Debes tener al menos un carácter simplificado o tradicional!",this.card_must_have_definition_error="¡Debes tener una definición!",this.card_queued_label="Enlistada",this.card_related_flashcards_label="Flashcards Relacionadas",this.card_remove_selected_confirm="¿Deseas remover las flashcards seleccionadas de esta categoría?",this.card_removed_format="{0} flashcards borradas.",this.card_saved_message="Carta Guardada.",this.card_stroke_order_label="Orden de Trazos",this.category_all_name="Todos",this.category_uncategorised_name="Descategorizado",this.category_delete_selected_confirm="¿Deseas borrar las categorías selecionadas?",this.category_deleted_format="{0} categorías borradas",this.category_duplicate_sel_confirm="¿Deseas duplicar las categorías seleccionadas?",this.category_duplicated_format="{0} categories duplicadas",this.category_edit_name="Editar Nombre",this.category_must_enter_name_error="¡Debes ingresar un nombre de categoría!",this.category_name_exists_error="¡El nombre de esa categoría ya existe!",this.category_name_label="Nombre de la Categoría",this.category_new_name="Nueva Categoría",this.category_saved_format="{0} categorías guardadas",this.settings_auto_advance_label="Auto Avance",this.settings_auto_queue_label="Auto-enlistar Nuevas Flashcard",this.settings_background_colour_label="Color de Fondo",this.settings_background_guides_label="Guías de Fondo",this.settings_border_colour_label="Color del Margen ",this.settings_brush_colour_label="Color del Pincel",this.settings_brush_width_label="Anchura del Pincel",this.settings_each_enabled_rating_must_have_val_error="Cada uno de los  botones de clasificación habilitados deben tener una valoración",this.settings_enable_tone_colours_label="Color de Tonos Habilitados",this.settings_general_label="Configuraciones Generales",this.settings_grid_colour_label="Paleta de Colores",this.settings_guide_star_label="米 Estrella",this.settings_guide_grid_label="井 Cuadrícula",this.settings_guide_cross_label="十 Cruz",this.settings_guide_bar_label="丨 Barra",this.settings_guide_none_label="Sin Guías",this.settings_hanzi_input_label="Entrada del Dibujo Hanzi",this.settings_must_enable_two_buttons_error="Debes  habilitar al menos dos de los botones de clasificación",this.settings_preferred_script_label="Secuencia de Comando Preferido",this.settings_rating_enabled_label="Habilitado",this.settings_ratings_label="Calificaciones",this.settings_response_1_default="No tengo idea",this.settings_response_2_default="Incorrecto",this.settings_response_3_default="Más o Menos",this.settings_response_4_default="Correcto",this.settings_response_5_default="Fácil",this.settings_saved_message="Configuraciónes Guardadas.",this.settings_simp_trad_label="Simplificado [Tradicional]",this.settings_simplified_label="Solo Simplificado",this.settings_tone_1_label="Tono 1",this.settings_tone_2_label="Tono 2",this.settings_tone_3_label="Tono 3",this.settings_tone_4_label="Tono 4",this.settings_tone_5_label="Tono 5",this.settings_tone_colours_label="Colores de los tonos de Pinyin",this.settings_tone_marks_label="Marcas de los tonos de Pinyin",this.settings_trad_simp_label="Traditional [Simplificado]",this.settings_traditional_label="Solo Tradicional",this.maintenance_app_cache_label="Caché de la Aplicación",this.maintenance_erase_label="Borrar",this.maintenance_erase_local_label="Borrar datos locales",this.maintenance_installed_label="Instalado",this.maintenance_rebuild_label="Reconstruido",this.maintenance_rebuild_local_label="Reconstruir el Almacenamiento Local",this.maintenance_refresh_label="Actualizar",this.maintenance_reload_label="Recargar",this.maintenance_reload_local_label="Recargar el Almacenamiento Local",this.maintenance_stand_alone_label="Autónomo",this.maintenance_storage_used_format=" {0} Carácteres del Almacenamiento Local en uso",this.maintenance_system_language_label="Lenguajedel Sistema",this.maintenance_update_label="Actualizar",this.import_algorithms_label="Algoritmos",this.import_chineasy_label="Chineasy",this.import_default_category_label="Default Category",this.import_downloading_file_message="Descargando el archivo importador, por favor aguarde...",this.import_flashcards_label="Flashcards",this.import_generic_error="Import error",this.import_lessons_label="Lecciones",this.import_parsing_data_message="Analizando datos de importación...",this.import_paste_text_label="Pega el texto o link (http://...) aquí",this.import_pleco_text_file_label="Archivo de texto Pleco",this.import_pleco_xml_file_label="Archivo XML Pleco",this.import_progress_label="Progreso",this.import_section_other="Otro",this.import_section_quick="Rápido",this.import_section_shanka="Shanka",this.import_settings_label="Configuraciones",this.import_skritter_simp_label="Skritter (Simplificado)",this.import_skritter_trad_label="Skritter (Tradicional)",this.import_stickystudy_label="StickyStudy",this.import_timed_out_error="Importar tiempo agotado!",this.export_beginning_message="Comenzando Exportación...",this.export_categories_label="Categorías para Exportar",this.export_do_export_label="Exportar",this.export_download_filename="ShankaExport.txt",this.export_download_filetext="Descargar Archivo",this.export_export_format_label="Formato de Exportación",this.export_other_label="Otro",this.export_success_message="Toda la información exportada!",this.question_answer_label="Respuesta",this.question_auto_generate_label="Autogenerar",this.question_calligraphy_label="Caligrafía",this.question_components_label="Componentes de las Preguntas",this.question_cursive_label="Cursiva",this.question_definition_label="Definición",this.question_delete_selected_confirm="¿Desea borrar las preguntas seleccionadas?",this.question_deleted_format="{0} preguntas borradas",this.question_display_label="Display",this.question_duplicate_sel_confirm="¿Duplicar preguntas seleccionadas?",this.question_duplicated_format="{0}Preguntas duplicadas",this.question_hanzi_touch_label="Touchpad Hanzi",this.question_inputs_label="Entradas",this.question_name_label="Nombre de la pregunta",this.question_name_text_error="¡Tu pregunta debe tener un nombre y algo de texto!",this.question_new_name="Pregunta Nueva",this.question_notes_label="Notas",this.question_pinyin_label="Pinyin",this.question_saved_format="'{0}' preguntas agregadas",this.question_simplified_label="Hanzi Simplificado",this.question_stem_answer_error="¡Tu pregunta debe tener al menos texto y una respuesta!",this.question_stem_label="Tema",this.question_text_edit_label="Campo de Edición de Texto",this.question_text_label="Texto de la Pregunta",this.question_traditional_label="Hanzi Tradicional",this.question_whats_the_format="Qué es {0}?",this.question_and_separator="y",this.lesson_delete_selected_confirm="¿Deseas borrar lecciones seleccionadas?",this.lesson_deleted_format="{0} lecciones seleccionadas",this.lesson_duplicate_selected_confirm="¿Desea duplicar lecciones seleccionadas?",this.lesson_duplicated_format="{0} lecciones duplicadas",this.lesson_must_include_1_cat_error="¡Debes incluir al menos una categoría!",this.lesson_must_include_1_quest_error="¡Debes incluir al menos una pregunta!",this.lesson_name_already_exist_error="¡El nombre de esa lección ya existe!",this.lesson_name_cant_be_empty_error="¡El nombre de la lección está vacío!",this.lesson_name_label="Nombre de la Lección",this.lesson_new_name="Nueva Lección",this.lesson_review_mode_name="(Reveer)",this.lesson_reviewing_label="Reviendo",this.lesson_saved_format="'{0}'lecciones guardadas",this.algorithm_adjustment_speed_positive_error="¡La Velocidad del Ajuste debe ser positiva!",this.algorithm_any_element_probability_0_1_error="¡Cualquier Elemento de Probabilidad debe estar entre 0 y 1!",this.algorithm_cannot_delete_last_error="¿No puedes borrar el último algoritmo?",this.algorithm_daily_correct_target_positive_int_error="¡El Objetivo Diario Correcto debe ser un entero positivo!",this.algorithm_daily_minutes_target_positive_int_error="¡El Objetivo de Minutos Diarios debe ser un entero positivo!",this.algorithm_daily_new_target_positive_int_error="¡El Nuevo Objetivo Diario debe ser un número positivo entero!",this.algorithm_default_knowledge_rate_0_1_error="¡El Error de la Calificación de Conocimiento  debe estar entre 0 y 1!",this.algorithm_delete_selected_confirm="¿Deseas borrar los algoritmos seleccionados?",this.algorithm_duplicate_selected_confirm="¿Duplicar algoritmos seleccionados?",this.algorithm_first_element_probability_0_1_error="El primer elemento debe estar entre 0 y 1!",this.algorithm_minimum_interval_postive_0_error="El intervalo mínimo debe ser positivo o cero!",this.algorithm_minimum_unknown_card_positive_int_error="El Mínimo de Cartas Desconocidas debe ser un entero positivo!",this.algorithm_name_cant_be_empty_error="¡El Nombre del Argoritmo no puede estar vacío!",this.algorithm_threshold_knowledge_rate_0_1_error="¡El rango en el cual una carta es considerada aprendida debe estar entre 0 y 1!",this.algorithm_adjustment_speed="Ajuste de Velocidad",this.algorithm_any_element_probability="Ningún Elemento de Probabilidad",this.algorithm_choose_label="Elige un algoritmo",this.algorithm_current_label="En uso",this.algorithm_daily_correct_target="Objetivo Diario Correcto",this.algorithm_daily_minutes_target="Objetivo de Minutos Diaros",this.algorithm_daily_new_target="Nuevo Objetivo Diario",this.algorithm_default_knowledge_rate="Tasa de Incumplimiento del Conocimiento.",this.algorithm_deleted_format="{0} algoritmos borrados",this.algorithm_duplicated_format="{0} algoritmos duplicados",this.algorithm_first_element_prob="Probabilidad del Primer Elemento",this.algorithm_history_today="hoy",this.algorithm_history_yesterday="ayer",this.algorithm_knowledge_rate_display="Clasificación de Conocimiento",this.algorithm_knowledge_rate_trouble="Con Problemas",this.algorithm_knowledge_rate_learned="Aprendido",this.algorithm_knowledge_rate_learning="Aprendiendo",this.algorithm_minimum_interval="Intervalo Mínimo",this.algorithm_minimum_unknown_cards="Mínimo Cartas Desconocidad",this.algorithm_name_label="Nombre",this.algorithm_new_name="Algoritmo Nuevo",this.algorithm_parameters="Parámetros",this.algorithm_saved_format="'{0}' algoritmos guardados",this.algorithm_study_settings="Configuración de Estudio",this.algorithm_threshold_kn_rate="Rango de Flashcard aprendida",this.local_storage_cannot_save_ios="Deshabilitado para guardar en el almacenamiento local. Quizá tu almacenamiento locar ha sido excedido, o estás navegando en Modo Privado.",this.local_storage_cannot_save_other="Deshabilitado pata guargar en almacenamiento local, tu capacidad de almacenamiento ha sido excedida.",this.local_storage_erase_confirm="Deseas borrar los datos de almacenamiento local?",this.local_storage_erased_message="Los Datos de Almacenamiento Local fueron bombardeados!",this.local_storage_rebuild_confirm="¿Deseas Reconstruir el Almacenamiento Local?",this.local_storage_rebuilt_ok_message="¡El almacenamienot local ha sido reconstruido, ningún error ha sido encontrado!",this.local_storage_errors_detected_resolved_error="Errores del almacenamieto local de datos fueron detectados y resueltos.\n\nQuizá has estado perdiendo o desconectando lecciones, preguntas, categorías o flashcards.\n\nInformación más detallada está disponible en la consola Java.",this.help_contents_label="Contenidos de Asistencia al Usuario",this.help_main_page="<h3>Antes de que Comiences</h3><p>Primero deberías agregar la página principal (página de bienvenida) de esta aplicación a la pantalla de inicio de tu dispositivo.</p><p>Eso te permitirá  usar la aplicación  cuando estés desconectado, y también te pondrá la pantalla completa para darte más espacio.</p><p>En iOS esto significa cliquear el Ícono en el medio del botón de la pantalla, este luce como una caja con una flecha señalando, y seleccionando 'Adicionar a Inicio de Pantalla'.</p><p>Funcionalidad similar está disponible en todos los buscadores modernos en  Windows, Android, Mac OS, Windows Mobile,y Blackberry.</p>",this.help_lessons="<h3>Lecciones Seleccionadas</h3><p>Cuando estudies, solo van a ser utilizadas preguntas y categorías de lecciones que estén controladas .</p>",this.help_card_info="<h3>Categorías</h3><p>Listas de Categorías,si hay alguna,a la cual la carta actual sea asignada.</p><h3>Flashcards Relacionadas</h3><p>Mostrar todas las Flashcards que compartan  carácteres en común  con la flashcard en uso.</p><h3>Orden de Trazos</h3><p>Algunos (no todos) los carácteres tienen diagramas de orden de trazos provistos por The Wikimedia Foundation.</p><h3>Formas Históricas</h3><p>La Fundación WIkipedia ha coleccionado formas de carácteres representativos para muchos carácteres. Estos pueden ayudarte a entender la forma de algunos pictogramas.</p>",this.help_practice="<h3>Relájate!</h3><p>La página de práctica te permite  sentarte y practicar cualquier carácter que desees.</p><p>Ingresa los carácteres que quieras estudiar en la próxima caja.</p><p>Todas las otras funcionalidades de los dibujos de los carácteres de la página de estudio están disponible.</p><h3>Buscar</h3><p>Puedes buscar a través de texto en hanzi o pinyin  de todas las flashcards cliqueando sobre la lupa. El buscador va a buscar el carácter en la caja de texto y se desplegará una lista de resultados o irá a la carta si hay solo un resultado.</p>",this.help_study="<p>Esta es la página de la aplicación donde vas a pasar la mayoría del tiempo, poniéndote a prueba en las flashcards.</p><h3>Tema</h3><p>El tema de la pregunta es la información que se te va a dar .</p><h3>Respuesta</h3><p>La respuesta es la información que administrarás. Escribe o dibuja la respuesta apropiada y luego haz click sobre 'Mostrar Respuesta' para ver si es correcta.</p><h3>Ingreso de texto en Hanzi</h3><p>Si un controlador de entrada  hanzi está siendo mostrado por la pregunta actual, podrías dibujar tantos carácteres como quieras dibujar como respuesta y repetir cada uno muchas veces para practicar si es que así lo deseas. Haz click en el botón 下 y te moverás a la próxima mini-grilla o agregará una nueva si estás viendo la última mini-grilla.También puedes hacer click sobre las grillas y seleccionarlas. Los demás controles te permiten  elegir el color del lapiz, muestra/oculta el carácter en modo marca de agua en uso, deshacer/rehacer tu dibujo, y limpiar la grilla actual.</p><h3>Visualización</h3><p>Información extra como notas en las que no has sido clasificado pueden ser visualizadas al lado de la respuesta también.</p><h3>Calificador</h3><p>Califícate a tí mismo en cada aspecto de la respuesta, para  determinar cuándo serás examinado en la flashcard actual. Puedes calificar vários items a la vez arrastrando y deslizandolos.</p>",this.help_categories="<p>Las categorías son usualmente llamadas listas de palabras en otros sistemas. Ellas ayudan a organizar tus flashcards y le dirán a la apliación cuál flashcadr deseas estudiar.</p><p>Una flashcard que existe en múltiples categorías o en ninguna en caso de que esté 'descategorizada'.</p>",this.help_progress="<p>La página de progreso te muestra cuántas palabras fueron contadas como aprendidas,cuánto tiempo y cuántas flashcards has estudiado, cada día en el que has usado la aplicación.</p>",this.help_history="<p>La página del historial muestra todas las flashcrs que has estudiado y en el order en que las has estudiado. Cada flashcard aparecerá en la lista solo una vez.</p>",this.help_import="<p>Con esta página  puedes importar datos de las listas construidas o de cualquier otro sistema de flshcards .</p>",this.help_export='Ayuda de Exportación<p>Exportar te permite hacer copias de seguridad de tus datos.También puedes exportarlo a otro dispositivo o a otro sistema de flashcards.</p><h3>Resultado de Exportación</h3><p>Copia el texto al editor de teco y pégalo en otra aplicación. Alternativamente, haz click en botón de "Download file".</p>',this.help_settings="<p>Las configuraciones de pantalla te permiten mejorar la aplicación.</p><h3>Configuraciones Generales</h3><p>Si el auto-avance está encendido, la próxima flashcard va a ser mostrada tan pronto como hayas calificado una flashcard cuando estés estudiando.</p><h3>Ingreso del Dibujo Hanzi</h3><p>Estas configuraciones controlan el aspecto del control de dibujo Hanzi en el modo de estudio y práctica.</p><h3>Guías de Fondo</h3><p>La forma del fondo de la grilla de dibujo Hanzi puede ser configurada aquí.</p><h3>Color de los tonos Pinyin</h3><p>Si está habilitado,este controlará los colores mostrados para cada sílaba de los tonos.</p><h3>Escritura Preferente</h3><p>Puedes decidir si deseas ver Hanzi, Simplificado o Tradicional , como así también una combinación de ambos.</p><h3>Calificaciones</h3><p>Elige los nombres de las calificaciones que deseas ver en la página de estudio,y deshabilita cualquiera que no desees utilizar deseleccionándolas.</p>",this.help_queue="<p>La lista muestra todas la palabras que estás actualmente estudiando y te permite saber qué tan bien las conoces.La palabras están en orden aproximado en la forma que serán aprendidas,aunque el orden sea casual así no se hace predecible.</p>",this.help_algorithms="<h3>Algoritmo de Shanka</h3><p>Este algoritmo  controla el orden de las flashcards en el cual son mostradas,y cómo muchas flashcards nuevas serán adicionadas cuando hayas aprendido las previas.</p><h3>Configuraciones de Estudio</h3><p><li><b> Mínimo de Flashcards Desconocidas</b> - Cuando el número de Flascards desconocidas caiga por debajo de este nivel,nuevas flashcards serán adicionadas a la lista.</p><p><li><b>Objetivo Diario Correcto</b> - Proponte un mínimo de número de preguntas a responder cada día .</p><p><li><b>Nuevo Obejtivo Diario</b> - Proponte un mínimo número de nuevas flashcards para adicionar cada día .</p><p><li><b>Objetivo de Minutos Diarios</b> - Proponte un mínimo de tiempo diario para estudiar en minutos.</p><h3>Parámetros</h3><p><li><b>Tasa de Incumplimiento del Conocimiento.</b> - La calificación del conocimiento <i><b>kn_rate</b></i> es qué tan bien tú conoces la información en una flashcard.Cero es nada y uno es conocimiento perfecto de la flashcard.</p><p><li><b>Umbral del Conocimiento </b> - La calificación del conocimiento en la cual la información en una carta será contada como 'aprendida'.</p><p><li><b>Ajuste dela Velocidad</b> - Qué tan rápido la calificación del conocimiento  para cada información en una flashcard será cambiada a cero/uni cuando respondas las preguntas bien/mal. Si este ajuste de velocidad será <i><b>a</b></i>, cuando una pregunta sea reopondida incorrectamente,<i><b>kn_rate<sub>new</sub> = kn_rate<sub>old</sub> / a</b></i>. Cuando la pregunta sea respondida correctamente, <i><b>kn_rate<sub>new</sub> = 1 + (kn_rate<sub>old</sub> - 1) / a</b></i>. Si las cinco opciones de  respuesta están enumeradas de 1 al 5, luego la respuesta  3 no cambiará  la calificación del conocimiento, las respuestas 2 y 4 son correctas o incorrectas, y las respuestas 1 y 5 como dos incorrectas o correcctas respectivamente.</p><p><li><b>Cualquier Elemento de Prbabilidad</b> - La probabilidad de que la próxima flashcard  sea dibujada casualmente de cualquier lugar de la lista , en vez del frente de la lista. Esta configuración te permite que flashcards sea ocacionalmente esparcidas en el estudio.Si no deseas que esto suceda, define su valor como cero.</p><p><li><b>Primer Elemento de Probabilidad</b> - Si esta probabilidad es <i><b>p</b></i>, y la primera flashcard en la lista es número<i><b>0</b></i>, luego la flashcard <i><b>n</b></i> será seleccionada como la flashcard a estudias con probabilidad <i><b>p &times; (1-p)<sup>n</sup></b></i>. Como la suma de todas las flashcards en la lista serán apenas menores a uno, el resto de probabilidad se le será asignada al primer elemento .</p><p><li><b>Intervalo Mínimo</b> - El intervalo mínimo de número de flashacrs debe ser mostrado antes de que una flashcard se repita, incluso si  esta sea simepre definida como desconocida.</p>",this.help_questions="<h3>Nombre de la Pregunta</h3> <p> Es solo usada para indentificar  la pregunta en la lista de preguntas.</p> <h3>Texto de la Pregunta</h3> <p>La pregunta que aparece en la cima de la flashcard sobre el tem principal de la pregunta ,por ejemplo. \"Cuál es el pinyin de este carácter?\"</p> <p>Leave the auto-generate checkbox clicked if you want to have the app create this text based on the selected inputs, stem and answer.</p> <h3>Entradas</h3> <p>Estas entradas  son visualizadas a lo largo de la pregunta. Si escribes 'These inputs are displayed alongside the question stem. If you type' chino en la caja de edición, podrás usar o tu dispositivo IMC para escribir en pinyin o escribiendo a mano.</p> <h3>Stem</h3> <p>El frente de la flashcard para esa pregunta.</p> <h3>Respuesta</h3> <p> Es la parte 'trasera' de la flashcard sobre la cual eres calificado.</p> <h3>Visualización</h3> <p>Más información en la parte trasera de la flashcard que es mostrada junto a la respuesta .</p>",this.help_maintenance="<h3>Recargar</h3><p>Recargando la applicación se reiniciará,usando la información en el almacenamiento local. Quizá esto te ayude si alguna vez tienes problemas o si accientalmente ejecutas varias instancies de la aplicación.</p><h3>Autonomidad</h3><p>Esta información es usada para ayudar a identificar problemas con la aplicación.Este debería ser verdadero si estás ejecutando la aplicación en  el modo 'pantalla de inicio' o 'autónomo', y falso si estás usando el buscador.</p><h3>Lenguage del Sistema</h3><p>Este es el código de lenguaje reportado por tu sistema.</p><h3>Caché de la Aplicación</h3><p> Esta aplicación web siempre guarda información sobre las flashcards,etc en el almacenamiento local.El caché de la  aplicación  está separado de este,ydescarga las páginas de la aplicación real de modo que  puedas acceder a ellos cuando estés desconectado.Si el estado de la aplicación esNO EN CHACHÉ entonces no deberías accder a la aplicación cuando estés desconectado.Para asegurarte de estar en uso desconectado deberías ponerel estatus de la aplicación EN CACHÉ .</p><h3>Actualizar la Aplicación Web</h3><p>Para instalar  la última versión de la aplicación, haz click en 'Actualizad la Aplicación Web' si notas que la última versión  es diferente a la versión ya instalada.No deberías necesitas utilizar esta funcionalidad si descargas una cuando se te solicite actualizar una vez iniciada la aplicación</p><h3>Almacenamiento Local</h3><p>Ve a  <a href='http://dev-test.nemikor.com/web-storage/support-test/'>this page</a> para calcular tu límite de almacenamiento local , que usualmente es de al menos  2.5M de carácteres dependiendo de tu buscador. Nota: 1k=2<sup>10</sup>=1024 carácteres, 1M=2<sup>20</sup> carácteres. Usualmente  1 carácter = 2 bytes, entonces 2.5M carácteres = 5MB de espacio de almacenamiento.</p><h3>Borrar Almacenamiento Local</h3><p> Si tienes problemas podrías intentar limpiar tus datos de almacenamiento local.Si deseas mantener tu  historial actual primero deberías exportar una copia de seguridad de tus datos.</p>",this.help_wizard="<p>Usa este asistente para simplificar la creación de lecciones.</p><p>Puedes utilizar la asistencia más de una vez para crear múltiples lecciones, y luego elegir cuál estudiar de la pantalla de lecciones.</p>",this.help_about="<h3>Licencia</h3><p>Eres libre para copiar,distribuir y modificar este código bajo licencia similar a esta. Debes darle el crédito al autor origial (yo) en cualquier trabajo derivado. No debes usar ninguna parte de este código  con propósitos comerciales sin haber obtenido mi permiso.</p><p>Alan Davies 2014 alan@hskhsk.com/p><p>Ve a  http://hskhsk.com/shanka para más información.</p><h3>Creditos</h3>Estructura inicial inspirada por Steven de Salas http://html5db.desalasworks.com/<br />String compression routines by Pieroxy http://pieroxy.net/blog/pages/lz-string/index.html<br />Control de pantalla táctil es una versión intensamente modificada  de la versión hecha por Greg Murray http://gregmurray.org/ipad/touchpaint/<br />La Grila de Colores es de  Jan Odvárko's jscolor http://jscolor.com/<br />Algunas partes del algoritmo de Shanka fueron inspirados por  Adam Nagy de Cybertron BT's defunct product Memodrops http://memodrops.com/algorithm.html ( esta pa´gina no existe actualmente pero está archivada en http://archive.org<br />Muchos problemas fueron resueltos con la ayuda de los comentarios y soluciones en Stack Overflow http://stackoverflow.com/<br />Muchas gracias a Chinese Forums, Pleco, y la comunidad de usuarios Skritter , como así también a los testeadores beta que participaron.<br />¡Gracias también a los traductores que internacionalizaron esta aplicación!",this.main_cards_learned_label="aprendido",this.main_cards_total_label="total",this.progress_studied_label="estudió",this.progress_total_label="Total",this.progress_daily_label="Diario",this.progress_today_label="Hoy",this.progress_seconds="segundos",this.progress_minutes="minutos",this.progress_hours="horas",this.progress_days="dias",this.progress_weeks="semanas",this.progress_years="año",this.progress_list_format="Estudió {0}, y se enteró de {1} tarjetas, en {2}",this.language_unknown_error="Código de idioma Desconocido:",this.import_hsk1_label="Palabras HSK 1",this.import_hsk2_label="Palabras HSK 2 (Inglés)",this.import_hsk3_label="Palabras HSK 3 (Inglés)",this.import_hsk4_label="Palabras HSK 4 (Inglés)",this.import_hsk5_label="Palabras HSK 5 (Inglés)",this.import_hsk6_label="Palabras HSK 6 (Inglés)",this.import_hsk1_sentences_label="Frases HSK 1 (Inglés)",this.import_hsk2_sentences_label="Frases HSK 2 (Inglés)",this.import_hsk3_sentences_label="Frases HSK 3 (Inglés)",this.import_chineasy_label="Chineasy",this.import_hsk1_category="HSK 1",this.import_hsk2_category="HSK 2",this.import_hsk3_category="HSK 3",this.import_hsk4_category="HSK 4",this.import_hsk5_category="HSK 5",this.import_hsk6_category="HSK 6",this.import_hsk1_sentences_category="HSK 1 句子",this.import_hsk2_sentences_category="HSK 2 句子",this.import_hsk3_sentences_category="HSK 3 句子",this.import_chineasy_category="Chineasy",this.import_hsk1_location="lists/HSK 2012 L1 es.txt",this.import_hsk2_location="lists/HSK 2012 L2.txt",this.import_hsk3_location="lists/HSK 2012 L3.txt",this.import_hsk4_location="lists/HSK 2012 L4.txt",this.import_hsk5_location="lists/HSK 2012 L5.txt",this.import_hsk6_location="lists/HSK 2012 L6.txt",this.import_hsk1_sentences_location="lists/HSK 2012 Examples L1.txt",this.import_hsk2_sentences_location="lists/HSK 2012 Examples L2.txt",this.import_hsk3_sentences_location="lists/HSK 2012 Examples L3.txt",this.import_chineasy_location="lists/Chineasy es.txt"
},supportedLanguages={en:new P,nl:new C,es:new z},STR=new D;(function(a,e){"use strict";var t=t||function(o){var i={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},t={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},r={},n={hasTouch:null===e.ontouchstart,eventType:function(e){var t={down:n.hasTouch?"touchstart":"mousedown",move:n.hasTouch?"touchmove":"mousemove",up:n.hasTouch?"touchend":"mouseup",out:n.hasTouch?"touchcancel":"mouseout"};return t[e]},page:function(t,e){return n.hasTouch&&e.touches.length&&e.touches[0]?e.touches[0]["page"+t]:e["page"+t]},klass:{has:function(e,t){return-1!==e.className.indexOf(t)},add:function(e,t){!n.klass.has(e,t)&&i.addBodyClasses&&(e.className+=" "+t)},remove:function(e,t){i.addBodyClasses&&(e.className=e.className.replace(" "+t,""))}},dispatchEvent:function(e){return"function"==typeof r[e]?r[e].call():void 0},vendor:function(){var t,i=e.createElement("div"),a="webkit Moz O ms".split(" ");for(t in a)if(void 0!==i.style[a[t]+"Transition"])return a[t]},transitionCallback:function(){return"Moz"===t.vendor||"ms"===t.vendor?"transitionend":t.vendor+"TransitionEnd"},canTransform:function(){return void 0!==i.element.style[t.vendor+"Transform"]},deepExtend:function(a,t){var e;for(e in t)t[e]&&t[e].constructor&&t[e].constructor===Object?(a[e]=a[e]||{},n.deepExtend(a[e],t[e])):a[e]=t[e];return a},angleOfDrag:function(i,n){var e,a;return a=Math.atan2(-(t.startDragY-n),t.startDragX-i),0>a&&(a+=2*Math.PI),e=Math.floor(a*(180/Math.PI)-180),0>e&&e>-180&&(e=360-Math.abs(e)),Math.abs(e)},events:{addEvent:function(e,t,a){return e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):void 0},removeEvent:function(e,t,a){return e.addEventListener?e.removeEventListener(t,a,!1):e.attachEvent?e.detachEvent("on"+t,a):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},parentUntil:function(e,t){for(var a="string"==typeof t;e.parentNode;){if(a&&e.getAttribute&&e.getAttribute(t))return e;if(!a&&e===t)return e;e=e.parentNode}return null}},s={translate:{get:{matrix:function(s){if(n.canTransform()){var e=a.getComputedStyle(i.element)[t.vendor+"Transform"].match(/\((.*)\)/),r=8;return e?(e=e[1].split(","),16===e.length&&(s+=r),parseInt(e[s],10)):0}return parseInt(i.element.style.left,10)}},easeCallback:function(){i.element.style[t.vendor+"Transition"]="",t.translation=s.translate.get.matrix(4),t.easing=!1,clearInterval(t.animatingInterval),0===t.easingTo&&(n.klass.remove(e.body,"snapjs-right"),n.klass.remove(e.body,"snapjs-left")),n.dispatchEvent("animated"),n.events.removeEvent(i.element,n.transitionCallback(),s.translate.easeCallback)},easeTo:function(e){n.canTransform()?(t.easing=!0,t.easingTo=e,i.element.style[t.vendor+"Transition"]="all "+i.transitionSpeed+"s "+i.easing,t.animatingInterval=setInterval(function(){n.dispatchEvent("animating")},1),n.events.addEvent(i.element,n.transitionCallback(),s.translate.easeCallback),s.translate.x(e)):(t.translation=e,s.translate.x(e)),0===e&&(i.element.style[t.vendor+"Transform"]="")},x:function(s){if(!("left"===i.disable&&s>0||"right"===i.disable&&0>s))if(i.hyperextensible||(s===i.maxPosition||s>i.maxPosition?s=i.maxPosition:(s===i.minPosition||s<i.minPosition)&&(s=i.minPosition)),s=parseInt(s,10),isNaN(s)&&(s=0),n.canTransform()){var r="translate3d("+s+"px, 0,0)";i.element.style[t.vendor+"Transform"]=r}else i.element.style.width=(a.innerWidth||e.documentElement.clientWidth)+"px",i.element.style.left=s+"px",i.element.style.right=""}},drag:{listen:function(){t.translation=0,t.easing=!1,n.events.addEvent(i.element,n.eventType("down"),s.drag.startDrag),n.events.addEvent(i.element,n.eventType("move"),s.drag.dragging),n.events.addEvent(i.element,n.eventType("up"),s.drag.endDrag)},stopListening:function(){n.events.removeEvent(i.element,n.eventType("down"),s.drag.startDrag),n.events.removeEvent(i.element,n.eventType("move"),s.drag.dragging),n.events.removeEvent(i.element,n.eventType("up"),s.drag.endDrag)},startDrag:function(e){var a=e.target?e.target:e.srcElement,s=n.parentUntil(a,"data-snap-ignore");if(s)return void n.dispatchEvent("ignore");if(i.dragger){var r=n.parentUntil(a,i.dragger);if(!r&&t.translation!==i.minPosition&&t.translation!==i.maxPosition)return}n.dispatchEvent("start"),i.element.style[t.vendor+"Transition"]="",t.isDragging=!0,t.hasIntent=null,t.intentChecked=!1,t.startDragX=n.page("X",e),t.startDragY=n.page("Y",e),t.dragWatchers={current:0,last:0,hold:0,state:""},t.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(c){if(t.isDragging&&i.touchToDrag){var d,r=n.page("X",c),_=n.page("Y",c),g=t.translation,a=s.translate.get.matrix(4),l=r-t.startDragX,h=a>0,u=l;if(t.intentChecked&&!t.hasIntent)return;if(i.addBodyClasses&&(a>0?(n.klass.add(e.body,"snapjs-left"),n.klass.remove(e.body,"snapjs-right")):0>a&&(n.klass.add(e.body,"snapjs-right"),n.klass.remove(e.body,"snapjs-left"))),t.hasIntent===!1||null===t.hasIntent){var o=n.angleOfDrag(r,_),m=o>=0&&o<=i.slideIntent||360>=o&&o>360-i.slideIntent,p=o>=180&&o<=180+i.slideIntent||180>=o&&o>=180-i.slideIntent;t.hasIntent=p||m?!0:!1,t.intentChecked=!0}if(i.minDragDistance>=Math.abs(r-t.startDragX)&&t.hasIntent===!1)return;n.events.prevent(c),n.dispatchEvent("drag"),t.dragWatchers.current=r,t.dragWatchers.last>r?("left"!==t.dragWatchers.state&&(t.dragWatchers.state="left",t.dragWatchers.hold=r),t.dragWatchers.last=r):t.dragWatchers.last<r&&("right"!==t.dragWatchers.state&&(t.dragWatchers.state="right",t.dragWatchers.hold=r),t.dragWatchers.last=r),h?(i.maxPosition<a&&(d=(a-i.maxPosition)*i.resistance,u=l-d),t.simpleStates={opening:"left",towards:t.dragWatchers.state,hyperExtending:i.maxPosition<a,halfway:a>i.maxPosition/2,flick:Math.abs(t.dragWatchers.current-t.dragWatchers.hold)>i.flickThreshold,translation:{absolute:a,relative:l,sinceDirectionChange:t.dragWatchers.current-t.dragWatchers.hold,percentage:a/i.maxPosition*100}}):(i.minPosition>a&&(d=(a-i.minPosition)*i.resistance,u=l-d),t.simpleStates={opening:"right",towards:t.dragWatchers.state,hyperExtending:i.minPosition>a,halfway:a<i.minPosition/2,flick:Math.abs(t.dragWatchers.current-t.dragWatchers.hold)>i.flickThreshold,translation:{absolute:a,relative:l,sinceDirectionChange:t.dragWatchers.current-t.dragWatchers.hold,percentage:a/i.minPosition*100}}),s.translate.x(u+g)}},endDrag:function(e){if(t.isDragging){n.dispatchEvent("end");var a=s.translate.get.matrix(4);if(0===t.dragWatchers.current&&0!==a&&i.tapToClose)return n.events.prevent(e),s.translate.easeTo(0),t.isDragging=!1,void(t.startDragX=0);"left"===t.simpleStates.opening?t.simpleStates.halfway||t.simpleStates.hyperExtending||t.simpleStates.flick?t.simpleStates.flick&&"left"===t.simpleStates.towards?s.translate.easeTo(0):(t.simpleStates.flick&&"right"===t.simpleStates.towards||t.simpleStates.halfway||t.simpleStates.hyperExtending)&&s.translate.easeTo(i.maxPosition):s.translate.easeTo(0):"right"===t.simpleStates.opening&&(t.simpleStates.halfway||t.simpleStates.hyperExtending||t.simpleStates.flick?t.simpleStates.flick&&"right"===t.simpleStates.towards?s.translate.easeTo(0):(t.simpleStates.flick&&"left"===t.simpleStates.towards||t.simpleStates.halfway||t.simpleStates.hyperExtending)&&s.translate.easeTo(i.minPosition):s.translate.easeTo(0)),t.isDragging=!1,t.startDragX=n.page("X",e)}}}},l=function(e){e.element&&(n.deepExtend(i,e),t.vendor=n.vendor(),s.drag.listen())};this.open=function(a){n.klass.remove(e.body,"snapjs-expand-left"),n.klass.remove(e.body,"snapjs-expand-right"),"left"===a?(console.log("cache.translation "+t.translation),t.translation===i.maxPosition?this.close():(t.simpleStates.opening="left",t.simpleStates.towards="right",n.klass.add(e.body,"snapjs-left"),n.klass.remove(e.body,"snapjs-right"),s.translate.easeTo(i.maxPosition))):"right"===a&&(t.simpleStates.opening="right",t.simpleStates.towards="left",n.klass.remove(e.body,"snapjs-left"),n.klass.add(e.body,"snapjs-right"),s.translate.easeTo(i.minPosition))},this.close=function(){s.translate.easeTo(0)},this.expand=function(i){var t=a.innerWidth||e.documentElement.clientWidth;"left"===i?(n.klass.add(e.body,"snapjs-expand-left"),n.klass.remove(e.body,"snapjs-expand-right")):(n.klass.add(e.body,"snapjs-expand-right"),n.klass.remove(e.body,"snapjs-expand-left"),t*=-1),s.translate.easeTo(t)},this.on=function(e,t){return r[e]=t,this},this.off=function(e){r[e]&&(r[e]=!1)},this.enable=function(){s.drag.listen()},this.disable=function(){s.drag.stopListening()},this.settings=function(e){n.deepExtend(i,e)},this.state=function(){var e,a=s.translate.get.matrix(4);return e=a===i.maxPosition?"left":a===i.minPosition?"right":"closed",{state:e,info:t.simpleStates}},l(o)};"undefined"!=typeof module&&module.exports&&(module.exports=t),"undefined"==typeof ender&&(this.Snap=t),"function"==typeof define&&define.amd&&define("snap",[],function(){return t})}).call(this,window,document);var L=[],M=function(m){function d(e){if(s){var n,i=t.canvas.getBoundingClientRect();if(e.targetTouches&&null!==e.targetTouches.item(0)){var r=e.targetTouches.item(0);n={x:r.pageX-i.left,y:r.pageY-i.top}}else n={x:e.pageX-i.left,y:e.pageY-i.top};t.addUndoHistoryItem(),a=[n],t.brushLine(),e.preventDefault()}else if(t.parent){var o=document.getElementById("pagecontentouter");t.scrollTop=o.scrollTop}}function c(l){if(s){if(a.length){var e=a[a.length-1].x*t.canvas.width/t.canvas.clientWidth+t.canvas.clientLeft,i=a[a.length-1].y*t.canvas.height/t.canvas.clientHeight+t.canvas.clientTop;if(1==a.length){var r=e+20*(Math.random()-.5),o=i+20*(Math.random()-.5);t.createsplodges(n,r,o,e,i,!1),r=e+20*(Math.random()-.5),o=i+20*(Math.random()-.5),t.createsplodges(n,r,o,e,i,!1)}else{var r=a[a.length-2].x*t.canvas.width/t.canvas.clientWidth+t.canvas.clientLeft,o=a[a.length-2].y*t.canvas.height/t.canvas.clientHeight+t.canvas.clientTop;t.createsplodges(n,r,o,e,i,!0)}}a=[],l.preventDefault(),t.copyToChild()}else if(t.parent){var d=document.getElementById("pagecontentouter");t.scrollTop==d.scrollTop&&t.parent.setActive(t)}}function g(e){if(a.length){var i=e.targetTouches.item(0),n=t.canvas.getBoundingClientRect(),s={x:i.pageX-n.left-1,y:i.pageY-n.top};l(s)}e.preventDefault()}function h(e){if(a.length){var i=t.canvas.getBoundingClientRect(),n={x:e.pageX-i.left,y:e.pageY-i.top};l(n)}e.preventDefault()}function l(e){var i=!0;if(a.length){var n=a[a.length-1],s=n.x-e.x,r=n.y-e.y,o=Math.sqrt(Math.pow(s,2)+Math.pow(r,2));3>=o&&(i=!1)}i&&(a.push(e),t.brushLine())}function u(e){e.preventDefault()}var t=this,s=!0;t.parent=null,t.activeChild=null,t.draw=!0;var e=1,i=279,a=[],_=10;t.undohistory=[],t.redohistory=[];var r=null,o=null,n=0;this.buffer=null,this.penblack=function(){this.draw=!0},this.penwhite=function(){this.draw=!1},this.addUndoHistoryItem=function(){this.undohistory.length==_&&(this.recyclecanvas(this.undohistory[0]),this.undohistory.splice(0,1));var e=this.getnewcanvas();e.ctx.drawImage(this.canvas,0,0),this.undohistory.push(e),this.clearredohistory(),shanka.canvasupdateundoredo()},this.undo=function(){if(this.undohistory.length){var e=this.getnewcanvas();e.ctx.drawImage(this.canvas,0,0),this.redohistory.push(e);var t=this.undohistory.pop();this.ctx.globalAlpha=1,this.ctx.shadowBlur=0,this.ctx.drawImage(t,0,0),this.copyToChild(),this.recyclecanvas(t)}},this.redo=function(){if(this.redohistory.length){var e=this.getnewcanvas();e.ctx.drawImage(this.canvas,0,0),this.undohistory.push(e);var t=this.redohistory.pop();this.ctx.globalAlpha=1,this.ctx.shadowBlur=0,this.ctx.drawImage(t,0,0),this.copyToChild(),this.recyclecanvas(t)}},this.canundo=function(){return this.undohistory.length>0},this.canredo=function(){return this.redohistory.length>0},this.getnewcanvas=function(){var e=null;return L.length?e=L.pop():(e=document.createElement("canvas"),this.parent?(e.width=this.parent.canvas.width,e.height=this.parent.canvas.height):(e.width=this.canvas.width,e.height=this.canvas.height),e.ctx=e.getContext("2d")),e},this.recyclecanvas=function(e){e.parent=null,L.push(e)},this.clearundohistory=function(){for(var e=0,t=this.undohistory.length;t>e;e++)this.recyclecanvas(this.undohistory[e]);this.undohistory=[]},this.clearredohistory=function(){for(var e=0,t=this.redohistory.length;t>e;e++)this.recyclecanvas(this.redohistory[e]);this.redohistory=[]},this.reset=function(){this.clear()},this.deselectActiveChild=function(){null!=this.activeChild&&(this.activeChild.canvas.classList.remove("touchpaintminisel"),this.activeChild.canvas.classList.add("touchpaintmini"))},this.selectActiveChild=function(){null!=this.activeChild&&(this.activeChild.canvas.classList.remove("touchpaintmini"),this.activeChild.canvas.classList.add("touchpaintminisel"))},this.copyToChild=function(){null!=this.activeChild&&this.activeChild.copyFromParent()},this.copyFromChild=function(){null!=this.activeChild&&this.ctx.drawImage(this.activeChild.buffer,0,0)},this.copyFromParent=function(){this.parent&&(this.ctx.drawImage(this.parent.canvas,0,0,280,280,0,0,55,55),this.overdrawBorder(),this.buffer||(this.buffer=this.getnewcanvas()),this.buffer.ctx.drawImage(this.parent.canvas,0,0,280,280,0,0,280,280))},this.copychildtochild=function(t,e){e.canvas.ctx.drawImage(t.canvas,0,0),e.buffer&&this.recyclecanvas(e.buffer),e.buffer=t.buffer,t.buffer=null},this.overdrawBorder=function(){var e=this.canvas.width;this.drawLine({x:0,y:0},{x:0,y:e},this.parent.bordercolour,1),this.drawLine({x:0,y:0},{x:e,y:0},this.parent.bordercolour,1),this.drawLine({x:e,y:e},{x:0,y:e},this.parent.bordercolour,1),this.drawLine({x:e,y:e},{x:e,y:0},this.parent.bordercolour,1)},this.clear=function(){this.parent?this.copyFromParent():(this.addUndoHistoryItem(),this.ctx.globalAlpha=1,this.ctx.shadowBlur=0,this.ctx.beginPath(),this.ctx.fillStyle=this.backgcolour,this.ctx.clearRect(e,e,i-e,i-e),this.ctx.fillRect(e,e,i-e,i-e),this.ctx.closePath(),a=[],this.drawgrid(),this.copyToChild())},this.drawgrid=function(){this.ctx.globalAlpha=1;var t=shanka.getsetting("guide"),a=e+(i-e)/2,n=e+(i-e)/3,s=e+2*(i-e)/3;("star"==t||"cross"==t||"bar"==t)&&this.drawLine({x:a,y:e},{x:a,y:i},this.gridcolour,2),("star"==t||"cross"==t)&&this.drawLine({x:e,y:a},{x:i,y:a},this.gridcolour,2),"star"==t&&(this.drawLine({x:e,y:e},{x:i,y:i},this.gridcolour,2),this.drawLine({x:e,y:i},{x:i,y:e},this.gridcolour,2)),"grid"==t&&(this.drawLine({x:n,y:e},{x:n,y:i},this.gridcolour,2),this.drawLine({x:s,y:e},{x:s,y:i},this.gridcolour,2),this.drawLine({x:e,y:n},{x:i,y:n},this.gridcolour,2),this.drawLine({x:e,y:s},{x:i,y:s},this.gridcolour,2)),this.drawLine({x:e,y:e},{x:e,y:i},this.bordercolour,2),this.drawLine({x:e,y:e},{x:i,y:e},this.bordercolour,2),this.drawLine({x:i,y:i},{x:e,y:i},this.bordercolour,2),this.drawLine({x:i,y:i},{x:i,y:e},this.bordercolour,2)},this.setActive=function(e){this.deselectActiveChild(),this.ctx.globalAlpha=1,this.ctx.shadowBlur=0,this.ctx.beginPath(),this.ctx.fillStyle=this.backgcolour,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.closePath(),this.activeChild=e,this.copyFromChild(),this.selectActiveChild(),this.clearundohistory(),this.clearredohistory(),shanka.canvasupdateundoredo()},this.setParent=function(e){this.parent=e},this.brushLine=function(){var t=a[a.length-1].x*this.canvas.width/this.canvas.clientWidth+this.canvas.clientLeft,s=a[a.length-1].y*this.canvas.height/this.canvas.clientHeight+this.canvas.clientTop;if(this.ctx.globalAlpha=e>t||e>s||t>i||s>i?1:1,1==a.length){var l=4*this.brushwidth/5;n=l,this.ctx.beginPath(),this.ctx.arc(t,s,l/2,0,2*Math.PI,!1),this.ctx.fillStyle=this.brushcolour,this.ctx.fill()}else{var d=a[a.length-2].x*this.canvas.width/this.canvas.clientWidth+this.canvas.clientLeft,c=a[a.length-2].y*this.canvas.height/this.canvas.clientHeight+this.canvas.clientTop,u=1*this.brushwidth/3,m=this.brushwidth,g=3,y=7,p=Math.sqrt(Math.pow(t-d,2)+Math.pow(s-c,2)),l=u+(m-u)*(y-g)/(p-g);if(l=Math.max(Math.min(l,m),u),l=Math.max(Math.min(l,n+this.brushwidth/10),n-this.brushwidth/10),this.ctx.strokeStyle=this.brushcolour,this.ctx.lineWidth=l,this.ctx.beginPath(),this.ctx.moveTo(d,c),2==a.length)this.ctx.lineTo(t,s),r=t-.5*(t-d),o=s-.5*(s-c),this.ctx.stroke(),this.ctx.closePath(),this.createsplodges(n,t,s,d,c,!0);else{var _=d+.5*(d-r),h=c+.5*(c-o);this.ctx.quadraticCurveTo(_,h,t,s),r=_,o=h,this.ctx.stroke(),this.ctx.closePath()}n=l}!this.draw},this.drawLine=function(e,t,a,i){this.ctx.globalAlpha=1,this.ctx.strokeStyle=a,this.ctx.lineWidth=i,this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.stroke(),this.ctx.closePath()},this.createsplodges=function(e,_,m,c,l,y){for(var d=c-_,r=l-m,o=Math.sqrt(Math.pow(d,2)+Math.pow(r,2)),n=d/o,t=r/o,p=Math.floor(15*Math.random()+15),s=0;p>s;s++){var g=(Math.random()+.3)*e/4,i=e/2*(.7*Math.random()+.4),a=e/2*(1.9*Math.random()-.95);y&&(i+=1.2*(e/2-Math.abs(a)));var u=c+n*i+t*a,h=l+t*i-n*a,f=u-n*e/2,b=h-t*e/2;this.ctx.strokeStyle=this.brushcolour,this.ctx.lineWidth=g/2,this.ctx.beginPath(),this.ctx.moveTo(f,b),this.ctx.lineTo(u,h),this.ctx.stroke(),this.ctx.closePath()}},this.getData=function(){},this.init=function(e){e&&"enabled"in e&&"boolean"==typeof e.enabled&&(s=e.enabled),this.canvas=document.getElementById(m),this.height=e&&"height"in e&&"number"==typeof e.height?e.height:this.canvas.clientHeight,this.width=e&&"width"in e&&"number"==typeof e.width?e.width:this.canvas.clientWidth,this.canvas.style.background=this.backgcolour,this.ctx=this.canvas.getContext("2d"),this.ctx.lineCap="round",this.canvas.addEventListener("touchstart",d,!1),this.canvas.addEventListener("mousedown",d,!1),this.canvas.addEventListener("touchend",c,!1),s&&(this.canvas.style.cursor="crosshair",this.canvas.addEventListener("touchmove",g,!1),document.body.addEventListener("gesturestart",u,!0),this.canvas.addEventListener("mousemove",h,!1),this.canvas.addEventListener("click",c,!1),this.clear())}};!function(e,n,s,r,t,a,i){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,a=n.createElement(s),i=n.getElementsByTagName(s)[0],a.async=1,a.src=r,i.parentNode.insertBefore(a,i)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-39955029-5","hskhsk.com"),ga("send","pageview");var shanka={};shanka.init=function(){n();try{var r=document.getElementById("default_app_support_see_message"),o=document.getElementById("default_app_support_see_message");o&&(o.innerHTML="querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?STR.app_initialising_message:STR.app_no_html5_message),r&&(r.innerHTML=STR.app_support_see_message),document.getElementById("snap_page_main_title").innerHTML=STR.page_main_title,document.getElementById("snap_page_practice_title").innerHTML=STR.page_practice_title,document.getElementById("snap_study_study_text").innerHTML=STR.study_study_text,document.getElementById("snap_gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("snap_page_history_title").innerHTML=STR.page_history_title,document.getElementById("snap_page_queue_title").innerHTML=STR.page_queue_title,document.getElementById("snap_page_progress_title").innerHTML=STR.page_progress_title,document.getElementById("snap_page_categories_title").innerHTML=STR.page_categories_title,document.getElementById("snap_page_questions_title").innerHTML=STR.page_questions_title,document.getElementById("snap_page_lessons_title").innerHTML=STR.page_lessons_title,document.getElementById("snap_page_algorithms_title").innerHTML=STR.page_algorithms_title,document.getElementById("snap_page_wizard_title").innerHTML=STR.page_wizard_title,document.getElementById("snap_page_import_title").innerHTML=STR.page_import_title,document.getElementById("snap_page_export_title").innerHTML=STR.page_export_title,document.getElementById("snap_page_settings_title").innerHTML=STR.page_settings_title,document.getElementById("snap_page_maintenance_title").innerHTML=STR.page_maintenance_title,document.getElementById("studycurrent").innerHTML=STR.study_study_text,document.getElementById("studypractice").innerHTML=STR.study_practice_text,document.getElementById("studyedit").innerHTML=STR.study_edit_text,document.getElementById("studyreveal").innerHTML=STR.study_show_answer_label,document.getElementById("study_search_result_label").innerHTML=STR.study_search_result_label,shanka.nextguid=1,shanka.cards={},shanka.lessons={},shanka.categories={},shanka.questions={},shanka.settings={},shanka.algorithms={},shanka.progress=[],shanka.queue=[],shanka.history=[],shanka.studybackstack=[],shanka.studyfwdstack=[],shanka.minitps=[],shanka.relatedcharmap={},shanka.algorithm=null,shanka.currentlang="";var e=H();if(shanka.readall(),window.onpopstate=shanka.onpopstate,shanka.initlocal(),!(shanka.state&&"section"in shanka.state&&"initialising"!=shanka.state.section)||e&&"section"in e&&"main"!=e.section&&"welcome"!=e.section)shanka.showstate({section:"initialising"});else{var s=!0;"cardid"in shanka.state&&!(shanka.state.cardid in shanka.cards)&&(console.log("Cannot used stored state, invalid cardid: "+shanka.state.cardid),s=!1),"questionid"in shanka.state&&!(shanka.state.questionid in shanka.questions)&&(console.log("Cannot used stored state, invalid questionid: "+shanka.state.questionid),s=!1),"categoryid"in shanka.state&&!(shanka.state.categoryid in shanka.categories)&&(console.log("Cannot used stored state, invalid categoryid: "+shanka.state.categoryid),s=!1),"lessonid"in shanka.state&&!(shanka.state.lessonid in shanka.lessons)&&(console.log("Cannot used stored state, invalid lessonid: "+shanka.state.lessonid),s=!1),"algorithmid"in shanka.state&&!(shanka.state.algorithmid in shanka.algorithms)&&(console.log("Cannot used stored state, invalid algorithmid: "+shanka.state.algorithmid),s=!1),e=shanka.state,console.log("using stored state instead: "+JSON.stringify(e))}shanka.navigate(e),shanka.fastclick=new a(document.body)}catch(e){i("shanka.init",e)}t()},shanka.doexporttextfile=function(){n();try{var a=new Blob([document.getElementById("exporttextdata").value],{type:"text/plain"}),e=document.createElement("a");e.download=STR.export_download_filename,e.innerHTML=STR.export_download_filetext,null!=window.webkitURL?e.href=window.webkitURL.createObjectURL(a):(e.href=window.URL.createObjectURL(a),e.onclick=destroyClickedElement,e.style.display="none",document.body.appendChild(e)),e.click()}catch(e){i("doexporttextfile",e)}t()},shanka.dorebuild=function(){confirm(STR.local_storage_rebuild_confirm)&&(shanka.init(),shanka.addtoresult(STR.local_storage_rebuilt_ok_message),shanka._updatemlocalstorageused())},shanka.donuke=function(){n();try{if(confirm(STR.local_storage_erase_confirm)){var e=localStorage.language;e&&e in supportedLanguages||(e="en"),localStorage.clear(),localStorage.language=e,shanka.init(),shanka.addtoresult(STR.local_storage_erased_message),shanka._updatemlocalstorageused()}}catch(e){i("donuke",e)}t()},shanka.doreload=function(){n();try{shanka.init(),shanka.addtoresult(STR.app_was_reloaded_message)}catch(e){i("doreload",e)}t()},shanka.addtoresult=function(t){var e=document.getElementById("result").innerHTML;e.length?e+="<br />"+t:e=t,document.getElementById("result").innerHTML=e},shanka.showmain=function(){shanka.navigate({section:"main"})},shanka.addcategory=function(){shanka.navigate({section:"addcategory"})},shanka.doaddcategoryadd=function(){shanka._addcategory()&&shanka.showcategories()},shanka.doshowcategory=function(){"categoryid"in shanka.state&&shanka.showcategory(parseInt(shanka.state.categoryid))},shanka.showlessons=function(){shanka.navigate({section:"lessons"})},shanka.showprogress=function(){shanka.navigate({section:"progress"})},shanka.showsettings=function(){shanka.navigate({section:"settings"})},shanka.showmaintenance=function(){shanka.navigate({section:"maintenance"})},shanka.showquestions=function(){shanka.navigate({section:"questions"})},shanka.showquestion=function(e){shanka.navigate(e?{section:"question",questionid:e}:{section:"question"})},shanka.showsidebarmenu=function(){j()?shanka.navigate({section:"left-drawer"}):m.open("left")},shanka.showimport=function(){shanka.navigate({section:"import"})},shanka.showshankiimport=function(){shanka.navigate({section:"shankiimport"})},shanka.showplecoimport=function(){shanka.navigate({section:"plecoimport"})},shanka.showstickyimport=function(){shanka.navigate({section:"stickyimport"})},shanka.showskritterimport=function(){shanka.navigate({section:"skritterimport"})},shanka.showexport=function(){shanka.navigate({section:"export"})},shanka.doexportshanka=function(){shanka.export("shanka")},shanka.doexportother=function(){var e="";e=document.getElementById("exportpleco").classList.contains("active")?"pleco":document.getElementById("exportsticky").classList.contains("active")?"sticky":document.getElementById("exportsimp").classList.contains("active")?"simplified":"traditional",shanka.export(e)},shanka.navigate=function(e,s){n();try{(!e||("study"==e.section||"main"==e.section)&&E(shanka.cards)||"welcome"==e.section||"lang"==e.section.substr(0,4))&&(e=E(shanka.cards)?{section:"welcome"}:{section:"main"}),"study"==e.section||"practice"==e.section&&"cardid"in e||"info"==e.section?"fwdback"in e?delete e.fwdback:(("study"==shanka.state.section||"practice"==shanka.state.section&&"cardid"in shanka.state||"info"==shanka.state.section)&&shanka.studybackstack.push(shanka.state),shanka.studyfwdstack=[]):(shanka.studybackstack=[],shanka.studyfwdstack=[]),"suppress"==s?console.log("suppressing state update"):shanka.updateHistoryUrlState(e,s),document.getElementById("help-button").style.display="inline";var o="Shanka 闪卡";switch(shanka.showstate(e),e.section){case"initialising":shanka.initinitialising();break;case"main":shanka.showmenubuttonhideback(),shanka.initmain(),shanka.setpagetitle(STR.page_main_app_title);break;case"welcome":shanka.showmenubuttonhideback(),shanka.initwelcome(),shanka.setpagetitle(STR.page_main_app_title);break;case"card":var a=null;"cardid"in e?(shanka.hidemenubuttonsetback(shanka.studyinfo),shanka.setpagetitle(STR.page_edit_flashcard_title),a=parseInt(e.cardid)):(shanka.hidemenubuttonsetback(shanka.navigateprevious),shanka.setpagetitle(STR.page_add_flashcard_title));var r=null;"categoryid"in e&&(r=parseInt(e.categoryid)),shanka.initshowcard(a,r);break;case"info":if("cardid"in e){var a=parseInt(e.cardid);shanka.initcardinfo(a)}break;case"practice":shanka.initpractice();break;case"categories":shanka.showmenubuttonhideback(),shanka.initcategories(),shanka.setpagetitle(STR.page_categories_title);break;case"addcategory":shanka.hidemenubuttonsetback(shanka.showcategories),shanka.initaddcategory(),shanka.setpagetitle(STR.page_add_category_title);break;case"editcategory":shanka.hidemenubuttonsetback(shanka.showcurrentcategory),shanka.initeditcategory(parseInt(e.categoryid)),shanka.setpagetitle(STR.page_edit_category_name_title);break;case"category":shanka.hidemenubuttonsetback(shanka.showcategories),shanka.initshowcategory(parseInt(e.categoryid),!1,!1);break;case"editflashcards":shanka.hidemenubuttonsetback(shanka.showcurrentcategory),shanka.initshowcategory(parseInt(e.categoryid),!0,!0);break;case"progress":shanka.showmenubuttonhideback(),shanka.initprogress(),shanka.setpagetitle(STR.page_progress_title);break;case"history":shanka.showmenubuttonhideback(),shanka.inithistory(),shanka.setpagetitle(STR.page_history_title);break;case"queue":shanka.showmenubuttonhideback(),shanka.initqueue(),shanka.setpagetitle(STR.page_queue_title);break;case"study":shanka.initstudy();break;case"settings":shanka.showmenubuttonhideback(),shanka.initsettings(),shanka.setpagetitle(STR.page_settings_title);break;case"lessons":shanka.showmenubuttonhideback(),shanka.initlessons(),shanka.setpagetitle(STR.page_lessons_title);break;case"lesson":shanka.hidemenubuttonsetback(shanka.showlessons),"lessonid"in e?(shanka.initlesson(parseInt(e.lessonid)),shanka.setpagetitle(STR.page_edit_lesson_title)):(shanka.initlesson(),shanka.setpagetitle(STR.page_add_lesson_title));break;case"help":shanka.hidemenubuttonsetback(shanka.navigateprevious),document.getElementById("help-button").style.display="none",shanka.inithelp("page"in e?e.page:""),o="Help";break;case"import":shanka.showmenubuttonhideback(),shanka.initimport(),shanka.setpagetitle(STR.page_import_title);break;case"export":shanka.showmenubuttonhideback(),shanka.initexport(),shanka.setpagetitle(STR.page_export_title);break;case"exported":shanka.hidemenubuttonsetback(shanka.showexport),shanka.initexported(),shanka.setpagetitle(STR.page_export_title);break;case"maintenance":shanka.showmenubuttonhideback(),shanka.initmaintenance(),shanka.setpagetitle(STR.page_maintenance_title);break;case"questions":shanka.showmenubuttonhideback(),shanka.initquestions(),shanka.setpagetitle(STR.page_questions_title);break;case"question":shanka.hidemenubuttonsetback(shanka.showquestions),"questionid"in e?(shanka.initshowquestion(parseInt(e.questionid)),shanka.setpagetitle(STR.page_edit_question_title)):(shanka.initshowquestion(),shanka.setpagetitle(STR.page_add_question_title));break;case"algorithms":shanka.showmenubuttonhideback(),shanka.initalgorithms(),shanka.setpagetitle(STR.page_algorithms_title);break;case"editalgorithms":shanka.hidemenubuttonsetback(shanka.showalgorithms),shanka.initeditalgorithms(),shanka.setpagetitle(STR.page_edit_algorithms_title);break;case"editcategories":shanka.hidemenubuttonsetback(shanka.showcategories),shanka.initeditcategories(),shanka.setpagetitle(STR.page_edit_categories_title);break;case"editquestions":shanka.hidemenubuttonsetback(shanka.showquestions),shanka.initeditquestions(),shanka.setpagetitle(STR.page_edit_questions_title);break;case"editlessons":shanka.hidemenubuttonsetback(shanka.showlessons),shanka.initeditlessons(),shanka.setpagetitle(STR.page_edit_lessons_title);break;case"algorithm-add":shanka.hidemenubuttonsetback(shanka.showalgorithms),shanka.initaddalgorithms(),shanka.setpagetitle(STR.page_add_algorithm_title);break;case"algorithm-shanka":"algorithmid"in e?(shanka.hidemenubuttonsetback(shanka.showalgorithms),shanka.initshankaalgorithm(parseInt(e.algorithmid)),shanka.setpagetitle(STR.page_edit_algorithm_title)):(shanka.hidemenubuttonsetback(shanka.addalgorithm),shanka.initshankaalgorithm(),shanka.setpagetitle(STR.page_add_algorithm_title));break;case"wizard1":shanka.showmenubuttonhideback(),shanka.wizard1init(),shanka.setpagetitle(STR.page_wizard1_title);break;case"wizard2":shanka.hidemenubuttonsetback(shanka.wizard),shanka.wizard2init(),shanka.setpagetitle(STR.page_wizard2_title);break;case"wizard3":shanka.hidemenubuttonsetback(shanka.wizard2),shanka.wizard3init(),shanka.setpagetitle(STR.page_wizard3_title);break;case"wizard4":shanka.hidemenubuttonsetback(shanka.wizard3),shanka.wizard4init(),shanka.setpagetitle(STR.page_wizard4_title);break;default:console.log("shanka.navigate() unknown section: "+e.section)}window.scrollTo(0,0)}catch(e){i("navigate",e)}t()},shanka.navigateprevious=function(){var e=JSON.parse(JSON.stringify(shanka.state));if("previous"in e){var t=e.previous;e.section=t,delete e.previous}if("previouscardid"in e){var a=e.previouscardid;e.cardid=a,delete e.previouscardid}shanka.navigate(e)},shanka.showmenubuttonhideback=function(){document.getElementById("title-button-prev").style.display="none",document.getElementById("toggle-left").style.display="block"},shanka.hidemenubuttonsetback=function(e){document.getElementById("title-button-prev").style.display="block",document.getElementById("title-button-prev").onclick=e,document.getElementById("toggle-left").style.display="none"},shanka.updateHistoryUrlState=function(e,i){var t=[e.section];for(var a in e)"section"!=a&&t.push(a+"="+e[a]);
"replace"==i?(console.log("replacing state with "+JSON.stringify(e)),history.replaceState(e,e.section,"#"+t.join(","))):(console.log("pushState "+JSON.stringify(e)),history.pushState(e,e.section,"#"+t.join(","))),localStorage.state=shanka.compress(JSON.stringify(shanka.state))},shanka.showstate=function(t){console.log("showState "+JSON.stringify(t)),t||(t={section:"main"});var a=document.getElementById("pagecontent"),e=t.section;if(a&&e){if("study"==e||"info"==e||"practice"==e?(document.getElementById("bar-title").style.display="none",document.getElementById("pagecontentouter").style.top="0px",document.getElementById("pagecontentouter").setAttribute("data-snap-ignore","true")):(document.getElementById("bar-title").style.display="block",document.getElementById("pagecontentouter").style.top="44px",document.getElementById("pagecontentouter").removeAttribute("data-snap-ignore")),"study"==e||"practice"==e)a.style.display="none",a.innerHTML="";else{var i=document.getElementById(e);if(i){var n=i.innerHTML;a.innerHTML=n}a.style.display="inline",document.getElementById("study").style.display="none"}shanka.state=t,localStorage.state=shanka.compress(JSON.stringify(shanka.state))}},shanka.setpagetitle=function(e){document.getElementById("pagetitle").innerHTML=e},shanka.onpopstate=function(e){console.log("onpopstate "+JSON.stringify(e.state)),e.state&&shanka.navigate(e.state,"suppress")},shanka.initinitialising=function(){document.getElementById("init_app_support_see_message").innerHTML=STR.app_support_see_message,document.getElementById("app_please_wait_a_moment").innerHTML=STR.app_please_wait_a_moment,document.getElementById("app_initialising_message").innerHTML="querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?STR.app_initialising_message:STR.app_no_html5_message},shanka.initmain=function(){if(shanka.ensuretodayhasprogress(),document.getElementById("progress_total_label").innerHTML=STR.progress_total_label,document.getElementById("progress_today_label").innerHTML=STR.progress_today_label,document.getElementById("all_main_cards_learned_label").innerHTML=STR.main_cards_learned_label,document.getElementById("all_progress_studied_label").innerHTML=STR.progress_studied_label,document.getElementById("today_main_cards_learned_label").innerHTML=STR.main_cards_learned_label,document.getElementById("today_progress_studied_label").innerHTML=STR.progress_studied_label,document.getElementById("study_study_text").innerHTML=STR.study_study_text,document.getElementById("study_practice_text").innerHTML=STR.study_practice_text,document.getElementById("card_add_text").innerHTML=STR.card_add_text,shanka.progress.length){var e=shanka.progress[0],s=e.totaltimestudied,a=e.totalitemsstudied,i=e.totalcardsknown,t=shanka.getprogressvalunit(s);if(document.getElementById("maintimestudiedalltime").innerHTML=t[0],document.getElementById("maintimeunitalltime").innerHTML=t[1],document.getElementById("maincardslearnedalltime").innerHTML=""+i,document.getElementById("maincardsstudiedalltime").innerHTML=""+a,shanka.progress.length>1){var n=shanka.progress[1];s=e.totaltimestudied-n.totaltimestudied,a=e.totalitemsstudied-n.totalitemsstudied,i=e.totalcardsknown-n.totalcardsknown}document.getElementById("maintimestudiedtoday").innerHTML=t[0],document.getElementById("maintimeunittoday").innerHTML=t[1],document.getElementById("maincardslearnedtoday").innerHTML=""+i,document.getElementById("maincardsstudiedtoday").innerHTML=""+a}},shanka.initwelcome=function(){"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach||shanka.addtoresult(STR.main_browser_no_html5_error),document.getElementById("main_menu_help_label").innerHTML=STR.main_menu_help_label,document.getElementById("main_choose_option_begin_label").innerHTML=STR.main_choose_option_begin_label,document.getElementById("main_beginners_quickstart_label").innerHTML=STR.main_beginners_quickstart_label,document.getElementById("main_setup_wizard_label").innerHTML=STR.main_setup_wizard_label,document.getElementById("lang_interface_language").innerHTML=STR.lang_interface_language,document.getElementById("welcome_app_support_see_message").innerHTML=STR.app_support_see_message;var a=document.getElementById("supportedlanglist");for(var e in supportedLanguages)if(e!=STR.getCurrentLanguage()){var i=supportedLanguages[e],t=document.createElement("ul");t.classList.add("inset"),t.classList.add("list"),t.innerHTML="<li><a href='javascript:STR.setLanguage(\""+e+"\")'>"+i.this_switch_language+" ("+STR.get_language_name(e)+")<span class='chevron'></span></a></li>",a.appendChild(t);var n=document.createElement("br");a.appendChild(n)}};var b=[["u:","ü"],["v","ü"],["U:","Ü"],["V","Ü"]],S=function(n){for(var r="",e=0,h=RegExp(/[A-Za-z\u00FC\u00DC:]+[1-5]/g),a=null;null!=(a=h.exec(n));){var l=n.indexOf(a,e);l!=e&&(r+=n.substr(e,l-e));for(var i=a.substr(0,a.length-1),u=parseInt(a.substr(a.length-1,1)),t=0,d=b.length;d>t;t++)i=i.replace(b[t][0],b[t][1]);for(var t=0,d=b.length;d>t;t++){var c=b[t],o=c.substr(0,1);if(s(i,o)&&("i"!=o.toLowerCase()||!i.toLowerCase().contains("iu"))){r+=i.replace(o,c.substr(u,1));break}}e+=a.length}e!=n.length&&(r+=n.substr(e))};shanka.filterlistpages=function(e){var i=document.getElementById("pageselect"),n=parseInt(shanka.getsetting("listmax")),r=[];if(e.length<=n)i.style.display="none",r=e;else{i.style.display="inline";var t=0;if("page"in shanka.state&&(t=parseInt(shanka.state.page)),-1==t)r=e;else for(var o=t;t+n>o&&o<e.length;o++)r.push(e[o]);var a=document.createElement("option");a.text=STR.gen_all_text+" ("+e.length+"）",a.value="-1",i.add(a,null);for(var s=0;s<e.length;s+=n){var l=Math.min(s+n,e.length),a=document.createElement("option");a.text=""+(s+1)+" ... "+l,a.value=""+s,i.add(a,null)}i.selectedIndex=-1==t?0:Math.floor(t/n)+1}return r},shanka.onpageselectchange=function(){var e=document.getElementById("pageselect"),a=parseInt(e.options[e.selectedIndex].value),t=JSON.parse(JSON.stringify(shanka.state));t.page=""+a,shanka.navigate(t)},shanka.snapperclose=function(){m.close()},shanka.snapperopen=function(e){m.open(e)},_.prototype.write=function(){localStorage["l"+this.lessonid.toString(36)]=shanka.compress(JSON.stringify(this))},_.prototype.del=function(){delete shanka.lessons[this.lessonid],localStorage.removeItem("l"+this.lessonid.toString(36))},shanka.getuniquelessonname=function(a){for(var i=2,t=a,e=!0;e;){e=!1;for(var n in shanka.lessons)if(shanka.lessons[n].name==t){e=!0;break}e&&(t=a+" ("+i+")",i++)}return t},shanka.initlessons=function(){document.getElementById("study_study_text").innerHTML=STR.study_study_text,document.getElementById("gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("gen_edit_all_text").innerHTML=STR.gen_edit_all_text,shanka.initlessonslist(!1)},shanka.initeditlessons=function(){document.getElementById("gen_duplicate_text").innerHTML=STR.gen_duplicate_text,document.getElementById("gen_delete_text").innerHTML=STR.gen_delete_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text,shanka.initlessonslist(!0)},shanka.initlessonslist=function(i){for(var e=document.getElementById("lessonlist"),n=e.getElementsByTagName("li"),s=n[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var r in shanka.lessons){var t=shanka.lessons[r],a=document.createElement("li");a.innerHTML=s.replace(/#ID#/g,""+t.lessonid).replace(/#NAME#/g,t.name).replace(/#CHECKED#/g,t.enabled?"active":"").replace(/#REVIEW#/g,t.reviewmode?STR.lesson_review_mode_name:""),i&&(a.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()}),e.appendChild(a)}},shanka.addlesson=function(){shanka.navigate({section:"lesson"})},shanka.showlesson=function(e){shanka.navigate({section:"lesson",lessonid:e})},shanka.initlesson=function(t){document.getElementById("lesson_name_label").innerHTML=STR.lesson_name_label,document.getElementById("lesson_reviewing_label").innerHTML=STR.lesson_reviewing_label,document.getElementById("page_questions_title").innerHTML=STR.page_questions_title,document.getElementById("questions_gen_all_text").innerHTML=STR.gen_all_text,document.getElementById("categories_gen_all_text").innerHTML=STR.gen_all_text,document.getElementById("page_categories_title").innerHTML=STR.page_categories_title,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text;var e=null;t in shanka.lessons?e=shanka.lessons[t]:(e=new _,e.name=shanka.getuniquelessonname(STR.lesson_new_name)),document.getElementById("editlessonname").value=e.name,e.reviewmode&&document.getElementById("reviewmodeenabled").classList.add("active"),e.allquestions&&document.getElementById("questionenabledall").classList.add("active"),e.allcategories&&document.getElementById("categoryenabledall").classList.add("active"),shanka.initquestionlist(!0),shanka.initcategorylist(!0,!0),shanka.lessonquestionallclicked(),shanka.lessoncategoryallclicked()},shanka.onlessoncheckclick=function(){n();try{for(var a in shanka.lessons){var s=document.getElementById("lessonenabled"+a).classList.contains("active"),e=shanka.lessons[a];e.enabled!=s&&(e.enabled=s,e.write(),shanka.queue=[])}}catch(e){i("onlessoncheckclick",e)}t()},shanka.dosavelesson=function(){n();try{var a=document.getElementById("editlessonname").value,s=[],r=[];if(!a.length)return alert(STR.lesson_name_cant_be_empty_error),void t();for(var o in shanka.categories){var u=shanka.categories[o];if(parseInt(o)!=c&&u.newname==a)return alert(STR.lesson_name_already_exist_error),void t()}for(var l in shanka.questions)document.getElementById("questionenabled"+l).classList.contains("active")&&s.push(parseInt(l));for(var d in shanka.categories)document.getElementById("categoryenabled"+d).classList.contains("active")&&r.push(parseInt(d));if(!s.length)return alert(STR.lesson_must_include_1_quest_error),void t();if(!r.length)return alert(STR.lesson_must_include_1_cat_error),void t();var e=null;if("lessonid"in shanka.state){var c=parseInt(shanka.state.lessonid);e=shanka.lessons[c]}else e=new _,e.lessonid=shanka.getnextguid();e.reviewmode=document.getElementById("reviewmodeenabled").classList.contains("active"),e.allquestions=document.getElementById("questionenabledall").classList.contains("active"),e.allcategories=document.getElementById("categoryenabledall").classList.contains("active"),e.name=a,e.categoryids=r,e.questionids=s,shanka.lessons[e.lessonid]=e,e.write(),shanka.showlessons(),shanka.addtoresult(STR.lesson_saved_format.replace("{0}",e.name)),shanka.queue=[]}catch(e){i("dosavelesson",e)}t()},shanka.editlessons=function(){shanka.navigate({section:"editlessons"})},shanka.doduplicatelessons=function(){n();try{var a=0;if(confirm(STR.lesson_duplicate_selected_confirm)){for(var s=Object.keys(shanka.lessons),r=s.length;r--;){var o=s[r],l=document.getElementById("lessonselected"+o);if(l&&l.classList.contains("active")){var d=shanka.lessons[o],e=JSON.parse(JSON.stringify(d));e.__proto__=_.prototype,e.lessonid=shanka.getnextguid(),e.name=shanka.getuniquelessonname(d.name),e.current=!1,shanka.lessons[e.lessonid]=e,e.write(),a++}}shanka.editlessons(),shanka.addtoresult(STR.lesson_duplicated_format.replace("{0}",""+a))}}catch(e){i("duplicatelessons",e)}t()},shanka.dodeletelessons=function(){n();try{var e=0;if(confirm(STR.lesson_delete_selected_confirm)){for(var a=Object.keys(shanka.lessons),s=a.length;s--;){var r=a[s],l=shanka.lessons[r],o=document.getElementById("lessonselected"+r);o&&o.classList.contains("active")&&(l.del(),e++)}shanka.editlessons(),shanka.addtoresult(STR.lesson_deleted_format.replace("{0}",""+e))}}catch(e){i("deletelessons",e)}t()},shanka.lessonquestionallclicked=function(){var i=document.getElementById("questionenabledall").classList.contains("active");if(i)for(var a in shanka.questions){var e=document.getElementById("questionenabled"+a);e.classList.add("active"),e.parentElement.classList.add("disabled")}else{var t=null;if("lessonid"in shanka.state){var n=parseInt(shanka.state.lessonid);t=shanka.lessons[n]}else t=new _,t.lessonid=shanka.getnextguid();for(var a in shanka.questions){var e=document.getElementById("questionenabled"+a);e.parentElement.classList.remove("disabled"),s(t.questionids,parseInt(a))?e.classList.add("active"):e.classList.remove("active")}}},shanka.lessoncategoryallclicked=function(){var i=document.getElementById("categoryenabledall").classList.contains("active");if(i)for(var a in shanka.categories){var e=document.getElementById("categoryenabled"+a);e.classList.add("active"),e.parentElement.classList.add("disabled")}else{var t=null;if("lessonid"in shanka.state){var n=parseInt(shanka.state.lessonid);t=shanka.lessons[n]}else t=new _,t.lessonid=shanka.getnextguid();for(var a in shanka.categories){var e=document.getElementById("categoryenabled"+a);e.parentElement.classList.remove("disabled"),s(t.categoryids,parseInt(a))?e.classList.add("active"):e.classList.remove("active")}}},r.prototype._getdefault=function(t){var e="";switch(t){case"kn_rate":e=.5;break;case"last_time":e=0;break;case"next_time":e=0;break;case"last_score":e=0;break;case"question_count":e=0;break;case"correct_count":e=0;break;default:o("Card._getdefault unknown section: "+t)}return e},r.prototype._getseckey=function(t,a,i){var e="";switch(t){case"kn_rate":e="k";break;case"last_time":e="t";break;case"next_time":e="n";break;case"last_score":e="s";break;case"question_count":e="q";break;case"correct_count":e="c";break;default:o("Card._getseckey unknown section: "+t)}switch(a){case"simplified":e+="s";break;case"traditional":e+="t";break;case"cursive":e+="v";break;case"callig":e+="g";break;case"tcursive":e+="V";break;case"tcallig":e+="G";break;case"pinyin":e+="p";break;case"definition":e+="d";break;case"notes":e+="n";break;default:o("Card._getseckey unknown keystem: "+a)}switch(i){case"simplified":e+="s";break;case"traditional":e+="t";break;case"cursive":e+="v";break;case"callig":e+="g";break;case"tcursive":e+="V";break;case"tcallig":e+="G";break;case"pinyin":e+="p";break;case"definition":e+="d";break;case"notes":e+="n";break;default:o("Card._getseckey unknown keyans: "+i)}return e},r.prototype.ensuredataloaded=function(){if(null===this._data)if(this.cardid){var t="x"+this.cardid.toString(36),e=localStorage.getItem(t);this._data=null!==e?JSON.parse(shanka.decompress(e)):{}}else this._data={}},r.prototype.setdata=function(e,t,a,i){this.ensuredataloaded();var n=this._getseckey(e,t,a);this._data[n]=i},r.prototype.hasdata=function(e,t,a){this.ensuredataloaded();var i=this._getseckey(e,t,a);return i in this._data},r.prototype.getdata=function(e,a,i){this.ensuredataloaded();var t=this._getseckey(e,a,i);return t in this._data?this._data[t]:this._getdefault(e)},r.prototype.getdatastring=function(){this.ensuredataloaded();var e=JSON.stringify(this._data);return e},r.prototype.write=function(){var n=this.toarray(),s="f"+this.cardid.toString(36),r=shanka.compress(JSON.stringify(n));if(localStorage[s]=r,null!==this._definition){var e=STR.getCurrentLanguage();"en"==e&&(e="");var t="d"+e+this.cardid.toString(36);this._definition.length?localStorage[t]=shanka.compress(this._definition):localStorage.removeItem(t)}if(null!==this._notes){var a="n"+this.cardid.toString(36);this._notes.length?localStorage[a]=shanka.compress(this._notes):localStorage.removeItem(a)}if(null!==this._data){var i="x"+this.cardid.toString(36);Object.keys(this._data).length?localStorage[i]=shanka.compress(JSON.stringify(this._data)):localStorage.removeItem(i)}this._definition=null,this._notes=null,this._data=null},r.prototype.del=function(){if(this.categoryids.length)for(var e=0,s=this.categoryids.length;s>e;e++){var a=this.categoryids[e],t=shanka.categories[a],i=t.cardids.indexOf(this.cardid);-1!=i&&(console.log("Deleting card "+this.cardid+" from category "+a),t.cardids.splice(i,1),t.write())}delete shanka.cards[this.cardid],console.log("Removing card"+this.cardid+" from local storage"),localStorage.removeItem("f"+this.cardid.toString(36)),console.log("Removing English card definition"+this.cardid+" from local storage"),localStorage.removeItem("d"+this.cardid.toString(36));for(var n in supportedLanguages)console.log("Removing "+n+" language card definition"+this.cardid+" from local storage"),localStorage.removeItem("d"+n+this.cardid.toString(36));console.log("Removing card notes"+this.cardid+" from local storage"),localStorage.removeItem("n"+this.cardid.toString(36)),console.log("Removing card data"+this.cardid+" from local storage"),localStorage.removeItem("x"+this.cardid.toString(36))},r.prototype.toarray=function(){var e=[this.cardid,this.enabled,this.queued,this.simplified,this.traditional,this.pinyin,this.kn_rate,this.last_time,this.next_time,this.test_count];return e},r.prototype.fromarray=function(e){this.cardid=e[0],this.enabled=e[1],this.queued=e[2],this.simplified=e[3],this.traditional=e[4],this.pinyin=e[5],this.kn_rate=e[6],this.last_time=e[7],this.next_time=e[8],this.test_count=e[9]},r.prototype.getdefinition=function(){if(null===this._definition){if(0==this.cardid)return"";var e=STR.getCurrentLanguage();if("en"!=e){var i="d"+e+this.cardid.toString(36),t=shanka.decompress(localStorage.getItem(i));if(null!==t)return t}var n="d"+this.cardid.toString(36),a=shanka.decompress(localStorage.getItem(n));return null===a?"":a}return this._definition},r.prototype.setdefinition=function(e){this._definition=e},r.prototype.getnotes=function(){if(null===this._notes){if(0==this.cardid)return"";var t="n"+this.cardid.toString(36),e=shanka.decompress(localStorage.getItem(t));return null===e?"":e}return this._notes},r.prototype.setnotes=function(e){this._notes=e},r.prototype.getminactive=function(r){for(var t=null,s=shanka.getallactivequestionidslist(),i=0,g=s.length;g>i;i++)for(var u=s[i],e=shanka.questions[u],a=0,c=e.answer.length;c>a;a++)for(var l=e.answer[a],n=0,h=e.stem.length;h>n;n++){var o=e.stem[n];if(this.hasdata(r,o,l)){var d=this.getdata(r,o,l);t=null===t?d:Math.min(t,d)}}return t},r.prototype.getmaxactive=function(r){for(var t=null,s=shanka.getallactivequestionidslist(),i=0,g=s.length;g>i;i++)for(var u=s[i],e=shanka.questions[u],a=0,c=e.answer.length;c>a;a++)for(var l=e.answer[a],n=0,h=e.stem.length;h>n;n++){var o=e.stem[n];if(this.hasdata(r,o,l)){var d=this.getdata(r,o,l);t=null===t?d:Math.max(t,d)}}return t},r.prototype.liststring=function(){var e=this.getdefinition();e.length>=30&&(e=e.substring(0,27)+"...");var t=this.simptradtogether(),a=t+" "+this.pinyin+" "+e;return a.replace(/[\{\}\|]/g,"")},r.prototype.simptradtogether=function(){var e="",t=shanka.getsetting("script");return e=("simplified"==t||"simptrad"==t)&&this.simplified.length||0==this.traditional.length?this.simplified:this.traditional,this.simplified.length&&this.traditional.length&&this.simplified!=this.traditional&&("simptrad"==t?e+=" ["+this.traditional+"]":"tradsimp"==t&&(e+=" ["+this.simplified+"]")),e.replace(/[\{\}\|]/g,"")},r.prototype.getindexedchars=function(){var e=shanka.getsetting("script");return"simplified"==e?this.simplified:"traditional"==e?this.traditional:"simptrad"==e?this.simplified+this.traditional:this.traditional+this.simplified},r.prototype.getfield=function(e){switch(e){case"simplified":case"cursive":case"callig":return this.simplified.replace(/[\{\}\|]/g,"");case"traditional":return this.traditional.replace(/[\{\}\|]/g,"");case"pinyin":return this.pinyin.replace(/[\{\}]/g,"");case"definition":return this.getdefinition().replace(/[\{\}]/g,"");case"notes":return this.getnotes()}return""},r.prototype.issentence=function(){return-1!=this.simplified.indexOf("|")||-1!=this.traditional.indexOf("|")},r.prototype.getsentencewords=function(){var e=this.simplified.replace(/[\{\}]/g,"|"),t=e.split("|");return t},shanka.getuniquecardname=function(a){for(var i=2,t=a,e=!0;e;){e=!1;for(var n in shanka.cards)if(shanka.cards[n].name==t){e=!0;break}e&&(t=a+" ("+i+")",i++)}return t},shanka.showcard=function(t){var e=JSON.parse(JSON.stringify(shanka.state)),a=e.section;e.previous=a,e.section="card",t?e.cardid=t:"cardid"in e&&(e.previouscardid=e.cardid,delete e.cardid),shanka.navigate(e)},shanka.editflashcards=function(){if("categoryid"in shanka.state){var e={section:"editflashcards"};e.categoryid=shanka.state.categoryid,shanka.navigate(e)}},shanka.doduplicateflashcards=function(){n();try{var c=0;if(confirm(STR.card_duplicate_selected_confirm)){for(var d=parseInt(shanka.state.categoryid),a=shanka.categories[d],u=a.cardids.length;u--;){var h=a.cardids[u],l=document.getElementById("cardselected"+h);if(l&&l.classList.contains("active")){var t=shanka.cards[h],e=new r;e.cardid=shanka.getnextguid(),e.name=shanka.getuniquecardname(t.name),e.simplified=t.simplified,e.traditional=t.traditional,e.pinyin=t.pinyin,e.setdefinition(t.getdefinition()),e.setnotes(t.getnotes());for(var s=0,_=t.categoryids.length;_>s;s++){var o=t.categoryids[s],g=shanka.categories[o];g.cardids.push(e.cardid),e.categoryids.push(o),o!=d&&g.write()}shanka.cards[e.cardid]=e,e.write(),c++}}a.write(),shanka.editflashcards(),shanka.addtoresult(STR.card_duplicated_format.replace("{0}",""+c))}}catch(e){i("duplicateflashcards",e)}},shanka.doremoveflashcards=function(){n();try{var s=0;if(confirm(STR.card_remove_selected_confirm)){for(var r=parseInt(shanka.state.categoryid),t=shanka.categories[r],a=t.cardids.length;a--;){var o=t.cardids[a],e=shanka.cards[o],l=document.getElementById("cardselected"+o);if(l&&l.classList.contains("active")){t.cardids.splice(a,1);var d=e.categoryids.indexOf(r);if(-1!=d){if(e.categoryids.splice(d,1),0==e.categoryids.length){var c=shanka.categories[0];c.cardids.push(e.cardid),c.write()}e.write(),s++}}}t.write(),shanka.editflashcards(),shanka.addtoresult(STR.card_removed_format.replace("{0}",""+s))}}catch(e){i("removeflashcards",e)}},shanka.dodeleteflashcards=function(){n();try{var e=0;if(confirm(STR.card_delete_selected_confirm)){for(var l=parseInt(shanka.state.categoryid),a=shanka.categories[l],s=a.cardids.length;s--;){var r=a.cardids[s],d=shanka.cards[r],o=document.getElementById("cardselected"+r);o&&o.classList.contains("active")&&(d.del(),e++,shanka.queue=[],shanka.relatedcharmap={})}shanka.editflashcards(),shanka.addtoresult(STR.card_deleted_format.replace("{0}",""+e))}}catch(e){i("deleteflashcards",e)}t()},shanka.initshowcard=function(t,n){document.getElementById("card_enabled_label").innerHTML=STR.card_enabled_label,document.getElementById("card_queued_label").innerHTML=STR.card_queued_label,document.getElementById("question_simplified_label").innerHTML=STR.question_simplified_label,document.getElementById("question_traditional_label").innerHTML=STR.question_traditional_label,document.getElementById("question_pinyin_label").innerHTML=STR.question_pinyin_label,document.getElementById("question_definition_label").innerHTML=STR.question_definition_label,document.getElementById("question_notes_label").innerHTML=STR.question_notes_label,document.getElementById("page_categories_title").innerHTML=STR.page_categories_title,document.getElementById("savecard").innerHTML=STR.gen_save_text,document.getElementById("cancelcard").innerHTML=STR.gen_cancel_text;var e=null;t&&(e=shanka.cards[t]),e||(e=new r),shanka.initcategorylist(!0,!1),1==Object.keys(shanka.categories).length&&(document.getElementById("categorylist").style.display="none",document.getElementById("categorytitle").style.display="none"),document.getElementById("cardsimp").value=e.simplified,document.getElementById("cardtrad").value=e.traditional,document.getElementById("cardpiny").value=e.pinyin,document.getElementById("carddef").value=e.getdefinition(),document.getElementById("cardnotes").value=e.getnotes(),e.enabled&&document.getElementById("cardenabled").classList.add("active"),e.queued&&document.getElementById("cardqueued").classList.add("active");for(var a=0,o=e.categoryids.length;o>a;a++){var s=e.categoryids[a];0!=s&&document.getElementById("categoryenabled"+s).classList.add("active")}if(!t){var i=null;i=document.getElementById(null===n?"categoryenabled"+shanka.getsetting("lastcategoryid"):"categoryenabled"+n),i&&i.classList.add("active")}},shanka.savecard=function(){n();try{var h=document.getElementById("cardsimp").value,u=document.getElementById("cardtrad").value,w=document.getElementById("cardpiny").value,g=document.getElementById("carddef").value,b=document.getElementById("cardnotes").value,o={},_=document.getElementById("cardenabled").classList.contains("active"),p=document.getElementById("cardqueued").classList.contains("active");for(var d in shanka.categories)if(0!=parseInt(d)){var f=document.getElementById("categoryenabled"+d);if(f.classList.contains("active")){var a=shanka.categories[d];o[d]=a}}if(0==Object.keys(o).length&&(o[0]=shanka.categories[0]),p&&!_)return alert(STR.card_if_queued_must_be_enabled_error),void t();if(!h.length&&!u.length)return alert(STR.card_must_have_at_least_simp_trad_error),void t();if(!g.length)return alert(STR.card_must_have_definition_error),void t();var e=null;"cardid"in shanka.state?e=shanka.cards[parseInt(shanka.state.cardid)]:(e=new r,e.cardid=shanka.getnextguid()),(e.simplified!=h||e.traditional!=u)&&(shanka.relatedcharmap={}),e.simplified=h,e.traditional=u,e.pinyin=w,e.setdefinition(g),e.setnotes(b),e.enabled=_,e.queued=p;for(var s=0,k=e.categoryids.length;k>s;s++){var m=e.categoryids[s];if(!(m in o))for(var a=shanka.categories[m],l=0,v=a.cardids.length;v>l;l++)if(a.cardids[l]==e.cardid){a.cardids.splice(l,1),a.write(),shanka.queue=[];break}}e.categoryids=[];for(var c in o)if(parseInt(c)>=0){for(var a=shanka.categories[c],y=!1,s=0,E=a.cardids.length;E>s;s++){var I=a.cardids[s];if(e.cardid==I){y=!0;break}}y||(a.cardids.push(e.cardid),a.write(),shanka.queue=[]),e.categoryids.push(parseInt(c))}shanka.cards[e.cardid]=e,e.write(),shanka.removefromqueue(e),shanka.addtoqueue(e),"categoryid"in shanka.state?shanka.showcurrentcategory():shanka.showcardinfo(e.cardid),shanka.addtoresult(STR.card_saved_message)}catch(e){i("savecard",e)}t()},shanka.addtocharmap=function(e,n){for(var i=0,r=e.length;r>i;i++){var t=e[i];if(-1==t.search(/[A-Za-z0-9]/)){t in shanka.relatedcharmap||(shanka.relatedcharmap[t]={});var a=shanka.relatedcharmap[t];e in a||(a[e]=[]),s(a[e],n)||a[e].push(n)}}},shanka.rebuildcharmap=function(){shanka.relatedcharmap={};for(var t in shanka.cards){var e=shanka.cards[t];shanka.addtocharmap(e.simplified,e.cardid),shanka.addtocharmap(e.traditional,e.cardid)}},shanka.getrelatedcardids=function(d){E(shanka.relatedcharmap)&&shanka.rebuildcharmap();for(var a=[],r=shanka.cards[d],l=r.getindexedchars(),t=0,g=l.length;g>t;t++){var o=l[t];if(o in shanka.relatedcharmap){var n=shanka.relatedcharmap[o];for(var u in n)for(var c=n[u],i=0,h=c.length;h>i;i++){var e=c[i],_=shanka.cards[e];s(a,e)||d==e||r.issentence()&&_.issentence()||a.push(e)}}}return a},shanka.mergeimportedcardwithexisting=function(e){var t=null;if(e.simplified.length){var o=e.simplified.charAt(0);if(o in shanka.relatedcharmap)var r=shanka.relatedcharmap[o];for(var n in r){if(n==e.simplified)for(var s=r[n],i=0,l=s.length;l>i;i++){var d=s[i],a=shanka.cards[d];if(a.simplified==e.simplified&&a.traditional==e.traditional){t=a;break}}if(t)break}}else{var o=e.traditional.charAt(0);if(o in shanka.relatedcharmap)var r=shanka.relatedcharmap[o];for(var n in r){if(n==e.traditional)for(var s=r[n],i=0,l=s.length;l>i;i++){var d=s[i],a=shanka.cards[d];if(a.simplified==e.simplified&&a.traditional==e.traditional){t=a;break}}if(t)break}}if(t){var c=S(t.pinyin),u=S(e.pinyin);if(c==u)return e.getdefinition().length&&t.setdefinition(e.getdefinition()),e.getnotes().length&&t.setnotes(e.getnotes()),t}return null},p.prototype.write=function(){localStorage["c"+this.categoryid.toString(36)]=shanka.compress(JSON.stringify(this))},p.prototype.del=function(){for(var i=0,s=this.cardids.length;s>i;i++)for(var r=this.cardids[i],t=shanka.cards[r],e=0,n=t.categoryids.length;n>e;e++){var o=t.categoryids[e];if(o==this.categoryid){t.categoryids.splice(e,1),t.write();break}}for(var l in shanka.lessons)for(var a=shanka.lessons[l],e=0,n=a.categoryids.length;n>e;e++)if(a.categoryids[e]==this.categoryid){a.categoryids.splice(e,1),a.write();break}delete shanka.categories[this.categoryid],localStorage.removeItem("c"+this.categoryid.toString(36))},shanka.getuniquecategoryname=function(a){for(var i=2,t=a,e=!0;e;){e=!1;for(var n in shanka.categories)if(shanka.categories[n].name==t){e=!0;break}e&&(t=a+" ("+i+")",i++)}return t},shanka._addcategory=function(){var e=new p;if(e.name=document.getElementById("addcategoryname").value,""==e.name)return alert(STR.category_must_enter_name_error),!1;for(var t in shanka.categories){var a=shanka.categories[t];if(a.name==e.name)return alert(STR.category_name_exists_error),!1}return e.categoryid=shanka.getnextguid(),shanka.categories[e.categoryid]=e,shanka.addnewcategorytolessons(e.categoryid),e.write(),shanka.setsetting("lastcategoryid",e.categoryid),!0},shanka.categorysort=function(e,t){return 0==e?-1:0==t?1:shanka.categories[e].name.localeCompare(shanka.categories[t].name)},shanka.initcategories=function(){document.getElementById("gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("gen_edit_all_text").innerHTML=STR.gen_edit_all_text,shanka.initcategorylist(!1,!0)},shanka.initeditcategories=function(){document.getElementById("gen_duplicate_text").innerHTML=STR.gen_duplicate_text,document.getElementById("gen_delete_text").innerHTML=STR.gen_delete_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text,shanka.initcategorylist(!0,!1)},shanka.initcategorylist=function(u,r){for(var e=document.getElementById("categorylist"),c=e.getElementsByTagName("li"),o=c[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);var t=[];for(var s in shanka.categories)(parseInt(s)>0||r)&&t.push(parseInt(s));t.sort(shanka.categorysort);for(var n=0,l=t.length;l>n;n++){var d=t[n],i=shanka.categories[d],a=document.createElement("li");a.innerHTML=o.replace(/#ID#/g,""+i.categoryid).replace(/#NAME#/g,i.name).replace(/#ITEMS#/g,""+i.cardids.length),e.appendChild(a),u&&(a.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()})}},shanka.initaddcategory=function(){document.getElementById("category_name_label").innerHTML=STR.category_name_label,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text},shanka.initeditcategory=function(e){document.getElementById("category_name_label").innerHTML=STR.category_name_label,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text;var t=shanka.categories[e];document.getElementById("editcategoryname").value=t.name},shanka.initshowcategory=function(s,o,g){document.getElementById("category_edit_name").innerHTML=STR.category_edit_name,document.getElementById("gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("gen_edit_all_text").innerHTML=STR.gen_edit_all_text,document.getElementById("gen_duplicate_text").innerHTML=STR.gen_duplicate_text,document.getElementById("gen_remove_text").innerHTML=STR.gen_remove_text,document.getElementById("gen_delete_text").innerHTML=STR.gen_delete_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text;for(var a=document.getElementById("cards"),u=a.getElementsByTagName("li"),l=u[0].innerHTML;a.firstChild;)a.removeChild(a.firstChild);if(s in shanka.categories){var r=[],i=shanka.categories[s];if(shanka.setpagetitle(i.name),s>=0)for(var e=0,n=i.cardids.length;n>e;e++)r.push(i.cardids[e]);else for(var h in shanka.cards)r.push(parseInt(h));if(g){var t=document.createElement("li");t.innerHTML=l.replace(/#ID#/g,-1).replace(/#DESCRIPTION#/g,"<strong>"+STR.category_all_name+"</strong>");for(var e=0,n=t.children.length;n>e;e++)t.children[e].classList.contains("toggle")&&t.children[e].classList.add("all");a.appendChild(t),o&&(t.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()})}for(var d=shanka.filterlistpages(r),e=0,n=d.length;n>e;e++){var c=d[e],_=shanka.cards[c],t=document.createElement("li");t.innerHTML=l.replace(/#ID#/g,c).replace(/#DESCRIPTION#/g,_.liststring()),a.appendChild(t),o&&(t.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()
})}}},shanka.showcategories=function(){shanka.navigate({section:"categories"})},shanka.showcategory=function(e){shanka.navigate({section:"category",categoryid:e})},shanka.showcurrentcategory=function(){"categoryid"in shanka.state&&shanka.navigate({section:"category",categoryid:shanka.state.categoryid})},shanka.editcategory=function(){shanka.navigate({section:"editcategory",categoryid:shanka.state.categoryid})},shanka.dosavecategory=function(s){n();try{var s=parseInt(shanka.state.categoryid),e=shanka.categories[s],a=document.getElementById("editcategoryname").value;if(!a)return void alert(STR.category_must_enter_name_error);for(var r in shanka.categories){var o=shanka.categories[r];if(parseInt(r)!=s&&o.newname==a)return void alert(STR.category_name_exists_error)}e.name=a,e.write(),shanka.showcurrentcategory(),shanka.addtoresult(STR.category_saved_format.replace("{0}",e.name))}catch(e){i("dosavecategory",e)}t()},shanka.getallactivecategoryidsdict=function(i){var a={};for(var n in shanka.lessons){var e=shanka.lessons[n];if(e.enabled&&(!i||!e.reviewmode))for(var t=0,s=e.categoryids.length;s>t;t++){var r=e.categoryids[t];a[r]=!0}}return a},shanka.getallactivecategoryidslist=function(t){var e=[],a=shanka.getallactivecategoryidsdict(t);for(var i in a)e.push(parseInt(i));return e},shanka.getallactivequestionidsdict=function(){var a={};for(var i in shanka.lessons){var e=shanka.lessons[i];if(e.enabled)for(var t=0,n=e.questionids.length;n>t;t++){var s=e.questionids[t];a[s]=!0}}return a},shanka.getallactivequestionidslist=function(){var e=[],t=shanka.getallactivequestionidsdict();for(var a in t)e.push(parseInt(a));return e},shanka.editcategories=function(){shanka.navigate({section:"editcategories"})},shanka.doduplicatecategories=function(){n();try{var d=0;if(confirm(STR.category_duplicate_sel_confirm)){for(var l=Object.keys(shanka.categories),c=l.length;c--;){var r=l[c],o=document.getElementById("categoryselected"+r);if(o&&o.classList.contains("active")){var s=shanka.categories[r],e=JSON.parse(JSON.stringify(s));e.__proto__=p.prototype,e.categoryid=shanka.getnextguid(),e.name=shanka.getuniquecategoryname(s.name),e.current=!1,shanka.categories[e.categoryid]=e;for(var a=0,u=e.cardids.length;u>a;a++){var h=e.cardids[a],g=shanka.cards[h];g.categoryids.push(e.categoryid)}shanka.addnewcategorytolessons(e.categoryid),e.write(),d++}}shanka.editcategories(),shanka.addtoresult(STR.category_duplicated_format.replace("{0}",""+d))}}catch(e){i("duplicatecategories",e)}t()},shanka.dodeletecategories=function(){n();try{var e=0;if(confirm(STR.category_delete_selected_confirm)){for(var a=Object.keys(shanka.categories),s=a.length;s--;){var r=a[s],l=shanka.categories[r],o=document.getElementById("categoryselected"+r);o&&o.classList.contains("active")&&(l.del(),e++)}shanka.editcategories(),shanka.addtoresult(STR.category_deleted_format.replace("{0}",""+e))}}catch(e){i("deletecategories",e)}t()},shanka.addnewcategorytolessons=function(t){for(var a in shanka.lessons){var i=parseInt(a),e=shanka.lessons[i];e.allcategories&&(e.categoryids.push(t),e.write())}},h.prototype.write=function(){localStorage["q"+this.questionid.toString(36)]=shanka.compress(JSON.stringify(this))},h.prototype.del=function(){for(var a in shanka.lessons)for(var e=shanka.lessons[a],t=0,i=e.questionids.length;i>t;t++)if(e.questionids[t]==this.questionid){e.questionids.splice(t,1),e.write();break}delete shanka.questions[this.questionid],localStorage.removeItem("q"+this.questionid.toString(36))},h.prototype.generatename=function(){var e=[],t=[],a=[],i=[STR.study_field_question_name_simplified,STR.study_field_question_name_cursive,STR.study_field_question_name_calligraphy,STR.study_field_question_name_traditional,STR.study_field_question_name_pinyin,STR.study_field_question_name_definition,STR.study_field_question_name_notes],n=[STR.study_field_question_text_input_draw,STR.study_field_question_text_input_type];f(this.stem,e,c,i),f(this.answer,t,c,i),f(this.input,a,q,n),0==e.length&&(e=["..."]),0==t.length&&(t=["..."]),this.name="",a.length&&(this.name+=w(a)+": "),this.name+=w(e)+" -> "+w(t)},h.prototype.generatequestiontext=function(){var e=[],t=[],a=[STR.study_field_question_text_simplified,STR.study_field_question_text_cursive,STR.study_field_question_text_calligraphy,STR.study_field_question_text_traditional,STR.study_field_question_text_pinyin,STR.study_field_question_text_definition,STR.study_field_question_text_notes],i=[STR.study_field_question_text_input_draw,STR.study_field_question_text_input_type];f(this.answer,e,c,a),f(this.input,t,q,i),0==e.length&&(e=["..."]),this.questiontext=STR.question_whats_the_format.replace("{0}",w(e))},shanka.getuniquequestionname=function(a){for(var i=2,t=a,e=!0;e;){e=!1;for(var n in shanka.questions)if(shanka.questions[n].name==t){e=!0;break}e&&(t=a+" ("+i+")",i++)}return t},shanka.initquestions=function(){document.getElementById("gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("gen_edit_all_text").innerHTML=STR.gen_edit_all_text,shanka.initquestionlist(!1)},shanka.editquestions=function(){shanka.navigate({section:"editquestions"})},shanka.initeditquestions=function(){document.getElementById("gen_duplicate_text").innerHTML=STR.gen_duplicate_text,document.getElementById("gen_delete_text").innerHTML=STR.gen_delete_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text,shanka.initquestionlist(!0)},shanka.initquestionlist=function(i){for(var e=document.getElementById("questionlist"),n=e.getElementsByTagName("li"),s=n[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var a in shanka.questions){var r=shanka.questions[a],t=document.createElement("li");t.innerHTML=s.replace(/#ID#/g,a).replace(/#NAME#/g,r.name),i&&(t.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()}),e.appendChild(t)}},shanka.initshowquestion=function(a){document.getElementById("question_auto_generate_label").innerHTML=STR.question_auto_generate_label,document.getElementById("question_name_label").innerHTML=STR.question_name_label,document.getElementById("question_auto_generate_label2").innerHTML=STR.question_auto_generate_label2,document.getElementById("question_text_label").innerHTML=STR.question_text_label,document.getElementById("question_components_label").innerHTML=STR.question_components_label,document.getElementById("question_stem_label").innerHTML=STR.question_stem_label,document.getElementById("question_answer_label").innerHTML=STR.question_answer_label,document.getElementById("question_display_label").innerHTML=STR.question_display_label,document.getElementById("question_simplified_label").innerHTML=STR.question_simplified_label,document.getElementById("question_traditional_label").innerHTML=STR.question_traditional_label,document.getElementById("question_pinyin_label").innerHTML=STR.question_pinyin_label,document.getElementById("question_definition_label").innerHTML=STR.question_definition_label,document.getElementById("question_notes_label").innerHTML=STR.question_notes_label,document.getElementById("question_cursive_label").innerHTML=STR.question_cursive_label,document.getElementById("question_calligraphy_label").innerHTML=STR.question_calligraphy_label,document.getElementById("question_inputs_label").innerHTML=STR.question_inputs_label,document.getElementById("question_hanzi_touch_label").innerHTML=STR.question_hanzi_touch_label,document.getElementById("question_text_edit_label").innerHTML=STR.question_text_edit_label,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text;var e=null;a&&a in shanka.questions?e=shanka.questions[a]:(e=new h,e.name=shanka.getuniquequestionname(STR.question_new_name)),e.autogenname&&document.getElementById("questionnameauto").classList.add("active"),document.getElementById("questionname").value=e.name,e.autogentext&&document.getElementById("questiontextauto").classList.add("active"),document.getElementById("questiontext").value=e.questiontext,s(e.input,"draw")&&document.getElementById("questiondrawinput").classList.add("active"),s(e.input,"type")&&document.getElementById("questiontypeinput").classList.add("active");for(var i=0,n=c.length;n>i;i++){var t=c[i],r=document.getElementById(t+"stem"),o=document.getElementById(t+"answer"),l=document.getElementById(t+"display");s(e.stem,t)&&r.classList.add("active"),s(e.answer,t)&&o.classList.add("active"),s(e.display,t)&&l.classList.add("active")}shanka.onquestionchange()},shanka.addquestionoption=function(a){for(var i=document.getElementById(a+"options"),t=0;10>t;t++){var e=document.getElementById(a+"select"+t);if(!e){var n=document.getElementById("questionoptiontemplate");return e=document.createElement("select"),e.innerHTML=n.innerHTML,e.id=a+"select"+t,e.onchange=shanka.onquestionchange,i.appendChild(e),e}}return null},shanka.onquestionchange=function(){var t=[],a=[],i=[],n=[];shanka.getquestionbits(t,a,i,n);var e=new h;e.stem=t,e.answer=a,e.display=i,e.input=n,e.generatename(),e.generatequestiontext(),document.getElementById("questionnameauto").classList.contains("active")?(document.getElementById("questionname").disabled=!0,document.getElementById("questionname").value=e.name):document.getElementById("questionname").disabled=!1,document.getElementById("questiontextauto").classList.contains("active")?(document.getElementById("questiontext").disabled=!0,document.getElementById("questiontext").value=e.questiontext):document.getElementById("questiontext").disabled=!1},shanka.getquestionbits=function(i,n,s,a){for(var e=0,r=c.length;r>e;e++){var t=c[e],o=document.getElementById(t+"stem"),l=document.getElementById(t+"answer"),d=document.getElementById(t+"display");o.classList.contains("active")&&i.push(t),l.classList.contains("active")&&n.push(c[e]),d.classList.contains("active")&&s.push(c[e])}document.getElementById("questiondrawinput").classList.contains("active")&&a.push("draw"),document.getElementById("questiontypeinput").classList.contains("active")&&a.push("type")},shanka.doupdatequestion=function(){n();try{var a=[],s=[],r=[],o=[];if(shanka.getquestionbits(a,s,r,o),!a.length||!s.length)return alert(STR.question_stem_answer_error),void t();var l=document.getElementById("questionname").value,d=document.getElementById("questiontext").value;if(!l.length||!d.length)return alert(STR.question_name_text_error),void t();var e=null;if("questionid"in shanka.state){var c=parseInt(shanka.state.questionid);e=shanka.questions[c]}else e=new h,e.questionid=shanka.getnextguid(),shanka.addnewquestiontolessons(e.questionid);e.name=l,e.questiontext=d,e.autogenname=document.getElementById("questionnameauto").classList.contains("active"),e.autogentext=document.getElementById("questiontextauto").classList.contains("active"),e.input=o,e.stem=a,e.answer=s,e.display=r,shanka.questions[e.questionid]=e,e.write(),shanka.showquestions(),shanka.addtoresult(STR.question_saved_format.replace("{0}",e.name))}catch(e){i("doupdatequestion",e)}t()},shanka.doduplicatequestions=function(){n();try{var a=0;if(confirm(STR.question_duplicate_sel_confirm)){for(var s=Object.keys(shanka.questions),r=s.length;r--;){var o=s[r],l=document.getElementById("questionselected"+o);if(l&&l.classList.contains("active")){var d=shanka.questions[o],e=JSON.parse(JSON.stringify(d));e.__proto__=h.prototype,e.questionid=shanka.getnextguid(),e.name=shanka.getuniquequestionname(d.name),e.current=!1,shanka.questions[e.questionid]=e,shanka.addnewquestiontolessons(e.questionid),e.write(),a++}}shanka.editquestions(),shanka.addtoresult(STR.question_duplicated_format.replace("{0}",""+a))}}catch(e){i("duplicatequestions",e)}t()},shanka.dodeletequestions=function(){n();try{var e=0;if(confirm(STR.question_delete_selected_confirm)){for(var a=Object.keys(shanka.questions),s=a.length;s--;){var r=a[s],l=shanka.questions[r],o=document.getElementById("questionselected"+r);o&&o.classList.contains("active")&&(l.del(),e++)}shanka.editquestions(),shanka.addtoresult(STR.question_deleted_format.replace("{0}",""+e))}}catch(e){i("deletequestions",e)}t()},shanka.addnewquestiontolessons=function(t){for(var a in shanka.lessons){var i=parseInt(a),e=shanka.lessons[i];e.allquestions&&(e.questionids.push(t),e.write())}},l.prototype.write=function(){localStorage["a"+this.algorithmid.toString(36)]=shanka.compress(JSON.stringify(this))},l.prototype.del=function(){delete shanka.algorithms[this.algorithmid],localStorage.removeItem("a"+this.algorithmid.toString(36))},l.prototype.getdata=function(e){return e in this.data?this.data[e]:this._getdefault(e)},l.prototype._getdefault=function(t){var e="";switch(this.type){case"shanka":break;default:o("Algorithm._getdefault Unknown type: "+this.type)}switch(t){case"auto_unknown_min":e=7;break;case"daily_correct_target":e=50;break;case"daily_new_target":e=10;break;case"daily_time_target":e=20;break;case"default_kn_rate":e=.5;break;case"known_kn_rate":e=.8;break;case"default_lead_time":e=864e5;break;case"answer_1_factor":e=.33;break;case"answer_2_factor":e=.67;break;case"answer_3_factor":e=1;break;case"answer_4_factor":e=1.5;break;case"answer_5_factor":e=3;break;case"adjustment_speed":e=2;break;case"prob_of_any_random":e=.1;break;case"first_element_prob":e=.15;break;case"minimum_interval":e=4;break;default:o("Algorithm._getdefault Unknown key: "+t+" for type: "+this.type)}return e},l.prototype.getnextcardquestion=function(){var t=null,d=null;switch(0==shanka.queue.length&&shanka.rebuildqueue(),this.type){case"shanka":for(var m=this.getdata("prob_of_any_random"),h=Math.random(),n=Math.random(),a=0,e=shanka.queue.concat(),c=this.getdata("minimum_interval"),s=null,i=0;c>i&&(1==e.length&&(s=e[0]),shanka.history.length!=i);i++){var u=shanka.history[i],l=e.indexOf(u);-1!=l&&e.splice(l,1)}if(m>h)a=Math.floor(n*e.length);else var g=this.getdata("first_element_prob"),_=Math.log(1-n)/Math.log(1-g)-1,a=Math.ceil(_);(a>=e.length||0>a)&&(t=shanka.addcardtoqueueifallowed(),a=0,t||(t=s)),!t&&a<e.length&&(t=e[a]);var r=shanka.getallactivequestionidslist(),p=r[Math.floor(Math.random()*r.length)];d=shanka.questions[p];break;default:o("Algorithm.getnextcardquestion Unknown Algorithm: "+this.type)}return[t,d]},l.prototype.choosequestionbasedoncard=function(i){var e=null;switch(this.type){case"shanka":var t=shanka.getallactivequestionidslist(),a=t[Math.floor(Math.random()*t.length)];e=shanka.questions[a];break;default:o("Algorithm.choosequestionbasedoncard Unknown Algorithm: "+this.type)}return e},l.prototype.setcardscore=function(e,r,y){switch(this.type){case"shanka":for(var d=0,f=r.answer.length;f>d;d++)for(var t=r.answer[d],n=y[t],l=0,p=r.stem.length;p>l;l++){var a=r.stem[l],i=e.getdata("kn_rate",a,t),m=e.getdata("last_time",a,t),c=e.getdata("next_time",a,t),u=e.getdata("last_score",a,t),h=e.getdata("question_count",a,t),g=e.getdata("correct_count",a,t),_=(new Date).getTime(),b=this.getdata("default_lead_time"),s=this.getdata("adjustment_speed");1==n?i/=Math.pow(s,2):2==n?i/=s:3==n?i*=1.00001:i=4==n?1+(i-1)/s:1+(i-1)/Math.pow(s,2),m=_,c=_+b,u=n,h+=1,n>3&&(g+=1),e.setdata("kn_rate",a,t,i),e.setdata("last_time",a,t,m),e.setdata("next_time",a,t,c),e.setdata("last_score",a,t,u),e.setdata("question_count",a,t,h),e.setdata("correct_count",a,t,g)}e.kn_rate=e.getminactive("kn_rate"),e.next_time=e.getminactive("next_time"),e.last_time=e.getmaxactive("last_time"),e.test_count+=1,e.write(),shanka.removefromqueue(e),shanka.removefromhistory(e),shanka.addtoqueue(e),shanka.addtohistory(e);break;default:o("Algorithm.setcardscore Unknown Algorithm: "+this.type)}},l.prototype.queuecompare=function(t,a){var e=0;switch(this.type){case"shanka":e=t.kn_rate-a.kn_rate,0==e&&(e=a.last_time-t.last_time);break;default:o("Algorithm.queuecompare Unknown Algorithm: "+this.type)}return e};var u={};u.trouble_shown=!1,u.learned_shown=!1,u.learning_shown=!1,l.prototype.getqueuedisplaytext=function(){var t=0,e="";switch(this.type){case"shanka":t=Math.round(100*card.kn_rate),e=STR.algorithm_knowledge_rate_display+": "+t+"%",t<Math.round(100*this.getdata("default_kn_rate"))?u.trouble_shown||(e+=" ("+STR.algorithm_knowledge_rate_trouble+")",u.trouble_shown=!0):card.kn_rate>this.getdata("known_kn_rate")?u.learned_shown||(e+=" ("+STR.algorithm_knowledge_rate_learned+")",u.learned_shown=!0):u.learning_shown||(e+=" ("+STR.algorithm_knowledge_rate_learning+")",u.learning_shown=!0);break;default:o("Algorithm.getqueuedisplaytext Unknown Algorithm: "+this.type)}return[t,e]},l.prototype.gethistorydisplaytext=function(a){var e="";switch(this.type){case"shanka":var i=new Date(a.last_time),t=new Date;if(e=i.toLocaleDateString(),e==t.toLocaleDateString())e+=" ("+STR.algorithm_history_today+" )";else{var n=new Date(t.getTime()-864e5);e==n.toLocaleDateString()&&(e+=" ("+STR.algorithm_history_yesterday+" )")}break;default:o("Algorithm.gethistorydisplaytext Unknown Algorithm: "+this.type)}return e},shanka.getuniquealgorithmname=function(a){for(var i=2,t=a,e=!0;e;){e=!1;for(var n in shanka.algorithms)if(shanka.algorithms[n].name==t){e=!0;break}e&&(t=a+" ("+i+")",i++)}return t},shanka.showalgorithms=function(){shanka.navigate({section:"algorithms"})},shanka.addalgorithm=function(){shanka.navigate({section:"algorithm-add"})},shanka.showalgorithm=function(e){var t=shanka.algorithms[e];shanka.navigate({section:"algorithm-"+t.type,algorithmid:""+e})},shanka.editalgorithms=function(){shanka.navigate({section:"editalgorithms"})},shanka.onalgorithmcheckclick=function(t){var e=shanka.algorithms[t];e&&shanka.algorithm.algorithmid!=e.algorithmid&&(shanka.algorithm.current=!1,shanka.algorithm.write(),shanka.algorithm=e,shanka.algorithm.current=!0,shanka.algorithm.write())},shanka.doduplicatealgorithms=function(){n();try{var a=0;if(confirm(STR.algorithm_duplicate_selected_confirm)){for(var s=Object.keys(shanka.algorithms),r=s.length;r--;){var o=s[r],d=document.getElementById("algorithmselected"+o);if(d&&d.classList.contains("active")){var c=shanka.algorithms[o],e=JSON.parse(JSON.stringify(c));e.__proto__=l.prototype,e.algorithmid=shanka.getnextguid(),e.name=shanka.getuniquealgorithmname(c.name),e.current=!1,shanka.algorithms[e.algorithmid]=e,e.write(),a++}}shanka.editalgorithms(),shanka.addtoresult(STR.algorithm_duplicated_format.replace("{0}",""+a))}}catch(e){i("duplicatealgorithms",e)}t()},shanka.dodeletealgorithms=function(){n();try{var a=0;if(confirm(STR.algorithm_delete_selected_confirm)){for(var s=Object.keys(shanka.algorithms),r=s.length;r--;){var e=s[r],o=shanka.algorithms[e],l=document.getElementById("algorithmselected"+e);if(l&&l.classList.contains("active")){if(1==Object.keys(shanka.algorithms).length){alert(STR.algorithm_cannot_delete_last_error);break}o.del(),a++}}if(!(shanka.algorithm.algorithmid in shanka.algorithms))for(var e in shanka.algorithms)if(o.enabled){shanka.algorithm=shanka.algorithms[e],shanka.algorithm.current=!0,shanka.algorithm.write();break}shanka.editalgorithms(),shanka.addtoresult(STR.algorithm_deleted_format.replace("{0}",""+a))}}catch(e){i("deletealgorithms",e)}t()},shanka.doaddshankaalgorithm=function(){shanka.navigate({section:"algorithm-shanka"})},shanka.dosaveshankaalgorithm=function(){n();try{var d=document.getElementById("editalgorithmname").value,c=parseInt(document.getElementById("auto_unknown_min").value),h=parseInt(document.getElementById("daily_correct_target").value),g=parseInt(document.getElementById("daily_new_target").value),m=parseInt(document.getElementById("daily_time_target").value),s=parseFloat(document.getElementById("default_kn_rate").value),a=parseFloat(document.getElementById("known_kn_rate").value),u=parseFloat(document.getElementById("adjustment_speed").value),r=parseFloat(document.getElementById("prob_of_any_random").value),o=parseFloat(document.getElementById("first_element_prob").value),_=parseInt(document.getElementById("minimum_interval").value);if(!d.length)return alert(STR.algorithm_name_cant_be_empty_error),void t();if(1>c)return alert(STR.algorithm_minimum_unknown_card_positive_int_error),void t();if(1>h)return alert(STR.algorithm_daily_correct_target_positive_int_error),void t();if(1>g)return alert(STR.algorithm_daily_new_target_positive_int_error),void t();if(1>m)return alert(STR.algorithm_daily_minutes_target_positive_int_error),void t();if(0>s||s>1)return alert(STR.algorithm_default_knowledge_rate_0_1_error),void t();if(0>a||a>1)return alert(STR.algorithm_threshold_knowledge_rate_0_1_error),void t();if(0>=u)return alert(STR.algorithm_adjustment_speed_positive_error),void t();if(0>r||r>1)return alert(STR.algorithm_any_element_probability_0_1_error),void t();if(0>o||o>1)return alert(STR.algorithm_first_element_probability_0_1_error),void t();if(0>_)return alert(STR.algorithm_minimum_interval_postive_0_error),void t();var e=null;if("algorithmid"in shanka.state){var p=parseInt(shanka.state.algorithmid);e=shanka.algorithms[p]}else e=new l,e.algorithmid=shanka.getnextguid(),e.type="shanka";e.name=d,e.setdata("auto_unknown_min",c),e.setdata("daily_correct_target",h),e.setdata("daily_new_target",g),e.setdata("daily_time_target",m),e.setdata("default_kn_rate",s),e.setdata("known_kn_rate",a),e.setdata("adjustment_speed",u),e.setdata("prob_of_any_random",r),e.setdata("first_element_prob",o),e.setdata("minimum_interval",_),shanka.algorithms[e.algorithmid]=e,e.write(),shanka.showalgorithms(),shanka.addtoresult(STR.algorithm_saved_format.replace("{0}",e.name))}catch(e){i("doexporttextfile",e)}t()},shanka.initalgorithms=function(){document.getElementById("algorithm_current_label").innerHTML=STR.algorithm_current_label,document.getElementById("gen_add_text").innerHTML=STR.gen_add_text,document.getElementById("gen_edit_all_text").innerHTML=STR.gen_edit_all_text,shanka.initalgorithmlist(!1);var e=document.getElementById("algorithmenabled"+shanka.algorithm.algorithmid);e.classList.add("active")},shanka.initeditalgorithms=function(){document.getElementById("gen_duplicate_text").innerHTML=STR.gen_duplicate_text,document.getElementById("gen_delete_text").innerHTML=STR.gen_delete_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text,shanka.initalgorithmlist(!0)},shanka.initalgorithmlist=function(n){for(var t=document.getElementById("algorithmlist"),s=t.getElementsByTagName("li"),r=s[0].innerHTML;t.firstChild;)t.removeChild(t.firstChild);for(var o in shanka.algorithms){var a=shanka.algorithms[o],e=document.createElement("li");if(e.innerHTML=r.replace(/#ID#/g,""+a.algorithmid).replace(/#NAME#/g,a.name),n&&(e.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()}),!a.enabled){e.classList.add("disabled");for(var i=0,l=e.children.length;l>i;i++){var d=e.children[i];d.removeAttribute("href")}}t.appendChild(e)}},shanka.initaddalgorithms=function(){document.getElementById("algorithm_choose_label").innerHTML=STR.algorithm_choose_label,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text},shanka.initshankaalgorithm=function(t){document.getElementById("page_algo_shanka_title").innerHTML=STR.page_algo_shanka_title,document.getElementById("algorithm_name_label").innerHTML=STR.algorithm_name_label,document.getElementById("algorithm_study_settings").innerHTML=STR.algorithm_study_settings,document.getElementById("algorithm_minimum_unknown_cards").innerHTML=STR.algorithm_minimum_unknown_cards,document.getElementById("algorithm_daily_correct_target").innerHTML=STR.algorithm_daily_correct_target,document.getElementById("algorithm_daily_new_target").innerHTML=STR.algorithm_daily_new_target,document.getElementById("algorithm_daily_minutes_target").innerHTML=STR.algorithm_daily_minutes_target,document.getElementById("algorithm_parameters").innerHTML=STR.algorithm_parameters,document.getElementById("algorithm_default_knowledge_rate").innerHTML=STR.algorithm_default_knowledge_rate,document.getElementById("algorithm_threshold_kn_rate").innerHTML=STR.algorithm_threshold_kn_rate,document.getElementById("algorithm_adjustment_speed").innerHTML=STR.algorithm_adjustment_speed,document.getElementById("algorithm_any_element_probability").innerHTML=STR.algorithm_any_element_probability,document.getElementById("algorithm_first_element_prob").innerHTML=STR.algorithm_first_element_prob,document.getElementById("algorithm_minimum_interval").innerHTML=STR.algorithm_minimum_interval,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text;var e=null;t?e=shanka.algorithms[t]:(e=new l,e.name=shanka.getuniquealgorithmname(STR.algorithm_new_name),e.type="shanka"),document.getElementById("editalgorithmname").value=e.name,document.getElementById("auto_unknown_min").value=""+e.getdata("auto_unknown_min"),document.getElementById("daily_correct_target").value=""+e.getdata("daily_correct_target"),document.getElementById("daily_new_target").value=""+e.getdata("daily_new_target"),document.getElementById("daily_time_target").value=""+e.getdata("daily_time_target"),document.getElementById("default_kn_rate").value=""+e.getdata("default_kn_rate"),document.getElementById("known_kn_rate").value=""+e.getdata("known_kn_rate"),document.getElementById("adjustment_speed").value=""+e.getdata("adjustment_speed"),document.getElementById("prob_of_any_random").value=""+e.getdata("prob_of_any_random"),document.getElementById("first_element_prob").value=""+e.getdata("first_element_prob")},y.prototype.write=function(){localStorage["p"+this.progressid.toString(36)]=shanka.compress(JSON.stringify(this))},y.prototype.del=function(){delete shanka.progress[this.progressid],localStorage.removeItem("p"+this.progressid.toString(36))},shanka.initprogress=function(){document.getElementById("progress_total_label").innerHTML=STR.progress_total_label,document.getElementById("progress_daily_label").innerHTML=STR.progress_daily_label;for(var p=document.getElementById("progresstotallist"),y=document.getElementById("progressdailylist"),h=shanka.filterlistpages(shanka.progress),i=0,f=h.length;f>i;i++){var e=h[i],o=Math.floor(e.date/1e4),s=Math.floor(e.date/100)-100*o,g=e.date-1e4*o-100*s,a=""+o+"-";10>s&&(a+="0"),a+=""+s+"-",10>g&&(a+="0"),a+=""+g+": ";var r=e.totaltimestudied,l=e.totalitemsstudied,d=e.totalcardsknown,u=STR.progress_list_format,n=shanka.getprogressvalunit(r),m=a+u.replace("{0}",""+l).replace("{1}",""+d).replace("{2}",n[0]+" "+n[1]),t=document.createElement("li"),_=document.createTextNode(m);if(t.appendChild(_),t.classList.add("norightpaddinglist"),t.style="padding-right: 10px;",p.appendChild(t),i<shanka.progress.length-1){var c=shanka.progress[i+1];r=e.totaltimestudied-c.totaltimestudied,l=e.totalitemsstudied-c.totalitemsstudied,d=e.totalcardsknown-c.totalcardsknown}var n=shanka.getprogressvalunit(r),b=a+u.replace("{0}",""+l).replace("{1}",""+d).replace("{2}",n[0]+" "+n[1]),t=document.createElement("li"),_=document.createTextNode(b);t.appendChild(_),t.classList.add("norightpaddinglist"),t.style="padding-right: 10px;",y.appendChild(t)}},shanka.getprogressvalunit=function(e){var t=["",""],a=0;6e4>e?(a=e/1e3,t[1]=STR.progress_seconds):36e5>e?(a=e/6e4,t[1]=STR.progress_minutes):864e5>e?(a=e/36e5,t[1]=STR.progress_hours):6048e5>e?(a=e/864e5,t[1]=STR.progress_days):31536e6>e?(a=e/252e5,t[1]=STR.progress_weeks):(a=e/1314e6,t[1]=STR.progress_hours);var i=Math.round(10*a)/10;return t[0]=""+i,t},shanka.getcurrentdayid=function(){var e=new Date,t=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();return t},shanka.updateCurrentProgress=function(i,n){var a=shanka.getcurrentdayid(),e=shanka.progress[0];if(!e||a!=e.date){var t=new y;t.progressid=shanka.getnextguid(),t.date=a,t.totalcardsknown=shanka.queue.length-shanka.countqueueunknown(),t.totalitemsstudied=e?e.totalitemsstudied:0,t.totaltimestudied=e?e.totaltimestudied:0,shanka.progress.unshift(t),e=t}e.totalitemsstudied+=1,e.totalcardsknown+=n,e.totaltimestudied+=i,e.write()},shanka.ensuretodayhasprogress=function(){var t=shanka.getcurrentdayid();if(!shanka.progress.length||shanka.progress[0].date!=t){var e=new y;e.date=t,shanka.progress.unshift(e),e.write()}},shanka.progresscompare=function(e,t){return t.date-e.date},shanka.getnextguid=function(){var e=shanka.nextguid;return shanka.nextguid++,e},shanka.checkguid=function(e){e>=shanka.nextguid&&(shanka.nextguid=e+1)},shanka.compress=function(e){return d.compressToUTF16(e)},shanka.decompress=function(e){return d.decompressFromUTF16(e)},shanka.readall=function(){for(var I=[],n=0,T=localStorage.length;T>n;n++){var t=localStorage.key(n);if(t){if("n"!=t.charAt(0)&&"d"!=t.charAt(0)&&"x"!=t.charAt(0)){var k=null,b=null;try{if("language"==t)continue;k=localStorage.getItem(t),b=shanka.decompress(k);var e=JSON.parse(b);if("settings"==t)shanka.settings=e;else if("state"==t)shanka.state=e;else if("f"==t.charAt(0)){var d=new r;d.fromarray(e),shanka.cards[d.cardid]=d,shanka.checkguid(d.cardid)}else"l"==t.charAt(0)?(e.__proto__=_.prototype,shanka.lessons[e.lessonid]=e,shanka.checkguid(e.lessonid)):"a"==t.charAt(0)?(e.__proto__=l.prototype,shanka.algorithms[e.algorithmid]=e,shanka.checkguid(e.algorithmid),e.current&&(shanka.algorithm=e)):"q"==t.charAt(0)?(e.__proto__=h.prototype,shanka.questions[e.questionid]=e,shanka.checkguid(e.questionid)):"c"==t.charAt(0)?(e.__proto__=p.prototype,shanka.categories[e.categoryid]=e,shanka.checkguid(e.categoryid)):"p"==t.charAt(0)?(e.__proto__=y.prototype,shanka.progress.push(e),shanka.checkguid(e.progressid)):(o("readall： Local storage key with unknown prefix: "+t),u=!0)}catch(e){i("readall key:"+(t+""),e),k&&console.log("readall failed for key: "+(t+"")+" localStorageItem: [["+k+"]]"),b&&console.log("readall failed for key: "+(t+"")+" decompressed: "+b+"]]"),I.push(t)}}}else console.log("readall null key i:"+(n+""))}var t=null,n=0;try{for(n=0,T=I.length;T>n;n++)t=I[n],localStorage.removeItem(t)}catch(e){i("readall deleting i:"+(n+"")+" key:"+(t+""),e)}if(!(0 in shanka.categories)){var f=new p;f.name=STR.category_uncategorised_name,f.categoryid=0,shanka.categories[f.categoryid]=f,f.write()}if(E(shanka.algorithms)){shanka.EnsureAlgorithmBeginnerExists();var x=shanka.EnsureAlgorithmIntermediateExists();shanka.EnsureAlgorithmAdvancedExists(),shanka.EnsureAlgorithmReviewExists(),shanka.EnsureAlgorithmRandomExists(),shanka.EnsureAlgorithmRandomReviewExists(),shanka.EnsureAlgorithmPlecoExists(),shanka.EnsureAlgorithmSkritterExists(),x.current=!0,shanka.algorithm=x,x.write()}var u=!1;for(var M in shanka.lessons){for(var a=shanka.lessons[M],c=!1,n=a.categoryids.length;n--;){var v=a.categoryids[n];v in shanka.categories||(a.categoryids.splice(n,1),o("readall: data integrity error: removing missing category "+v+" from lesson "+a.lessonid+" "+a.name),c=!0,u=!0)}for(var n=a.questionids.length;n--;){var w=a.questionids[n];w in shanka.questions||(a.questionids.splice(n,1),o("readall: data integrity error: removing missing question "+w+" from lesson "+a.lessonid+" "+a.name),c=!0,u=!0)}if(a.allquestions)for(var S in shanka.questions){var w=parseInt(S);s(a.questionids,w)||(o("readall: data integrity error: lesson "+a.lessonid+" "+a.name+" with 'all' questions set was missing question id "+S),a.questionids.push(w),c=!0,u=!0)}if(a.allcategories)for(var g in shanka.categories){var v=parseInt(g);s(a.categoryids,v)||(o("readall: data integrity error: lesson "+a.lessonid+" "+a.name+" with 'all' categories set was missing category id "+g),a.categoryids.push(v),c=!0,u=!0)}c&&a.write()}for(var g in shanka.categories){for(var m=shanka.categories[g],c=!1,n=m.cardids.length;n--;){var q=m.cardids[n],d=shanka.cards[q];d?d.categoryids.push(parseInt(g)):(o("readall: data integrity error: removing missing card "+q+" from category "+g+" "+m.name),m.cardids.splice(n,1),c=!0,u=!0)}c&&m.write()}var L=shanka.categories[0],c=!1;for(var B in shanka.cards){var d=shanka.cards[parseInt(B)];0==d.categoryids.length&&(o("readall: data integrity error: setting card to uncategorised: "+B+" "+d.simplified+"["+d.traditional+"]"),d.categoryids.push(L.categoryid),L.cardids.push(parseInt(B)),c=!0,u=!0)}c&&L.write(),shanka.rebuildqueue(),shanka.rebuildhistory(),shanka.progress.sort(function(e,t){return shanka.progresscompare(e,t)
}),u&&alert(STR.local_storage_errors_detected_resolved_error)},shanka.initlocal=function(){window.applicationCache&&(applicationCache.status===applicationCache.UPDATEREADY?shanka.confirmandupdate():(applicationCache.addEventListener("updateready",shanka.confirmandupdate),applicationCache.status===applicationCache.UPDATEREADY&&shanka.confirmandupdate()));try{"0"==shanka.getsetting("currentversionnum")&&(shanka.setsetting("currentversionnum",shanka.getOnlineAppVersion()),shanka.setsetting("currentversiondate",shanka.getOnlineAppBuildDate()))}catch(e){console.log("Must be offline, couldn't get online app version: "+e.message)}},shanka.setlocalversioninfo=function(){document.getElementById("currentversionnum").innerHTML=shanka.getsetting("currentversionnum"),document.getElementById("currentversiondate").innerHTML=shanka.getsetting("currentversiondate")},shanka.redownload=function(){shanka.updateappcachestatus(),window.location.reload(),shanka.updateappcachestatus();try{shanka.setsetting("currentversionnum","0"),shanka.setsetting("currentversionnum",shanka.getOnlineAppVersion()),shanka.setsetting("currentversiondate",shanka.getOnlineAppBuildDate())}catch(e){console.log("shanka.redownload "+e.message)}setTimeout(shanka.updateappcachestatus,1e3),setTimeout(shanka.updateappcachestatus,2e3),setTimeout(shanka.updateappcachestatus,3e3),setTimeout(shanka.updateappcachestatus,4e3),setTimeout(shanka.updateappcachestatus,5e3),setTimeout(shanka.updateappcachestatus,6e3),setTimeout(shanka.updateappcachestatus,7e3),setTimeout(shanka.updateappcachestatus,8e3),setTimeout(shanka.updateappcachestatus,9e3),setTimeout(shanka.updateappcachestatus,1e4)},shanka.getappcachestatus=function(){var e="";switch(applicationCache.status){case applicationCache.UNCACHED:e="UNCACHED";break;case applicationCache.IDLE:e="IDLE";break;case applicationCache.CHECKING:e="CHECKING";break;case applicationCache.DOWNLOADING:e="DOWNLOADING";break;case applicationCache.UPDATEREADY:e="UPDATEREADY";break;case applicationCache.OBSOLETE:e="OBSOLETE";break;default:e="UKNOWN CACHE STATUS"}return e},shanka.confirmandupdate=function(){if(confirm(STR.app_new_version_download_confirm)){window.location.reload();try{shanka.setsetting("currentversionnum","0"),shanka.setsetting("currentversionnum",shanka.getOnlineAppVersion()),shanka.setsetting("currentversiondate",shanka.getOnlineAppBuildDate())}catch(e){console.log("shanka.redownload "+e.message)}}},shanka.initcardinfo=function(a){document.getElementById("infostudycurrent").innerHTML=STR.study_study_text,document.getElementById("study_practice_short_text").innerHTML=STR.study_practice_short_text,document.getElementById("study_edit_text").innerHTML=STR.study_edit_text,document.getElementById("page_categories_title").innerHTML=STR.page_categories_title,document.getElementById("card_related_flashcards_label").innerHTML=STR.card_related_flashcards_label,document.getElementById("card_stroke_order_label").innerHTML=STR.card_stroke_order_label,document.getElementById("card_historical_oracle_label").innerHTML=STR.card_historical_oracle_label,document.getElementById("card_historical_bronze_label").innerHTML=STR.card_historical_bronze_label,document.getElementById("card_historical_greatseal_label").innerHTML=STR.card_historical_greatseal_label,document.getElementById("card_historical_smallseal_label").innerHTML=STR.card_historical_smallseal_label,document.getElementById("card_historical_bronze_label").innerHTML=STR.card_historical_bronze_label;var a=parseInt(shanka.state.cardid),e=shanka.cards[a],i=e.simptradtogether(),t=document.getElementById("pagecontent");t.innerHTML=t.innerHTML.replace(/#HANZI#/g,i).replace(/#TRADITIONAL#/g,e.traditional).replace(/#PINYIN#/g,e.pinyin).replace(/#DEFINITION#/g,e.getdefinition()).replace(/#NOTES#/g,e.getnotes()),shanka.initstudyinfocategories(e),shanka.initstudyinforelatedcards(e),shanka.initstudyinfostrokeorder(e),shanka.initstudyinfoetymology(e),x()||(document.getElementById("infoplecotop").style.display="none"),document.getElementById("study-back-button").disabled=0==shanka.studybackstack.length,document.getElementById("study-fwd-button").disabled=0==shanka.studyfwdstack.length,document.getElementById("infostudycurrent").style.display="cardid"in shanka.state&&"questionid"in shanka.state?"inline":"none"},shanka.initstudy=function(){shanka.studystarttime=new Date;var y=parseInt(shanka.state.cardid),a=shanka.cards[y],p=parseInt(shanka.state.questionid),t=shanka.questions[p];if(!a)return alert(STR.study_invalid_card_id_error+(""+y)),void shanka.showmain();if(!t)return alert(STR.study_invalid_question_id_error+(""+p)),void shanka.showmain();s(t.input,"draw")?a.issentence()?(document.getElementById("sentencehanziouter").style.display="block",document.getElementById("touchpaintouter").style.display="none",shanka.initstudysentencehanzi(a)):(document.getElementById("sentencehanziouter").style.display="none",document.getElementById("touchpaintouter").style.display="inline",shanka.inittouchpaint(5)):(document.getElementById("sentencehanziouter").style.display="none",document.getElementById("touchpaintouter").style.display="none"),"true"==shanka.getsetting("autoadvance")?document.getElementById("studysubmit").style.display="none":(document.getElementById("studysubmit").style.display="block",document.getElementById("studysubmit").classList.add("disabled")),shanka.updateStudyReveal(),document.getElementById("questionstemtext").innerHTML=t.questiontext;for(var L=shanka.getsetting("rating1enable"),E=shanka.getsetting("rating2enable"),k=shanka.getsetting("rating3enable"),w=shanka.getsetting("rating4enable"),v=shanka.getsetting("rating5enable"),g=0,b=c.length;b>g;g++){var e=c[g],_=document.getElementById("answertable"+e),l=document.getElementById("answertext"+e);s(t.answer,e)?(_.style.display="inline",l.style.display="block",l.innerHTML=a.getfield(e)):(_.style.display="none",l.style.display="none",l.innerHTML="");var d=document.getElementById("answerbtn"+e+"1"),r=document.getElementById("answerbtn"+e+"2"),o=document.getElementById("answerbtn"+e+"3"),n=document.getElementById("answerbtn"+e+"4"),i=document.getElementById("answerbtn"+e+"5");d.style.display="false"==L?"none":"inline",r.style.display="false"==E?"none":"inline",o.style.display="false"==k?"none":"inline",n.style.display="false"==w?"none":"inline",i.style.display="false"==v?"none":"inline",d.innerHTML=shanka.getsetting("rating1title"),r.innerHTML=shanka.getsetting("rating2title"),o.innerHTML=shanka.getsetting("rating3title"),n.innerHTML=shanka.getsetting("rating4title"),i.innerHTML=shanka.getsetting("rating5title"),d.classList.remove("answerbtnsel1"),r.classList.remove("answerbtnsel2"),o.classList.remove("answerbtnsel3"),n.classList.remove("answerbtnsel4"),i.classList.remove("answerbtnsel5"),d.classList.remove("answerbtntouch1"),r.classList.remove("answerbtntouch2"),o.classList.remove("answerbtntouch3"),n.classList.remove("answerbtntouch4"),i.classList.remove("answerbtntouch5"),d.classList.add("answerbtn1"),r.classList.add("answerbtn2"),o.classList.add("answerbtn3"),n.classList.add("answerbtn4"),i.classList.add("answerbtn5");var l=document.getElementById("answertext"+e);l.style.background="#FFFFFF";var h=document.getElementById(e+"stem"),u=document.getElementById(e+"display");if(s(t.stem,e)){var I="pinyin"==e||"notes"==e||"definition"==e?"block":"inline";h.style.display=I,h.innerHTML=a.getfield(e)}else h.style.display="none",h.innerHTML="";s(t.display,e)?(u.style.display="inline",u.innerHTML=a.getfield(e)):(u.style.display="none",u.innerHTML=""),e in shanka.state&&shanka.selectanswer(e,parseInt(shanka.state[e]),!1)}document.getElementById("answers").ontouchstart=shanka.doontouchstart,document.getElementById("answers").ontouchmove=shanka.doontouchmove,document.getElementById("answers").ontouchcancel=shanka.doontouchend,document.getElementById("answers").ontouchend=shanka.doontouchend,document.getElementById("answers").onmousedown=shanka.doansweronmousedown,document.getElementById("answers").onmouseover=shanka.doansweronmouseover,document.getElementById("answers").onmouseup=shanka.doansweronmouseup,s(t.input,"type")?(document.getElementById("studytextinput").focus(),document.getElementById("textanswer").style.display="inline",document.getElementById("studytextinput").value=""):"reveal"in shanka.state&&"true"==shanka.state.reveal||(document.getElementById("textanswer").style.display="none"),a.simplified==a.traditional&&((s(t.stem,"simplified")||s(t.stem,"traditional")||s(t.answer,"simplified")||s(t.answer,"traditional"))&&(document.getElementById("simplifieddisplay").style.display="none",document.getElementById("traditionaldisplay").style.display="none"),(s(t.stem,"cursive")||s(t.answer,"cursive"))&&(document.getElementById("cursivedisplay").style.display="none"),(s(t.stem,"callig")||s(t.answer,"callig"))&&(document.getElementById("calligdisplay").style.display="none")),x()||(document.getElementById("studyplecotop").style.display="none"),shanka.updatecharbutton(),shanka.updateminitpmorebuttons();var m=document.getElementById("study-back-button"),f=document.getElementById("study-fwd-button");m.style.display="inline",m.disabled=0==shanka.studybackstack.length,f.style.display="inline",f.disabled=0==shanka.studyfwdstack.length,document.getElementById("studyinfo").style.display="inline",document.getElementById("studycurrent").style.display="none",document.getElementById("studypractice").style.display="inline",document.getElementById("studyedit").style.display="inline",document.getElementById("practicetext").style.display="none",document.getElementById("practicesearch").style.display="none",document.getElementById("studydisplay").style.display="inline",document.getElementById("studytopbits").style.display="inline",document.getElementById("searchresults").style.display="none",document.getElementById("study").style.display="inline"},shanka.initpractice=function(){shanka.inittouchpaint(10),document.getElementById("studycurrent").style.display="cardid"in shanka.state&&"questionid"in shanka.state?"inline":"none","cardid"in shanka.state?(document.getElementById("studyinfo").style.display="inline",document.getElementById("studyedit").style.display="inline",document.getElementById("studyplecotop").style.display=x()?"inline":"none",document.getElementById("study-back-button").style.display="inline",document.getElementById("study-back-button").disabled=0==shanka.studybackstack.length,document.getElementById("study-fwd-button").style.display="inline",document.getElementById("study-fwd-button").disabled=0==shanka.studyfwdstack.length):(document.getElementById("study-back-button").style.display="none",document.getElementById("study-fwd-button").style.display="none",document.getElementById("studyinfo").style.display="none",document.getElementById("studyedit").style.display="none",document.getElementById("studyplecotop").style.display="none"),document.getElementById("practicetext").value=shanka.calculatetraceword(),document.getElementById("practicetext").style.display="inline",document.getElementById("practicesearch").style.display="inline",document.getElementById("touchpaintouter").style.display="inline",document.getElementById("canvastoolbar").style.display="block",document.getElementById("touchpaintlayers").style.display="block",document.getElementById("tracechar").style.display="inline",shanka.updatecharbutton(),shanka.updateminitpmorebuttons(),document.getElementById("studytopbits").style.display="none",document.getElementById("answers").style.display="none",document.getElementById("studydisplay").style.display="none",document.getElementById("studypractice").style.display="none",document.getElementById("studysubmit").style.display="none",document.getElementById("searchresults").style.display="none",document.getElementById("sentencehanziouter").style.display="none",document.getElementById("study").style.display="inline"},shanka.initstudysentencehanzi=function(n){for(var e=document.getElementById("sentencehanzibuttons");e.firstChild;)e.removeChild(e.firstChild);for(var t=n.getsentencewords();t.length;){var i=Math.floor(Math.random()*t.length),s=t[i];t.splice(i,1);var a=document.createElement("button");a.innerHTML=s,a.classList.add("sentencebutton"),a.onclick=shanka.sentencebuttonclicked,e.appendChild(a);var r=document.createTextNode(" ");e.appendChild(r)}document.getElementById("sentencehanziinput").value=""},shanka.sentencebuttonclicked=function(n){var e=n.target,a=e.innerHTML,i=document.getElementById("sentencehanziinput"),t=i.value,a=e.innerHTML;e.classList.contains("sentenceselected")?(e.classList.remove("sentenceselected"),t=t.replace(a,"")):(e.classList.add("sentenceselected"),t+=a),i.value=t},shanka.initstudyinforelatedcards=function(s){for(var e=document.getElementById("relatedcards"),r=e.getElementsByTagName("li"),o=r[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var t=shanka.getrelatedcardids(s.cardid),a=0,l=t.length;l>a;a++){var d=t[a],i=shanka.cards[d],n=document.createElement("li");n.innerHTML=o.replace(/#DESCRIPTION#/g,i.liststring()).replace(/#ID#/g,""+i.cardid),e.appendChild(n)}0==t.length&&(document.getElementById("relatedflashcards").style.display="none")},shanka.initstudyinfocategories=function(i){for(var e=document.getElementById("categorylist"),s=e.getElementsByTagName("li"),r=s[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var t=0,o=i.categoryids.length;o>t;t++){var l=i.categoryids[t],a=shanka.categories[l],n=document.createElement("li");n.innerHTML=r.replace(/#ID#/g,""+a.categoryid).replace(/#NAME#/g,a.name).replace(/#ITEMS#/g,""+a.cardids.length),e.appendChild(n)}},shanka.initstudyinfostrokeorder=function(e){for(var i=document.getElementById("sorder"),h=document.getElementById("sorderdiv"),u=h.innerHTML;i.firstChild;)i.removeChild(i.firstChild);var r=shanka.getsetting("script"),o="",n="";o="simplified"==r?e.simplified:"traditional"==r?e.traditional:"simptrad"==r?e.simplified+e.traditional:e.traditional+e.simplified;for(var t=0,d=o.length;d>t;t++){var l=o[t];s(n,l)||(n+=l)}for(var t=0,d=n.length;d>t;t++){var l=n[t],c=encodeURIComponent(l),a=document.createElement("div");a.innerHTML=u.replace(/#CHAR#/g,c),a.style.display="none",a.classList.add("paddedbox"),a.id="sorder-"+c,i.appendChild(a)}},shanka.initstudyinfoetymology=function(d){for(var i=document.getElementById("hform"),u=document.getElementById("hformdiv"),c=u.innerHTML;i.firstChild;)i.removeChild(i.firstChild);for(var n=n=d.simplified+d.traditional,a="",t=0,o=n.length;o>t;t++){var r=n[t];s(a,r)||(a+=r)}for(var t=0,o=a.length;o>t;t++){var r=a[t],l=encodeURIComponent(r),e=document.createElement("div");e.innerHTML=c.replace(/#CHAR#/g,l),e.style.display="none",e.classList.add("paddedbox"),e.id="hform-"+l,e.width="80",e.height="90",i.appendChild(e)}},shanka.reveal=function(){"none"==document.getElementById("answers").style.display?(shanka.state.reveal="true",shanka.updateHistoryUrlState(shanka.state,"replace")):(shanka.state.reveal="false",shanka.updateHistoryUrlState(shanka.state,"replace")),shanka.updateStudyReveal()};var c=["simplified","cursive","callig","traditional","pinyin","definition","notes"],q=["draw","type"];shanka.studycorrectanswerheight=function(){for(var e=0,a=c.length;a>e;e++){var t=c[e],i=document.getElementById("answertable"+t),n=document.getElementById("answertext"+t);i.style.height=""+n.offsetHeight+"px"}},shanka.updateStudyReveal=function(){"reveal"in shanka.state&&"true"==shanka.state.reveal?(document.getElementById("answers").style.display="block",document.getElementById("canvastoolbar").style.display="none",document.getElementById("touchpaintlayers").style.display="none",document.getElementById("studyreveal").innerHTML="Hide Answer",document.getElementById("tracechar").style.display="none",shanka.studycorrectanswerheight()):(document.getElementById("answers").style.display="none",document.getElementById("canvastoolbar").style.display="block",document.getElementById("touchpaintlayers").style.display="block",document.getElementById("studyreveal").innerHTML="Show Answer",document.getElementById("tracechar").style.display="inline")},shanka.canvasright=function(){for(var e=0,t=shanka.minitpdisplayed;t>e;e++)if(shanka.minitps[e]==window.tp.activeChild){e+1<shanka.minitpdisplayed?window.tp.setActive(shanka.minitps[e+1]):(window.tp.deselectActiveChild(),window.tp.activeChild=null,window.tp.clear(),shanka.addminitouchpaint(),window.tp.setActive(shanka.minitps[shanka.minitpdisplayed-1]));break}},shanka.canvasleft=function(){for(var e=0,t=shanka.minitpdisplayed;t>e;e++)if(shanka.minitps[e]==window.tp.activeChild){e>0&&window.tp.setActive(shanka.minitps[e-1]);break}},shanka.oncolourselected=function(){var e=document.getElementById("tpbrushcolour");e.style.display="none",shanka.setsetting("brushcolour",e.value),shanka.writesettings(),window.tp.brushcolour="#"+shanka.getsetting("brushcolour"),shanka.updatebrushcolour();var e=document.getElementById("tpbrushcolour")},shanka.updatebrushcolour=function(){var t=document.getElementById("tpbrushcolour"),a=document.getElementById("canvaspenblack"),i=document.getElementById("tracechar");a.style.backgroundColor=t.style.color,a.style.color=t.style.backgroundColor;var e=t.style.backgroundColor;e=e.replace(")",",0.2)"),e=e.replace("rgb","rgba"),i.style.color=e},shanka.canvaspenblack=function(){var e=document.getElementById("tpbrushcolour");e.style.display="block",e.focus()},shanka.gettraceword=function(){return"study"==shanka.state.section?shanka.calculatetraceword():document.getElementById("practicetext").value},shanka.calculatetraceword=function(){if("cardid"in shanka.state){var a=parseInt(shanka.state.cardid),e=shanka.cards[a],i="",t=shanka.getsetting("script");return i="simptrad"==t&&e.simplified.length&&e.traditional.length?e.simplified+" "+e.traditional:"tradsimp"==t&&e.simplified.length&&e.traditional.length?e.traditional+" "+e.simplified:"simplified"==t&&e.simplified.length?e.simplified:"traditional"==t&&e.traditional.length?e.traditional:e.simplified.length?e.simplified:e.traditional}return"字"},shanka.showcharbutton=function(){var e=0;"char"in shanka.state&&(e=parseInt(shanka.state.char),e++);var t=shanka.gettraceword();e>=t.length?delete shanka.state.char:shanka.state.char=e,shanka.updateHistoryUrlState(shanka.state,"replace"),shanka.updatecharbutton()},shanka.updatecharbutton=function(){if("char"in shanka.state){var t=parseInt(shanka.state.char),a=shanka.gettraceword(),e=a.charAt(t);document.getElementById("tracechar").innerHTML=e,e.length&&" "!=e?document.getElementById("canvasshowchar").classList.add("clickedsmallb"):document.getElementById("canvasshowchar").classList.remove("clickedsmallb")}else document.getElementById("tracechar").innerHTML="",document.getElementById("canvasshowchar").classList.remove("clickedsmallb")},shanka.updateminitpmorebuttons=function(){document.getElementById("leftmoremini").style.display=window.tp&&window.tp.leftstack&&window.tp.leftstack.length?"inline":"none",document.getElementById("rightmoremini").style.display=window.tp&&window.tp.rightstack&&window.tp.rightstack.length?"inline":"none"},shanka.canvaspenwhite=function(){window.tp.penwhite()},shanka.canvasundo=function(){window.tp.undo(),shanka.canvasupdateundoredo()},shanka.canvasredo=function(){window.tp.redo(),shanka.canvasupdateundoredo()},shanka.canvasclear=function(){window.tp.clear()},shanka.canvasupdateundoredo=function(){window.tp.canundo()?(document.getElementById("canvasundo").style.color="#000",document.getElementById("canvasundo").style.pointerEvents=""):(document.getElementById("canvasundo").style.color="#888",document.getElementById("canvasundo").style.pointerEvents="none"),window.tp.canredo()?(document.getElementById("canvasredo").style.color="#000",document.getElementById("canvasredo").style.pointerEvents=""):(document.getElementById("canvasredo").style.color="#888",document.getElementById("canvasredo").style.pointerEvents="none")},shanka.inittouchpaint=function(t){window.tp||(window.tp=new M("touchpaint")),window.tp.brushcolour="#"+shanka.getsetting("brushcolour"),window.tp.backgcolour="#"+shanka.getsetting("backgcolour"),window.tp.gridcolour="#"+shanka.getsetting("gridcolour"),window.tp.bordercolour="#"+shanka.getsetting("bordercolour"),window.tp.brushwidth=parseInt(shanka.getsetting("brushwidth")),window.tp.init({width:"280",height:"280"});var a=document.getElementById("tpbrushcolour");a.value=shanka.getsetting("brushcolour"),window.colourpicker||(window.colourpicker=new e.color(a,{pickerMode:"HVS",pickerClosable:!0}),window.colourpicker.onclosedcallback=shanka.oncolourselected,window.colourpicker.pickerPosition="top"),shanka.updatebrushcolour(),shanka.leftminitpindex=0,shanka.minitpdisplayed=0;for(var i=0;t>i;i++)shanka.addminitouchpaint();shanka.hideremainingminitps(t),window.tp.setActive(shanka.minitps[0]),window.tp.copyFromParent(),window.tp.clearundohistory(),window.tp.clearredohistory(),shanka.canvasupdateundoredo()},shanka.addminitouchpaint=function(){if(shanka.minitpdisplayed==shanka.minitps.length){var e=document.createElement("canvas");e.ctx=e.getContext("2d"),e.id="touchpaintmini"+shanka.minitps.length,e.width=55,e.height=55,e.className="touchpaintmini";var a=document.getElementById("minitouchpaints");a.appendChild(e);var t=new M("touchpaintmini"+shanka.minitps.length);t.init({enabled:!1}),t.setParent(window.tp),t.copyFromParent(),shanka.minitps.push(t)}else{var i="touchpaintmini"+shanka.minitpdisplayed,n=document.getElementById(i),s=shanka.minitps[shanka.minitpdisplayed];s.clear(),n.style.display="inline"}shanka.minitpdisplayed+=1},shanka.hideremainingminitps=function(t){for(var e=t;e<shanka.minitps.length;e++){var a="touchpaintmini"+e,i=document.getElementById(a);i.style.display="none"}},shanka.doontouchstart=function(e){var t=e.touches[0].target;shanka.doanswerstart(t,!0),e.preventDefault()},shanka.doontouchmove=function(e){var t=document.elementFromPoint(touch.screenX,touch.screenY);shanka.doanswermove(t,!0),e.preventDefault()},shanka.doontouchend=function(e){shanka.doanswerend(),e.preventDefault()},shanka.doansweronmousedown=function(e){shanka.doanswerstart(e.target,!1),e.preventDefault()},shanka.doansweronmouseover=function(e){shanka.doanswermove(e.target,!1)},shanka.doansweronmouseup=function(){shanka.doanswerend()},shanka.answertouchstarted=!1,shanka.answermovelastover=null,shanka.doanswerstart=function(e,t){e&&"answerbtn"==e.className.slice(0,"answerbtn".length)&&(shanka.answertouchstarted=!0,shanka.doanswermove(e,t))},shanka.doanswermove=function(e,n){if(e&&shanka.answertouchstarted&&shanka.answermovelastover!=e&&"answerbtn"==e.className.slice(0,"answerbtn".length)){var i=e.id.slice(0,-1),t=i.slice("answerbtn".length),a=parseInt(e.id.slice(-1));shanka.answermovelastover=e,shanka.state[t]=a,shanka.updateHistoryUrlState(shanka.state,"replace"),shanka.selectanswer(t,a)}},shanka.selectanswer=function(n,a,d){var t=document.getElementById("answerbtn"+n+"1"),l=document.getElementById("answerbtn"+n+"2"),s=document.getElementById("answerbtn"+n+"3"),r=document.getElementById("answerbtn"+n+"4"),o=document.getElementById("answerbtn"+n+"5"),i=document.getElementById("answerbtn"+n+(""+a));t.classList.remove("answerbtnsel1"),l.classList.remove("answerbtnsel2"),s.classList.remove("answerbtnsel3"),r.classList.remove("answerbtnsel4"),o.classList.remove("answerbtnsel5");var e=d?"answerbtntouch":"answerbtn";t!=i&&t.className!=e+"1"&&t.classList.add(e+"1"),l!=i&&t.className!=e+"2"&&l.classList.add(e+"2"),s!=i&&t.className!=e+"3"&&s.classList.add(e+"3"),r!=i&&t.className!=e+"4"&&r.classList.add(e+"4"),o!=i&&t.className!=e+"5"&&o.classList.add(e+"5"),i.classList.remove("answerbtntouch"+a),i.classList.remove("answerbtn"+a),i.classList.add("answerbtnsel"+a);var c=document.getElementById("answertext"+n);c.style.background=1==a?"#f3abab":2==a?"#f5c595":3==a?"#ece599":4==a?"#bbe3b6":"#a5d2eb",shanka.allanswerschosen()&&(document.getElementById("studysubmit").style.display="block",document.getElementById("studysubmit").classList.remove("disabled"))},shanka.doanswerend=function(){n();try{shanka.answertouchstarted=!1,shanka.answermovelastover=null,"true"==shanka.getsetting("autoadvance")&&shanka.allanswerschosen()&&shanka.studysubmit()}catch(e){i("shanka.init",e)}t()},shanka.allanswerschosen=function(){for(var i=parseInt(shanka.state.questionid),t=shanka.questions[i],a=!0,e=0,n=t.answer.length;n>e;e++){var s=t.answer[e];if(!(s in shanka.state)){a=!1;break}}return a},shanka.studysubmit=function(){n();try{var l=parseInt(shanka.state.cardid),e=shanka.cards[l],d=parseInt(shanka.state.questionid),c=shanka.questions[d],a=shanka.algorithm.getdata("known_kn_rate"),o=e.kn_rate;shanka.algorithm.setcardscore(e,c,shanka.state);var u=new Date,s=0;shanka.studystarttime&&(s=u.getTime()-shanka.studystarttime.getTime(),s=Math.min(s,6e4));var r=0;e.kn_rate>a&&a>=o?r=1:e.kn_rate<=a&&o>a&&(r=-1),shanka.updateCurrentProgress(s,r),shanka.showstudy()}catch(e){i("shanka.init",e)}t()},shanka.studyinfo=function(){if("cardid"in shanka.state){var e=JSON.parse(JSON.stringify(shanka.state));e.section="info",shanka.navigate(e)}},shanka.showcardinfo=function(e){shanka.navigate({section:"info",cardid:""+e})},shanka.showstudy=function(){n();try{var s=shanka.algorithm.getnextcardquestion(),e=s[0],a=s[1];e&&a?shanka.navigate({section:"study",cardid:""+e.cardid,questionid:""+a.questionid}):(alert(STR.study_no_cards_questions_use_wizard_error),e||a?e?shanka.wizard():shanka.showimport():shanka.showmain())}catch(e){i("showstudy",e)}t()},shanka.studycurrent=function(){n();try{if("cardid"in shanka.state&&"questionid"in shanka.state){var e=JSON.parse(JSON.stringify(shanka.state));e.section="study",shanka.navigate(e)}}catch(e){i("studycurrent",e)}t()},shanka.studypractice=function(){if("cardid"in shanka.state){var e=JSON.parse(JSON.stringify(shanka.state));e.section="practice",shanka.navigate(e)}},shanka.freepractice=function(){shanka.navigate({section:"practice"})},shanka.studyedit=function(){if("cardid"in shanka.state){var e=parseInt(shanka.state.cardid);shanka.navigate({section:"card",cardid:""+e})}},shanka.studypleco=function(){var a=parseInt(shanka.state.cardid),t=shanka.cards[a],e=t.simplified;e.length||(e=t.traditional);var i="plecoapi://x-callback-url/s?q="+encodeURIComponent(e);window.location.href=i},shanka.studyback=function(){if(shanka.studybackstack.length){shanka.studyfwdstack.push(shanka.state);var e=shanka.studybackstack.pop();e.fwdback="true",shanka.navigate(e)}},shanka.studyforward=function(){if(shanka.studyfwdstack.length){shanka.studybackstack.push(shanka.state);var e=shanka.studyfwdstack.pop();e.fwdback="true",shanka.navigate(e)}},shanka.practicesearch=function(){var c=document.getElementById("searchresults"),l=document.getElementById("practicetext"),e=shanka.searchcards(l.value);document.getElementById("touchpaintouter").style.display="none";for(var t=document.getElementById("searchresultslist");t.firstChild;)t.removeChild(t.firstChild);if(c.style.display="block",0==e.length){var a=document.createElement("li");a.innerHTML=STR.study_search_no_results,t.appendChild(a)}else if(1==e.length){var n=e[0];shanka.showcardinfo(n.cardid)}else for(var s=0,o=e.length;o>s;s++){var n=e[s],i=document.createElement("a");i.href="javascript:shanka.showcardinfo("+n.cardid+");";var d=document.createTextNode(n.liststring());i.appendChild(d);var r=document.createElement("span");r.classList.add("chevron"),i.appendChild(r);var a=document.createElement("li");a.appendChild(i),t.appendChild(a)}},shanka.searchcards=function(e){e=e.toLowerCase();var a=[];for(var i in shanka.cards){var t=shanka.cards[i];(-1!=t.simplified.toLowerCase().search(e)||-1!=t.traditional.toLowerCase().search(e)||-1!=t.pinyin.toLowerCase().search(e))&&a.push(t)}if(0==a.length)for(var i in shanka.cards){var t=shanka.cards[i];(-1!=t.getdefinition().toLowerCase().search(e)||-1!=t.getnotes().toLowerCase().search(e))&&a.push(t)}return a},shanka.import=function(t,s,r,d,l){n();try{var a=0;if(r&&(a=shanka.findorcreatecategory(r)),d||"http"==t.slice(0,4)){shanka.addtoresult(STR.import_downloading_file_message);var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="text",e.onreadystatechange=function(){4==e.readyState&&shanka.continueimport(e.response,s,a,l)},e.onerror=function(t){o(STR.import_generic_error+": "+e.statusText)},e.ontimeout=function(){o(STR.import_timed_out_error)},e.onabort=function(){o(STR.import_aborted_error)},e.send(null)}else shanka.continueimport(t,s,a,l)}catch(e){i("import",e)}},shanka.continueimport=function(m,_,n,k){try{shanka.addtoresult(STR.import_parsing_data_message);var p=0,y=0,l=null;if(n>=0&&n in shanka.categories&&(l=shanka.categories[n]),"shanka"==_){var w=JSON.parse(m);for(var b in w)switch(b){case"categories":break;case"cards":break;case"settings":break;case"lessons":break;case"questions":break;case"algorithms":break;case"progress":break;default:o("continueimport: unknown object key: "+b)}}else if("sticky"==_)for(var u=m.split("\n"),c=0,f=u.length;f>c;c++){var g=u[c].replace(/\r/g,""),a=g.split("	");if(a&&5==a.length){var e=new r;if(e.simplified=a[0],e.traditional=a[1],e.pinyin=a[3],e.setdefinition(a[4].replace(/\s*\|\s*/g,"\n")),e.simplified.length||e.traditional.length){var h=shanka.mergeimportedcardwithexisting(e);h?(e=h,y++):(e.cardid=shanka.getnextguid(),shanka.cards[e.cardid]=e,shanka.addtocharmap(e.simplified,e.cardid),shanka.addtocharmap(e.traditional,e.cardid),p++),s(e.categoryids,n)||(e.categoryids.push(n),l.cardids.push(e.cardid)),e.write()}}}else if("plecotext"==_)for(var u=m.split("\n"),c=0,f=u.length;f>c;c++){var g=u[c].replace(/\r/g,"");if("/"==g.charAt(0)){for(var d=g;"/"==d.charAt(0);)d=d.slice(1);d=d.replace("/"," "),n=shanka.findorcreatecategory(d),l.write(),l=shanka.categories[n]}else{var a=g.split("	");if(a&&a.length>=1){var e=new r;if(s(a[0],"[")){var v=a[0].split("[");e.simplified=v[0],e.traditional=v[1].replace("]","")}else e.simplified=a[0],e.traditional=a[0];if(a.length>=2&&(e.pinyin=a[1]),a.length>=3&&e.setdefinition(a[2]),e.simplified.length||e.traditional.length){var h=shanka.mergeimportedcardwithexisting(e);h?(e=h,y++):(e.cardid=shanka.getnextguid(),shanka.cards[e.cardid]=e,shanka.addtocharmap(e.simplified,e.cardid),shanka.addtocharmap(e.traditional,e.cardid),p++),s(e.categoryids,n)||(e.categoryids.push(n),l.cardids.push(e.cardid)),e.write()}}}}l.write(),k(l,p,y)}catch(e){i("continueimport",e)}t()},shanka.initimport=function(){var a=document.getElementById("categorylist");for(var i in shanka.categories){var e=shanka.categories[i],t=document.createElement("option");t.text=e.name+" ("+e.cardids.length+")",t.value=e.name,a.add(t,null)}document.getElementById("import_section_quick").innerHTML=STR.import_section_quick,document.getElementById("import_section_shanka").innerHTML=STR.import_section_shanka,document.getElementById("import_section_other").innerHTML=STR.import_section_other,document.getElementById("import_hsk1_label").innerHTML=STR.import_hsk1_label,document.getElementById("import_hsk2_label").innerHTML=STR.import_hsk2_label,document.getElementById("import_hsk3_label").innerHTML=STR.import_hsk3_label,document.getElementById("import_hsk4_label").innerHTML=STR.import_hsk4_label,document.getElementById("import_hsk5_label").innerHTML=STR.import_hsk5_label,document.getElementById("import_hsk6_label").innerHTML=STR.import_hsk6_label,document.getElementById("import_hsk1_sentences_label").innerHTML=STR.import_hsk1_sentences_label,document.getElementById("import_hsk2_sentences_label").innerHTML=STR.import_hsk2_sentences_label,document.getElementById("import_hsk3_sentences_label").innerHTML=STR.import_hsk3_sentences_label,document.getElementById("import_chineasy_label").innerHTML=STR.import_chineasy_label,document.getElementById("import_flashcards_label").innerHTML=STR.import_flashcards_label,document.getElementById("import_lessons_label").innerHTML=STR.import_lessons_label,document.getElementById("import_algorithms_label").innerHTML=STR.import_algorithms_label,document.getElementById("import_settings_label").innerHTML=STR.import_settings_label,document.getElementById("import_progress_label").innerHTML=STR.import_progress_label,document.getElementById("import_paste_text_label").innerHTML=STR.import_paste_text_label,document.getElementById("import_pleco_text_file_label").innerHTML=STR.import_pleco_text_file_label,document.getElementById("import_pleco_xml_file_label").innerHTML=STR.import_pleco_xml_file_label,document.getElementById("import_stickystudy_label").innerHTML=STR.import_stickystudy_label,document.getElementById("import_skritter_simp_label").innerHTML=STR.import_skritter_simp_label,document.getElementById("import_skritter_trad_label").innerHTML=STR.import_skritter_trad_label,document.getElementById("import_default_category_label").innerHTML=STR.import_default_category_label,document.getElementById("import_paste_text_label2").innerHTML=STR.import_paste_text_label,document.getElementById("import_button_title").innerHTML=STR.page_import_title
},shanka.doimport=function(){var e="",t="",a="";if(document.getElementById("import-shanka-button").classList.contains("active"))e=document.getElementById("importdatashanka").value,t="shanka",a=null;else{t=document.getElementById("importplecoxml").classList.contains("active")?"plecoxml":document.getElementById("importplecotext").classList.contains("active")?"plecotext":document.getElementById("importsticky").classList.contains("active")?"sticky":document.getElementById("importsimp").classList.contains("active")?"skrittersimp":"skrittertrad",e=document.getElementById("importdataother").value;var i=document.getElementById("categorylist");a=i.options[i.selectedIndex].value}shanka.import(e,t,a,!1,function(a,t,e){shanka.showmain(),shanka.addtoresult(STR.wizard_created_flashcards_format.replace("{0}",""+t)),e&&shanka.addtoresult(STR.wizard_merged_flashcards_format.replace("{0}",""+e))})},shanka.findorcreatecategory=function(a){var t=null;for(var n in shanka.categories){var i=shanka.categories[n];if(a==i.name){t=i.categoryid;break}}if(null==t){var e=new p;e.name=a,e.categoryid=shanka.getnextguid(),e.write(),shanka.categories[e.categoryid]=e,e.write(),shanka.setsetting("lastcategoryid",e.categoryid),t=e.categoryid}return t},shanka.importHSK1Wrapper=function(){shanka.importHSK1(shanka.importdefaultcallback)},shanka.importHSK2Wrapper=function(){shanka.importHSK2(shanka.importdefaultcallback)},shanka.importHSK3Wrapper=function(){shanka.importHSK3(shanka.importdefaultcallback)},shanka.importHSK4Wrapper=function(){shanka.importHSK4(shanka.importdefaultcallback)},shanka.importHSK5Wrapper=function(){shanka.importHSK5(shanka.importdefaultcallback)},shanka.importHSK6Wrapper=function(){shanka.importHSK6(shanka.importdefaultcallback)},shanka.importHSK1SentencesWrapper=function(){shanka.importHSK1Sentences(shanka.importdefaultcallback)},shanka.importHSK2SentencesWrapper=function(){shanka.importHSK2Sentences(shanka.importdefaultcallback)},shanka.importHSK3SentencesWrapper=function(){shanka.importHSK3Sentences(shanka.importdefaultcallback)},shanka.importChineasyWrapper=function(){shanka.importChineasy(shanka.importdefaultcallback)},shanka.importdefaultcallback=function(t,a,e){shanka.showcategory(t.categoryid),shanka.addtoresult(STR.wizard_created_flashcards_format.replace("{0}",""+a)),e&&shanka.addtoresult(STR.wizard_merged_flashcards_format.replace("{0}",""+e))},shanka.initexported=function(){document.getElementById("export_download_filetext").innerHTML=STR.export_download_filetext},shanka.initexport=function(){for(var e=document.getElementById("exportcategorylist"),n=e.getElementsByTagName("li"),s=n[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var a in shanka.categories){var i=shanka.categories[a],t=document.createElement("li");t.innerHTML=s.replace(/#ID#/g,a).replace(/#NAME#/g,i.name).replace(/#ITEMS#/g,""+i.cardids.length),t.onclick=function(e){shanka.togglechild(e.target),e.preventDefault()},e.appendChild(t)}document.getElementById("export_categories_label").innerHTML=STR.export_categories_label,document.getElementById("export_export_format_label").innerHTML=STR.export_export_format_label,document.getElementById("export_section_shanka").innerHTML=STR.import_section_shanka,document.getElementById("export_other_label").innerHTML=STR.export_other_label,document.getElementById("export_lessons_label").innerHTML=STR.import_lessons_label,document.getElementById("export_algorithms_label").innerHTML=STR.import_algorithms_label,document.getElementById("export_settings_label").innerHTML=STR.import_settings_label,document.getElementById("export_progress_label").innerHTML=STR.import_progress_label,document.getElementById("export_do_export_label").innerHTML=STR.export_do_export_label,document.getElementById("export_pleco_text_file_label").innerHTML=STR.import_pleco_text_file_label,document.getElementById("export_stickystudy_label").innerHTML=STR.import_stickystudy_label,document.getElementById("export_skritter_simp_label").innerHTML=STR.import_skritter_simp_label,document.getElementById("export_skritter_trad_label").innerHTML=STR.import_skritter_trad_label,document.getElementById("export_do_export_label2").innerHTML=STR.export_do_export_label},shanka.export=function(c){n();try{var a="";if(shanka.addtoresult(STR.export_beginning_message),"shanka"==c){var _=[],u=[];for(var l in shanka.categories){var o=shanka.categories[l];if(document.getElementById("exportcategories"+l).classList.contains("active")){_.push(o);for(var s=0,h=o.cardids.length;h>s;s++){var g=o.cardids[s],e=shanka.cards[g],d=e.toarray();d.push(e.getdefinition()),d.push(e.getnotes()),d.push(e.getdatastring()),u.push(d)}}}var r={categories:_,cards:u};document.getElementById("exportsettings").classList.contains("active")&&(r.settings=shanka.settings),document.getElementById("exportlessons").classList.contains("active")&&(r.lessons=shanka.lessons,r.questions=shanka.questions),document.getElementById("exportalgorithms").classList.contains("active")&&(r.algorithms=shanka.algorithms),document.getElementById("exportprogress").classList.contains("active")&&(r.progress=shanka.progress),a=JSON.stringify(r)}else for(var l in shanka.categories){var o=shanka.categories[l];if(document.getElementById("exportcategories"+l).classList.contains("active")){"pleco"==c&&(a.length&&(a+="\n"),a+="//"+o.name+"\n");for(var s=0,h=o.cardids.length;h>s;s++){var g=o.cardids[s],e=shanka.cards[g];"pleco"==c?(e.simplified.length&&(a+=e.simplified),e.traditional.length&&(0==e.simplified.length?a+=e.traditional:e.simplified!=e.traditional&&(a+="["+e.traditional+"]")),a+="	"+e.pinyin+"	"+e.getdefinition()+"\n"):"sticky"==c?a+=e.simplified+"	"+e.traditional+"	"+e.pinyin+"	"+e.pinyin+"	"+e.getdefinition()+"\n":document.getElementById("dataformatsimp").classList.contains("active")?e.simplified.length&&(a+=e.simplified+"\n"):e.traditional.length&&(a+=e.traditional+"\n")}}}shanka.navigate({section:"exported"}),document.getElementById("exporttextdata").value=a,shanka.addtoresult(STR.export_success_message)}catch(e){i("export",e)}t()},shanka.rebuildqueue=function(){shanka.queue=[];var a=shanka.getallactivecategoryidsdict(!1);for(var i in shanka.cards){var e=shanka.cards[i];if(e.queued)for(var t=0,n=e.categoryids.length;n>t;t++){var s=e.categoryids[t];if(s in a){shanka.queue.push(e);break}}}shanka.queue.sort(function(e,t){return shanka.algorithm.queuecompare(e,t)})},shanka.rebuildhistory=function(){shanka.history=[];for(var t in shanka.cards){var e=shanka.cards[t];e.last_time&&shanka.history.push(e)}shanka.history.sort(shanka.historycompare)},shanka.historycompare=function(e,t){return t.last_time-e.last_time},shanka.removefromhistory=function(t){for(var e=0,a=shanka.history.length;a>e;e++){var i=shanka.history[e];if(t.cardid==i.cardid){shanka.history.splice(e,1);break}}},shanka.addtohistory=function(e){var t=shanka.binaryInsertionSearch(shanka.history,e,shanka.historycompare);shanka.history.splice(t,0,e)},shanka.removefromqueue=function(t){for(var e=0,a=shanka.queue.length;a>e;e++){var i=shanka.queue[e];if(t.cardid==i.cardid){shanka.queue.splice(e,1);break}}},shanka.addtoqueue=function(e){var t=shanka.binaryInsertionSearch(shanka.queue,e,function(e,t){return shanka.algorithm.queuecompare(e,t)});shanka.queue.splice(t,0,e)},shanka.countqueueunknown=function(){var t=new r;t.kn_rate=shanka.algorithm.getdata("known_kn_rate");for(var e=shanka.binaryInsertionSearch(shanka.queue,t,function(e,t){return shanka.algorithm.queuecompare(e,t)});e>0&&shanka.queue[e-1].kn_rate==t.kn_rate;)e--;return e},shanka.binaryInsertionSearch=function(n,s,r){for(var a,t=0,i=n.length-1,e=0;i>=t;)if(e=Math.floor((t+i)/2),a=r(n[e],s),0>a)t=e+1,e=t;else{if(!(a>0))break;i=e-1}return e},shanka.showhistory=function(){shanka.navigate({section:"history"})},shanka.showqueue=function(){shanka.navigate({section:"queue"})},shanka.inithistory=function(){for(var e=document.getElementById("historylist"),l=e.getElementsByTagName("li"),c=l[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);for(var r=shanka.filterlistpages(shanka.history),s="",t=0,d=r.length;d>t;t++){var n=r[t],i=shanka.algorithm.gethistorydisplaytext(n);if(i!=s){var a=document.createElement("li");a.innerHTML=i,a.classList.add("list-divider"),e.appendChild(a),s=i}var o=document.createElement("li");o.innerHTML=c.replace(/#ID#/g,n.cardid).replace(/#DESCRIPTION#/g,n.liststring()),e.appendChild(o)}},shanka.initqueue=function(){0==shanka.queue.length&&shanka.rebuildqueue();for(var e=document.getElementById("queuelist"),d=e.getElementsByTagName("li"),h=d[0].innerHTML;e.firstChild;)e.removeChild(e.firstChild);var o=shanka.filterlistpages(shanka.queue);u.trouble_shown=!1,u.learned_shown=!1,u.learning_shown=!1;for(var n=-1,a=0,g=o.length;g>a;a++){var i=o[a],l=shanka.algorithm.getqueuedisplaytext(i),r=l[0],c=l[1];if(r!=n){var t=document.createElement("li");t.innerHTML=c,t.classList.add("list-divider"),e.appendChild(t),n=r}var s=document.createElement("li");s.innerHTML=h.replace(/#ID#/g,i.cardid).replace(/#DESCRIPTION#/g,i.liststring()),e.appendChild(s)}},shanka.addcardtoqueueifallowed=function(){var r=null,s=shanka.algorithm.getdata("auto_unknown_min");if(s){var t=shanka.getallactivecategoryidslist(!0),o=shanka.countqueueunknown();if(s>o&&t.length){for(var n=Math.floor(Math.random()*t.length),c=t[n],i=shanka.categories[c],a=0,l=i.cardids.length;l>a;a++){var d=i.cardids[a],e=shanka.cards[d];if(e.enabled&&!e.queued){e.queued=!0,e.kn_rate=shanka.algorithm.getdata("default_kn_rate"),e.write(),r=e,shanka.queue=[];break}}a==i.cardids.length&&t.splice(n,1)}}return r},shanka.getsetting=function(e){return e in shanka.settings?shanka.settings[e]:shanka.getdefault(e)},shanka.getdefault=function(e){switch(""+e){case"lastcategoryid":return"0";case"brushcolour":return"302821";case"backgcolour":return"FDFFF5";case"gridcolour":return"EEEDE0";case"bordercolour":return"B8A983";case"brushwidth":return"12";case"script":return"simplified";case"guide":return"star";case"tonecolourenable":return"true";case"tone1colour":return"FF0000";case"tone2colour":return"FFAA00";case"tone3colour":return"00A000";case"tone4colour":return"0000FF";case"tone5colour":return"5D5D5D";case"rating1title":return STR.settings_response_1_default;case"rating2title":return STR.settings_response_2_default;case"rating3title":return STR.settings_response_3_default;case"rating4title":return STR.settings_response_4_default;case"rating5title":return STR.settings_response_5_default;case"rating1enable":return"true";case"rating2enable":return"true";case"rating3enable":return"true";case"rating4enable":return"true";case"rating5enable":return"true";case"rating5enable":return"true";case"addcardsmethod":return"auto";case"pinyintones":return"marks";case"autoadvance":return"true";case"script":return"simplified";case"listmax":return"100";case"currentversionnum":return"0";case"currentversiondate":return"2013-12-01"}return""},shanka.setsetting=function(e,t){t==shanka.getdefault(e)?delete shanka.settings[""+e]:shanka.settings[""+e]=""+t},shanka.writesettings=function(){localStorage.settings=shanka.compress(JSON.stringify(shanka.settings))},shanka.initsettings=function(){document.getElementById("lang_interface_language").innerHTML=STR.lang_interface_language,document.getElementById("settings_general_label").innerHTML=STR.settings_general_label,document.getElementById("settings_auto_queue_label").innerHTML=STR.settings_auto_queue_label,document.getElementById("settings_tone_marks_label").innerHTML=STR.settings_tone_marks_label,document.getElementById("settings_auto_advance_label").innerHTML=STR.settings_auto_advance_label,document.getElementById("settings_hanzi_input_label").innerHTML=STR.settings_hanzi_input_label,document.getElementById("settings_brush_colour_label").innerHTML=STR.settings_brush_colour_label,document.getElementById("settings_background_colour_label").innerHTML=STR.settings_background_colour_label,document.getElementById("settings_grid_colour_label").innerHTML=STR.settings_grid_colour_label,document.getElementById("settings_border_colour_label").innerHTML=STR.settings_border_colour_label,document.getElementById("settings_brush_width_label").innerHTML=STR.settings_brush_width_label,document.getElementById("settings_background_guides_label").innerHTML=STR.settings_background_guides_label,document.getElementById("settings_guide_star_label").innerHTML=STR.settings_guide_star_label,document.getElementById("settings_guide_grid_label").innerHTML=STR.settings_guide_grid_label,document.getElementById("settings_guide_cross_label").innerHTML=STR.settings_guide_cross_label,document.getElementById("settings_guide_bar_label").innerHTML=STR.settings_guide_bar_label,document.getElementById("settings_guide_none_label").innerHTML=STR.settings_guide_none_label,document.getElementById("settings_tone_colours_label").innerHTML=STR.settings_tone_colours_label,document.getElementById("settings_enable_tone_colours_label").innerHTML=STR.settings_enable_tone_colours_label,document.getElementById("settings_tone_1_label").innerHTML=STR.settings_tone_1_label,document.getElementById("settings_tone_2_label").innerHTML=STR.settings_tone_2_label,document.getElementById("settings_tone_3_label").innerHTML=STR.settings_tone_3_label,document.getElementById("settings_tone_4_label").innerHTML=STR.settings_tone_4_label,document.getElementById("settings_tone_5_label").innerHTML=STR.settings_tone_5_label,document.getElementById("settings_preferred_script_label").innerHTML=STR.settings_preferred_script_label,document.getElementById("settings_simp_trad_label").innerHTML=STR.settings_simp_trad_label,document.getElementById("settings_trad_simp_label").innerHTML=STR.settings_trad_simp_label,document.getElementById("settings_simplified_label").innerHTML=STR.settings_simplified_label,document.getElementById("settings_traditional_label").innerHTML=STR.settings_traditional_label,document.getElementById("settings_rating_enabled_label").innerHTML=STR.settings_rating_enabled_label,document.getElementById("settings_ratings_label").innerHTML=STR.settings_ratings_label,document.getElementById("gen_save_text").innerHTML=STR.gen_save_text,document.getElementById("gen_cancel_text").innerHTML=STR.gen_cancel_text;var o=document.getElementById("settingslanguages");for(var t in supportedLanguages)if(t!=STR.getCurrentLanguage()){var E=supportedLanguages[t],a=document.createElement("ul");a.classList.add("inset"),a.classList.add("list"),a.innerHTML="<li><a href='javascript:STR.setLanguage(\""+t+"\")'>"+E.this_switch_language+" ("+STR.get_language_name(t)+")<span class='chevron'></span></a></li>",o.appendChild(a);var b=document.createElement("br");o.appendChild(b)}"auto"==shanka.getsetting("addcardsmethod")&&document.getElementById("studyaddauto").classList.add("active"),"marks"==shanka.getsetting("pinyintones")&&document.getElementById("pinyinmarks").classList.add("active"),"true"==shanka.getsetting("autoadvance")&&document.getElementById("autoadvance").classList.add("active"),"simplified"==shanka.getsetting("script")&&document.getElementById("scriptsimplified").classList.add("active"),"traditional"==shanka.getsetting("script")&&document.getElementById("scripttraditional").classList.add("active"),"simptrad"==shanka.getsetting("script")&&document.getElementById("scriptsimptrad").classList.add("active"),"tradsimp"==shanka.getsetting("script")&&document.getElementById("scripttradsimp").classList.add("active"),document.getElementById("rating1title").value=shanka.getsetting("rating1title"),document.getElementById("rating2title").value=shanka.getsetting("rating2title"),document.getElementById("rating3title").value=shanka.getsetting("rating3title"),document.getElementById("rating4title").value=shanka.getsetting("rating4title"),document.getElementById("rating5title").value=shanka.getsetting("rating5title"),"star"==shanka.getsetting("guide")&&document.getElementById("guidestar").classList.add("active"),"grid"==shanka.getsetting("guide")&&document.getElementById("guidegrid").classList.add("active"),"cross"==shanka.getsetting("guide")&&document.getElementById("guidecross").classList.add("active"),"bar"==shanka.getsetting("guide")&&document.getElementById("guidebar").classList.add("active"),"none"==shanka.getsetting("guide")&&document.getElementById("guidenone").classList.add("active"),"true"==shanka.getsetting("rating1enable")&&document.getElementById("rating1enable").classList.add("active"),"true"==shanka.getsetting("rating2enable")&&document.getElementById("rating2enable").classList.add("active"),"true"==shanka.getsetting("rating3enable")&&document.getElementById("rating3enable").classList.add("active"),"true"==shanka.getsetting("rating4enable")&&document.getElementById("rating4enable").classList.add("active"),"true"==shanka.getsetting("rating5enable")&&document.getElementById("rating5enable").classList.add("active");var i=document.getElementById("brushcolour");i.value=shanka.getsetting("brushcolour");var g=new e.color(i,{pickerMode:"HVS",pickerClosable:!0});g.pickerPosition="top";var n=document.getElementById("backgcolour");n.value=shanka.getsetting("backgcolour");var y=new e.color(n,{pickerMode:"HSV",pickerClosable:!0});y.pickerPosition="top";var s=document.getElementById("gridcolour");s.value=shanka.getsetting("gridcolour");var w=new e.color(s,{pickerMode:"HSV",pickerClosable:!0});w.pickerPosition="top";var r=document.getElementById("bordercolour");r.value=shanka.getsetting("bordercolour");var I=new e.color(r,{pickerMode:"HSV",pickerClosable:!0});I.pickerPosition="top";var _=document.getElementById("brushwidth");_.value=shanka.getsetting("brushwidth");var l=document.getElementById("tone1colour");l.value=shanka.getsetting("tone1colour");var p=new e.color(l,{pickerMode:"HSV",pickerClosable:!0});p.pickerPosition="top";var d=document.getElementById("tone2colour");d.value=shanka.getsetting("tone2colour");var f=new e.color(d,{pickerMode:"HSV",pickerClosable:!0});f.pickerPosition="top";var c=document.getElementById("tone3colour");c.value=shanka.getsetting("tone3colour");var v=new e.color(c,{pickerMode:"HSV",pickerClosable:!0});v.pickerPosition="top";var u=document.getElementById("tone4colour");u.value=shanka.getsetting("tone4colour");var k=new e.color(u,{pickerMode:"HSV",pickerClosable:!0});k.pickerPosition="top";var h=document.getElementById("tone5colour");h.value=shanka.getsetting("tone5colour");var m=new e.color(h,{pickerMode:"HSV",pickerClosable:!0});m.pickerPosition="top","true"==shanka.getsetting("tonecolourenable")&&document.getElementById("tonecolourenable").classList.add("active"),shanka.tonecolourenableclicked()},shanka.dosavesettings=function(){return(document.getElementById("rating1enable").classList.contains("active")?1:0)+(document.getElementById("rating2enable").classList.contains("active")?1:0)+(document.getElementById("rating3enable").classList.contains("active")?1:0)+(document.getElementById("rating4enable").classList.contains("active")?1:0)+(document.getElementById("rating5enable").classList.contains("active")?1:0)<2?void alert(STR.settings_must_enable_two_buttons_error):document.getElementById("rating1enable").classList.contains("active")&&!document.getElementById("rating1title").value.length||document.getElementById("rating2enable").classList.contains("active")&&!document.getElementById("rating2title").value.length||document.getElementById("rating3enable").classList.contains("active")&&!document.getElementById("rating3title").value.length||document.getElementById("rating4enable").classList.contains("active")&&!document.getElementById("rating4title").value.length||document.getElementById("rating5enable").classList.contains("active")&&!document.getElementById("rating5title").value.length?void alert(STR.settings_each_enabled_rating_must_have_val_error):(document.getElementById("scriptsimplified").classList.contains("active")?shanka.setsetting("script","simplified"):document.getElementById("scripttraditional").classList.contains("active")?shanka.setsetting("script","traditional"):document.getElementById("scriptsimptrad").classList.contains("active")?shanka.setsetting("script","simptrad"):shanka.setsetting("script","tradsimp"),document.getElementById("guidestar").classList.contains("active")&&shanka.setsetting("guide","star"),document.getElementById("guidegrid").classList.contains("active")&&shanka.setsetting("guide","grid"),document.getElementById("guidecross").classList.contains("active")&&shanka.setsetting("guide","cross"),document.getElementById("guidebar").classList.contains("active")&&shanka.setsetting("guide","bar"),document.getElementById("guidenone").classList.contains("active")&&shanka.setsetting("guide","none"),shanka.setsetting("addcardsmethod",document.getElementById("studyaddauto").classList.contains("active")?"auto":"manual"),shanka.setsetting("pinyintones",document.getElementById("pinyinmarks").classList.contains("active")?"marks":"numbers"),shanka.setsetting("autoadvance",document.getElementById("autoadvance").classList.contains("active")?"true":"false"),shanka.setsetting("rating1title",document.getElementById("rating1title").value),shanka.setsetting("rating2title",document.getElementById("rating2title").value),shanka.setsetting("rating3title",document.getElementById("rating3title").value),shanka.setsetting("rating4title",document.getElementById("rating4title").value),shanka.setsetting("rating5title",document.getElementById("rating5title").value),shanka.setsetting("rating1enable",document.getElementById("rating1enable").classList.contains("active")?"true":"false"),shanka.setsetting("rating2enable",document.getElementById("rating2enable").classList.contains("active")?"true":"false"),shanka.setsetting("rating3enable",document.getElementById("rating3enable").classList.contains("active")?"true":"false"),shanka.setsetting("rating4enable",document.getElementById("rating4enable").classList.contains("active")?"true":"false"),shanka.setsetting("rating5enable",document.getElementById("rating5enable").classList.contains("active")?"true":"false"),shanka.setsetting("brushcolour",document.getElementById("brushcolour").value),shanka.setsetting("backgcolour",document.getElementById("backgcolour").value),shanka.setsetting("gridcolour",document.getElementById("gridcolour").value),shanka.setsetting("bordercolour",document.getElementById("bordercolour").value),shanka.setsetting("brushwidth",document.getElementById("brushwidth").value),shanka.setsetting("tonecolourenable",document.getElementById("tonecolourenable").classList.contains("active")?"true":"false"),shanka.setsetting("tone1colour",document.getElementById("tone1colour").value),shanka.setsetting("tone2colour",document.getElementById("tone2colour").value),shanka.setsetting("tone3colour",document.getElementById("tone3colour").value),shanka.setsetting("tone4colour",document.getElementById("tone4colour").value),shanka.setsetting("tone5colour",document.getElementById("tone5colour").value),shanka.writesettings(),shanka.showmain(),void shanka.addtoresult(STR.settings_saved_message))},shanka.tonecolourenableclicked=function(){var e=document.getElementById("tone1colour"),t=document.getElementById("tone2colour"),a=document.getElementById("tone3colour"),i=document.getElementById("tone4colour"),n=document.getElementById("tone5colour"),s=document.getElementById("tonecolourenable");s.classList.contains("active")?(e.removeAttribute("disabled"),t.removeAttribute("disabled"),a.removeAttribute("disabled"),i.removeAttribute("disabled"),n.removeAttribute("disabled"),e.parentElement.classList.remove("disabled"),t.parentElement.classList.remove("disabled"),a.parentElement.classList.remove("disabled"),i.parentElement.classList.remove("disabled"),n.parentElement.classList.remove("disabled")):(e.disabled="disabled",t.disabled="disabled",a.disabled="disabled",i.disabled="disabled",n.disabled="disabled",e.parentElement.classList.add("disabled"),t.parentElement.classList.add("disabled"),a.parentElement.classList.add("disabled"),i.parentElement.classList.add("disabled"),n.parentElement.classList.add("disabled"))},shanka.initmaintenance=function(){document.getElementById("maintenance_reload_local_label").innerHTML=STR.maintenance_reload_local_label,document.getElementById("maintenance_reload_label").innerHTML=STR.maintenance_reload_label,document.getElementById("maintenance_stand_alone_label").innerHTML=STR.maintenance_stand_alone_label,document.getElementById("maintenance_system_language_label").innerHTML=STR.maintenance_system_language_label,document.getElementById("maintenance_app_cache_label").innerHTML=STR.maintenance_app_cache_label,document.getElementById("maintenance_refresh_label").innerHTML=STR.maintenance_refresh_label,document.getElementById("maintenance_installed_label").innerHTML=STR.maintenance_installed_label,document.getElementById("maintenance_update_label").innerHTML=STR.maintenance_update_label,document.getElementById("maintenance_erase_local_label").innerHTML=STR.maintenance_erase_local_label,document.getElementById("maintenance_erase_label").innerHTML=STR.maintenance_erase_label,shanka._updatemlocalstorageused(),shanka.updateappcachestatus(),document.getElementById("standalonestatus").innerHTML=window.navigator.standalone+"",document.getElementById("systemlanguage").innerHTML=N(),shanka.setlocalversioninfo()},shanka.updateappcachestatus=function(){var e=document.getElementById("appcachestatus");e&&(e.innerHTML=shanka.getappcachestatus())},shanka._updatemlocalstorageused=function(){var e=JSON.stringify(localStorage).length,a="";if(1024>e)a=""+e;else{var t="";1048576>e?(e/=1024,t="k"):(e/=1048576,t="M"),a=1>e?""+e.toFixed(3)+t:10>e?""+e.toFixed(2)+t:""+e.toFixed(1)+t}var i=STR.maintenance_storage_used_format.replace("{0}",a);document.getElementById("localstorageused").innerHTML=i},shanka.onetouchwizard=function(){n();try{shanka.importmultiplecategories(["chineasy","hsk1"],shanka.onetouchwizard_afterimport,[])}catch(e){i("onetouchwizard",e)}t()},shanka.importmultiplecategories=function(s,r,o){n();try{var l=s[0],a=s.concat();a.splice(0,1);var e=function(i,n,t){shanka.addtoresult(STR.wizard_created_flashcards_format.replace("{0}",""+n)),t&&shanka.addtoresult(STR.wizard_merged_flashcards_format.replace("{0}",""+t));var e=o.concat();e.push(i.categoryid),a.length?shanka.importmultiplecategories(a,r,e):r(e)};switch(l){case"chineasy":shanka.importChineasy(e);break;case"hsk1":shanka.importHSK1(e);break;case"hsk2":shanka.importHSK2(e);break;case"hsk3":shanka.importHSK3(e);break;case"hsk4":shanka.importHSK4(e);break;case"hsk5":shanka.importHSK5(e);break;case"hsk6":shanka.importHSK6(e);break;case"hsk1sent":shanka.importHSK1Sentences(e);break;case"hsk2sent":shanka.importHSK2Sentences(e);break;case"hsk3sent":shanka.importHSK3Sentences(e)}}catch(e){i("onetouchwizard_afterimporthsk",e)}t()},shanka.onetouchwizard_afterimport=function(s){n();try{var a=shanka.EnsureAlgorithmBeginnerExists();shanka.addtoresult(STR.wizard_created_algorithm_message),a.current=!0,shanka.algorithm=a,a.write();var r=shanka.EnsureQuestionExists(["simplified"],["pinyin","definition"],["notes"],[]),o=shanka.EnsureQuestionExists(["definition"],["simplified","pinyin"],["notes"],["draw"]),e=shanka.EnsureLessonExists("Chinese 101",[r.questionid,o.questionid],s,!1);e.allquestions=!1,e.allcategories=!1,e.enabled=!0,e.write(),shanka.showstudy()}catch(e){i("onetouchwizard_afterimportchineasy",e)}t()},shanka.wizard=function(){var e={};e.section="wizard1",shanka.navigate(e)},shanka.wizard2=function(){var e=JSON.parse(JSON.stringify(shanka.state));e.section="wizard2",shanka.navigate(e)},shanka.wizard3=function(){var e=JSON.parse(JSON.stringify(shanka.state));e.section="wizard3",shanka.navigate(e)},shanka.wizard1result=function(t){var e=JSON.parse(JSON.stringify(shanka.state));e.script=t,e.section="wizard2",shanka.navigate(e)},shanka.wizard2result=function(){var t=JSON.parse(JSON.stringify(shanka.state)),e=[];return document.getElementById("vocabchineasy").classList.contains("active")&&e.push("chineasy"),document.getElementById("vocabhsk1").classList.contains("active")&&e.push("hsk1"),document.getElementById("vocabhsk2").classList.contains("active")&&e.push("hsk2"),document.getElementById("vocabhsk3").classList.contains("active")&&e.push("hsk3"),document.getElementById("vocabhsk4").classList.contains("active")&&e.push("hsk4"),document.getElementById("vocabhsk5").classList.contains("active")&&e.push("hsk5"),document.getElementById("vocabhsk6").classList.contains("active")&&e.push("hsk6"),document.getElementById("vocabhsk1sent").classList.contains("active")&&e.push("hsk1sent"),document.getElementById("vocabhsk2sent").classList.contains("active")&&e.push("hsk2sent"),document.getElementById("vocabhsk3sent").classList.contains("active")&&e.push("hsk3sent"),0==e.length?void alert(STR.wizard_select_one_vocab_error):(t.vocab=e.join(","),t.section="wizard3",void shanka.navigate(t))},shanka.wizard3result=function(t){var e=JSON.parse(JSON.stringify(shanka.state));e.level=t,e.section="wizard4",shanka.navigate(e)},shanka.wizard4result=function(){n();try{var e=shanka.state.vocab,a=e.split(",");shanka.importmultiplecategories(a,shanka.wizard4continue,[])}catch(e){i("wizard4result",e)}t()},shanka.wizard4continue=function(k){n();try{var p=document.getElementById("learndefinition").classList.contains("active"),f=document.getElementById("learnpinyin").classList.contains("active"),u=document.getElementById("learnhanzi").classList.contains("active"),a=document.getElementById("learnwriting").classList.contains("active"),c=document.getElementById("learncursive").classList.contains("active"),w=document.getElementById("learncallig").classList.contains("active"),E=(p?1:0)+(f?1:0)+(u||a?1:0)+(c||w?1:0);0==E&&alert(STR.wizard_select_something_learn_error);var b=shanka.state.level,l=null;l="beginner"==b?shanka.EnsureAlgorithmBeginnerExists():"intermediate"==b?shanka.EnsureAlgorithmIntermediateExists():shanka.EnsureAlgorithmAdvancedExists(),shanka.addtoresult(STR.wizard_created_algorithm_message),l.current=!0,shanka.algorithm=l,l.write();for(var I in shanka.algorithms){var _=shanka.algorithms[I];_.algorithmid!=l.algorithmid&&_.current&&(_.current=!1,_.write())}var g=shanka.state.script,h="simplified"==g||"both"==g,m="traditional"==g||"both"==g;h&&m?shanka.setsetting("script","simptrad"):h?shanka.setsetting("script","simplified"):shanka.setsetting("script","traditional");var s=[],e=[];if(p&&e.push("definition"),(u||a||c||learncallid)&&h&&e.push("simplified"),(u||a||c||learncallid)&&m&&e.push("traditional"),f&&e.push("pinyin"),p){var y=a?["draw"]:[],o=v(e,"definition"),r=shanka.EnsureQuestionExists(["definition"],o,["notes"],y);s.push(r.questionid)}if(u||a){if(h){var o=v(e,"simplified"),r=shanka.EnsureQuestionExists(["simplified"],o,["notes"],[]);s.push(r.questionid)}if(m){var o=v(e,"traditional"),r=shanka.EnsureQuestionExists(["traditional"],o,["notes"],[]);s.push(r.questionid)}}if(c){var y=a?["draw"]:[],o=v(e,"cursive"),r=shanka.EnsureQuestionExists(["cursive"],o,["notes"],y);s.push(r.questionid)}if(w){var y=a?["draw"]:[],o=v(e,"callig"),r=shanka.EnsureQuestionExists(["callig"],o,["notes"],y);s.push(r.questionid)}var d=shanka.EnsureLessonExists(STR.wizard_created_lesson_name,s,k,!1);d.allquestions=!1,d.allcategories=!1,d.enabled=!0,d.write(),shanka.showstudy()}catch(e){i("wizard4result",e)}t()};var v=function(i,a){for(var e=i.concat(),t=e.indexOf(a);-1!=t;)e.splice(t,1),t=e.indexOf(a);return e};shanka.wizard1init=function(){document.getElementById("wizard_which_characters_label").innerHTML=STR.wizard_which_characters_label,document.getElementById("wizard_simplified_characters_label").innerHTML=STR.wizard_simplified_characters_label,document.getElementById("wizard_traditional_characters_label").innerHTML=STR.wizard_traditional_characters_label,document.getElementById("wizard_both_characters_label").innerHTML=STR.wizard_both_characters_label},shanka.wizard2init=function(){document.getElementById("wizard_which_vocab_label").innerHTML=STR.wizard_which_vocab_label,document.getElementById("import_hsk1_label").innerHTML=STR.import_hsk1_label,document.getElementById("import_hsk2_label").innerHTML=STR.import_hsk2_label,document.getElementById("import_hsk3_label").innerHTML=STR.import_hsk3_label,document.getElementById("import_hsk4_label").innerHTML=STR.import_hsk4_label,document.getElementById("import_hsk5_label").innerHTML=STR.import_hsk5_label,document.getElementById("import_hsk6_label").innerHTML=STR.import_hsk6_label,document.getElementById("import_hsk1_sentences_label").innerHTML=STR.import_hsk1_sentences_label,document.getElementById("import_hsk2_sentences_label").innerHTML=STR.import_hsk2_sentences_label,document.getElementById("import_hsk3_sentences_label").innerHTML=STR.import_hsk3_sentences_label,document.getElementById("import_chineasy_label").innerHTML=STR.import_chineasy_label,document.getElementById("wizard_next_label").innerHTML=STR.wizard_next_label
},shanka.wizard3init=function(){document.getElementById("wizard_what_is_level_label").innerHTML=STR.wizard_what_is_level_label,document.getElementById("wizard_algorithm_name_beginner").innerHTML=STR.wizard_algorithm_name_beginner,document.getElementById("wizard_algorithm_name_intermediate").innerHTML=STR.wizard_algorithm_name_intermediate,document.getElementById("wizard_algorithm_name_advanced").innerHTML=STR.wizard_algorithm_name_advanced},shanka.wizard4init=function(){document.getElementById("wizard_what_want_learn_label").innerHTML=STR.wizard_what_want_learn_label,document.getElementById("wizard_definition_label").innerHTML=STR.wizard_definition_label,document.getElementById("wizard_pinyin_label").innerHTML=STR.wizard_pinyin_label,document.getElementById("wizard_reading_label").innerHTML=STR.wizard_reading_label,document.getElementById("wizard_writing_label").innerHTML=STR.wizard_writing_label,document.getElementById("wizard_cursive_label").innerHTML=STR.wizard_cursive_label,document.getElementById("wizard_calligraphy_label").innerHTML=STR.wizard_calligraphy_label,document.getElementById("wizard_done_label").innerHTML=STR.wizard_done_label},shanka.importHSK1=function(e){shanka.import(STR.import_hsk1_location,"plecotext",STR.import_hsk1_category,!0,e)},shanka.importHSK2=function(e){shanka.import(STR.import_hsk2_location,"plecotext",STR.import_hsk2_category,!0,e)},shanka.importHSK3=function(e){shanka.import(STR.import_hsk3_location,"plecotext",STR.import_hsk3_category,!0,e)},shanka.importHSK4=function(e){shanka.import(STR.import_hsk4_location,"plecotext",STR.import_hsk4_category,!0,e)},shanka.importHSK5=function(e){shanka.import(STR.import_hsk5_location,"plecotext",STR.import_hsk5_category,!0,e)},shanka.importHSK6=function(e){shanka.import(STR.import_hsk6_location,"plecotext",STR.import_hsk6_category,!0,e)},shanka.importHSK1Sentences=function(e){shanka.import(STR.import_hsk1_sentences_location,"plecotext",STR.import_hsk1_sentences_category,!0,e)},shanka.importHSK2Sentences=function(e){shanka.import(STR.import_hsk2_sentences_location,"plecotext",STR.import_hsk2_sentences_category,!0,e)},shanka.importHSK3Sentences=function(e){shanka.import(STR.import_hsk3_sentences_location,"plecotext",STR.import_hsk3_sentences_category,!0,e)},shanka.importChineasy=function(e){shanka.import(STR.import_chineasy_location,"plecotext",STR.import_chineasy_category,!0,e)},shanka.EnsureAlgorithmBeginnerExists=function(){var t=STR.wizard_algorithm_name_beginner,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={minimum_interval:3,auto_unknown_min:5,default_kn_rate:.4,first_element_prob:.2},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmIntermediateExists=function(){var t=STR.wizard_algorithm_name_intermediate,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmAdvancedExists=function(){var t=STR.wizard_algorithm_name_advanced,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={minimum_interval:5,auto_unknown_min:10,default_kn_rate:.6,first_element_prob:.1},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmReviewExists=function(){var t=STR.wizard_algorithm_name_review,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={auto_unknown_min:0},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmRandomExists=function(){var t=STR.wizard_algorithm_name_random,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={prob_of_any_random:1},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmRandomReviewExists=function(){var t=STR.wizard_algorithm_name_randomreview,e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!0,e.name=t,e.type="shanka",e.data={auto_unknown_min:0,prob_of_any_random:1},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmPlecoExists=function(){var t="Pleco",e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!1,e.name=t,e.type="shanka",e.data={},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.EnsureAlgorithmSkritterExists=function(){var t="Skritter",e=shanka.FindAlgorithmByName(t);return e||(e=new l,e.algorithmid=shanka.getnextguid(),e.current=!1,e.enabled=!1,e.name=t,e.type="shanka",e.data={},e.write(),shanka.algorithms[e.algorithmid]=e),e},shanka.FindAlgorithmByName=function(a){var e=null;for(var i in shanka.algorithms){var t=shanka.algorithms[i];if(t.name==a){e=t;break}}return e},shanka.EnsureQuestionExists=function(t,a,i,n){for(var s in shanka.questions){var e=shanka.questions[s];if(I(t,e.stem)&&I(a,e.answer)&&I(i,e.display)&&I(n,e.input))return shanka.addtoresult(STR.wizard_found_question_message),e}var e=new h;return e.questionid=shanka.getnextguid(),shanka.addnewquestiontolessons(e.questionid),e.input=n.concat(),e.stem=t.concat(),e.answer=a.concat(),e.display=i.concat(),e.generatename(),e.generatequestiontext(),e.write(),shanka.questions[e.questionid]=e,shanka.addtoresult(STR.wizard_added_question_message),e},shanka.EnsureLessonExists=function(t,a,i,n){for(var s in shanka.lessons){var e=shanka.lessons[s];if(B(a,e.questionids)&&B(i,e.categoryids)&&n==e.reviewmode&&t==e.name)return shanka.addtoresult(STR.wizard_found_lesson_message),e}var e=new _;return e.lessonid=shanka.getnextguid(),e.name=shanka.getuniquelessonname(t),e.questionids=a.concat(),e.categoryids=i.concat(),e.reviewmode=n,e.write(),shanka.lessons[e.lessonid]=e,shanka.addtoresult(STR.wizard_added_lesson_message),e},shanka.showhelp=function(a){var e=JSON.parse(JSON.stringify(shanka.state)),t=e.section;t&&"help"!=t&&(e.previous=t),e.section="help",e.page=a?a:"section"in shanka.state?shanka.state.section:"",shanka.navigate(e)},shanka.inithelp=function(e){switch(document.getElementById("help_contents_label").innerHTML=STR.help_contents_label,document.getElementById("help_app_support_see_message").innerHTML=STR.app_support_see_message,e||(e=""),e){case"":case"contents":shanka.inithelp_contents();break;case"initialising":case"welcome":case"main":shanka.inithelp_mainpage();break;case"about":shanka.inithelp_about();break;case"algorithm-add":case"algorithm-shanka":case"editalgorithms":case"algorithms":shanka.inithelp_algorithms();break;case"addcategory":case"editcategoryname":case"categories":case"category":shanka.inithelp_categories();break;case"exportresult":case"export":shanka.inithelp_export();break;case"history":shanka.inithelp_history();break;case"shankaimport":case"skritterimport":case"stickyimport":case"plecoimport":case"import":shanka.inithelp_import();break;case"card":case"info":shanka.inithelp_info();break;case"lesson":case"lessons":shanka.inithelp_lessons();break;case"maintenance":shanka.inithelp_maintenance();break;case"practice":shanka.inithelp_practice();break;case"progress":shanka.inithelp_progress();break;case"question":case"questions":shanka.inithelp_questions();break;case"queue":shanka.inithelp_queue();break;case"settings":shanka.inithelp_settings();break;case"study":shanka.inithelp_study();break;case"wizard1":case"wizard2":case"wizard3":case"wizard4":shanka.inithelp_wizard();break;default:o("shanka.inithelp Unknown help page: "+e)}},shanka.inithelp_contents=function(){shanka.setpagetitle(STR.page_help_contents_title),document.getElementById("helptext").innerHTML="<h3>"+STR.page_help_contents_title+"</h3><h3><li><a href=\"javascript:shanka.showhelp('main');\">  "+STR.page_main_title+"</a></li><li><a href=\"javascript:shanka.showhelp('study');\"> "+STR.page_study_title+"</a></li><li><a href=\"javascript:shanka.showhelp('practice');\">"+STR.page_practice_title+"</a></li><li><a href=\"javascript:shanka.showhelp('card');\">  "+STR.page_cards_title+"</a></li><li><a href=\"javascript:shanka.showhelp('history');\"> "+STR.page_history_title+"</a></li><li><a href=\"javascript:shanka.showhelp('queue');\"> "+STR.page_queue_title+"</a></li><li><a href=\"javascript:shanka.showhelp('progress');\">"+STR.page_progress_title+"</a></li><li><a href=\"javascript:shanka.showhelp('categories');\">"+STR.page_categories_title+"</a></li><li><a href=\"javascript:shanka.showhelp('questions');\">"+STR.page_questions_title+"</a></li><li><a href=\"javascript:shanka.showhelp('lessons');\">"+STR.page_lessons_title+"</a></li><li><a href=\"javascript:shanka.showhelp('algorithms');\">"+STR.page_algorithms_title+"</a></li><li><a href=\"javascript:shanka.showhelp('wizard1');\">"+STR.page_wizard_title+"</a></li><li><a href=\"javascript:shanka.showhelp('import');\">"+STR.page_import_title+"</a></li><li><a href=\"javascript:shanka.showhelp('export');\">"+STR.page_export_title+"</a></li><li><a href=\"javascript:shanka.showhelp('settings');\">"+STR.page_settings_title+"</a></li><li><a href=\"javascript:shanka.showhelp('maintenance');\">"+STR.page_maintenance_title+"</a></li><li><a href=\"javascript:shanka.showhelp('about');\"> "+STR.page_about_title+"</a></li></h3>"},shanka.inithelp_mainpage=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_main_title),document.getElementById("helptext").innerHTML=STR.help_main_page},shanka.inithelp_lessons=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_lessons_title),document.getElementById("helptext").innerHTML=STR.help_lessons},shanka.inithelp_study=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_study_title),document.getElementById("helptext").innerHTML=STR.help_study},shanka.inithelp_info=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_card_info_title),document.getElementById("helptext").innerHTML=STR.help_card_info},shanka.inithelp_practice=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_practice_title),document.getElementById("helptext").innerHTML=STR.help_practice},shanka.inithelp_card=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_cards_title),document.getElementById("helptext").innerHTML=STR.help_study},shanka.inithelp_categories=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_categories_title),document.getElementById("helptext").innerHTML=STR.help_categories},shanka.inithelp_progress=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_progress_title),document.getElementById("helptext").innerHTML=STR.help_progress},shanka.inithelp_history=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_history_title),document.getElementById("helptext").innerHTML=STR.help_history},shanka.inithelp_import=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_import_title),document.getElementById("helptext").innerHTML=STR.help_import},shanka.inithelp_export=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_export_title),document.getElementById("helptext").innerHTML=STR.help_export},shanka.inithelp_settings=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_settings_title),document.getElementById("helptext").innerHTML=STR.help_settings},shanka.inithelp_queue=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_queue_title),document.getElementById("helptext").innerHTML=STR.help_queue},shanka.inithelp_algorithms=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_algorithms_title),document.getElementById("helptext").innerHTML=STR.help_algorithms},shanka.inithelp_questions=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_questions_title),document.getElementById("helptext").innerHTML=STR.help_questions},shanka.inithelp_maintenance=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_maintenance_title),document.getElementById("helptext").innerHTML=STR.help_maintenance},shanka.inithelp_wizard=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_wizard_title),document.getElementById("helptext").innerHTML=STR.help_wizard},shanka.inithelp_about=function(){shanka.setpagetitle(STR.page_help_prefix_title+": "+STR.page_about_title),document.getElementById("helptext").innerHTML=STR.help_about},shanka.getOnlineAppVersion=function(){return"0.26"},shanka.getOnlineAppBuildDate=function(){return"2014-03-14"};var k=function(e){return document.getElementById(e)},m=new Snap({element:document.getElementById("content"),disable:"right"}),T=function(){var e=m.state(),t=e.info.towards,a=e.info.opening;"right"==a&&"left"==t?k("left-drawer").classList.remove("active-drawer"):"left"==a&&"right"==t&&k("left-drawer").classList.add("active-drawer")};m.on("drag",T),m.on("animating",T),m.on("animated",T),k("toggle-left").addEventListener("click",function(){shanka.showsidebarmenu()}),k("help-button").addEventListener("click",function(){shanka.showhelp()});var O=new AppScroll({toolbar:document.getElementsByClassName("bar-title")[0],scroller:document.getElementsByClassName("content")[0]});O.on(),shanka.switchtab=function(i,r){for(var a=i.parentElement,e=0,n=a.children.length;n>e;e++){var t=a.children[e];t.id==i.id?t.classList.add("active"):t.classList.remove("active")}for(var s=document.getElementById(r),a=s.parentElement,e=0,n=a.children.length;n>e;e++){var t=a.children[e];t.id==s.id?t.classList.add("active"):t.classList.remove("active")}},shanka.toggle=function(e){e.classList.contains("radio")?shanka.toggleradio(e):e.classList.contains("check")?shanka.togglecheck(e):e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")},shanka.togglechild=function(e){if(e.classList.contains("toggle")&&!e.classList.contains("disabled"))shanka.toggle(e);else for(var t=0,a=e.children.length;a>t;t++)e.children[t].classList.contains("toggle")&&!e.children[t].classList.contains("disabled")&&shanka.toggle(e.children[t])},shanka.toggleradio=function(t){for(var s=t.classList.contains("active"),e=t.parentElement;e&&!e.classList.contains("radiogroup");){if(e.classList.contains("disabled"))return;e=e.parentElement}if(e)for(var n=0,r=e.children.length;r>n;n++){var a=e.children[n];a.classList.contains("toggle")&&a.classList.remove("active");for(var i=0,o=a.children.length;o>i;i++)a.children[i].classList.contains("toggle")&&a.children[i].classList.remove("active")}var l=t.classList.contains("deselectallowed");s?l&&t.classList.remove("active"):t.classList.add("active")},shanka.togglecheck=function(a){var d=a.parentElement.classList.contains("disabled");if(!d){var l=a.classList.contains("active"),s=a.classList.contains("all"),o=a.parentElement.parentElement,i=null,n=!0;s||(l?a.classList.remove("active"):a.classList.add("active"));for(var r=0,c=o.children.length;c>r;r++)for(var t=o.children[r],e=0,u=t.children.length;u>e;e++)t.children[e].classList.contains("toggle")&&(s&&l?t.children[e].classList.remove("active"):s?t.children[e].classList.add("active"):t.children[e].classList.contains("all")?i=t.children[e]:n=n&&t.children[e].classList.contains("active"));i&&(n?i.classList.add("active"):i.classList.remove("active"))}};